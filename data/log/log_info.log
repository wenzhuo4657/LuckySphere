24-11-27.11:41:02.261 [main            ] INFO  WelcomeLogoApplicationListener - 

 :: Dubbo Spring Boot (v3.0.9) : https://github.com/apache/dubbo-spring-boot-project
 :: Dubbo (v3.0.9) : https://github.com/apache/dubbo
 :: Discuss group : dev@dubbo.apache.org

24-11-27.11:41:02.322 [background-preinit] INFO  Version                - HV000001: Hibernate Validator 6.2.5.Final
24-11-27.11:41:02.328 [main            ] INFO  Application            - Starting Application using Java 1.8.0_321 on 4657001021 with PID 2508 (E:\code\java\idea\big-market\big-market-app\target\classes started by 14783 in E:\code\java\idea\big-market)
24-11-27.11:41:02.329 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-11-27.11:41:03.977 [main            ] INFO  FrameworkModel         -  [DUBBO] Reset global default framework from null to Dubbo Framework[1], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:03.978 [main            ] INFO  FrameworkModel         -  [DUBBO] Dubbo Framework[1] is created, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:04.026 [main            ] INFO  ApplicationModel       -  [DUBBO] Dubbo Application[1.0](unknown) is created, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:04.027 [main            ] INFO  ScopeModel             -  [DUBBO] Dubbo Module[1.0.0] is created, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:04.056 [main            ] INFO  AbstractConfigManager  -  [DUBBO] Config settings: {dubbo.config.mode=STRICT, dubbo.config.ignore-duplicated-interface=false}, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:04.056 [main            ] INFO  AbstractConfigManager  -  [DUBBO] Config settings: {dubbo.config.mode=STRICT, dubbo.config.ignore-duplicated-interface=false}, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:04.114 [main            ] INFO  FrameworkModel         -  [DUBBO] Reset global default application from null to Dubbo Application[1.1](unknown), dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:04.115 [main            ] INFO  ApplicationModel       -  [DUBBO] Dubbo Application[1.1](unknown) is created, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:04.115 [main            ] INFO  ScopeModel             -  [DUBBO] Dubbo Module[1.1.0] is created, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:04.120 [main            ] INFO  AbstractConfigManager  -  [DUBBO] Config settings: {dubbo.config.mode=STRICT, dubbo.config.ignore-duplicated-interface=false}, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:04.120 [main            ] INFO  AbstractConfigManager  -  [DUBBO] Config settings: {dubbo.config.mode=STRICT, dubbo.config.ignore-duplicated-interface=false}, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:04.131 [main            ] INFO  DubboSpringInitializer -  [DUBBO] Use default application: Dubbo Application[1.1](unknown), dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:04.131 [main            ] INFO  ScopeModel             -  [DUBBO] Dubbo Module[1.1.1] is created, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:04.134 [main            ] INFO  AbstractConfigManager  -  [DUBBO] Config settings: {dubbo.config.mode=STRICT, dubbo.config.ignore-duplicated-interface=false}, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:04.136 [main            ] INFO  DubboSpringInitializer -  [DUBBO] Use default module model of target application: Dubbo Module[1.1.1], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:04.138 [main            ] INFO  DubboSpringInitializer -  [DUBBO] Bind Dubbo Module[1.1.1] to spring container: org.springframework.beans.factory.support.DefaultListableBeanFactory@5b444398, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:04.517 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-27.11:41:04.519 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-27.11:41:04.573 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 38 ms. Found 0 Redis repository interfaces.
24-11-27.11:41:04.826 [main            ] INFO  ServiceAnnotationPostProcessor -  [DUBBO] BeanNameGenerator bean can't be found in BeanFactory with name [org.springframework.context.annotation.internalConfigurationBeanNameGenerator], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:04.827 [main            ] INFO  ServiceAnnotationPostProcessor -  [DUBBO] BeanNameGenerator will be a instance of org.springframework.context.annotation.AnnotationBeanNameGenerator , it maybe a potential problem on bean name generation., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:04.844 [main            ] INFO  ServiceAnnotationPostProcessor -  [DUBBO] Found 2 classes annotated by Dubbo @Service under package [cn.wenzhuo4657.BigMarket]: [cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController, cn.wenzhuo4657.BigMarket.trigger.http.RaffleStrategyController], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:04.856 [main            ] INFO  ServiceAnnotationPostProcessor -  [DUBBO] Register ServiceBean[ServiceBean:cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService:1.0]: Root bean: class [org.apache.dubbo.config.spring.ServiceBean]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:04.857 [main            ] INFO  ServiceAnnotationPostProcessor -  [DUBBO] Register ServiceBean[ServiceBean:cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService:1.0]: Root bean: class [org.apache.dubbo.config.spring.ServiceBean]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:04.858 [main            ] INFO  ServiceAnnotationPostProcessor -  [DUBBO] BeanNameGenerator bean can't be found in BeanFactory with name [org.springframework.context.annotation.internalConfigurationBeanNameGenerator], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:04.858 [main            ] INFO  ServiceAnnotationPostProcessor -  [DUBBO] BeanNameGenerator will be a instance of org.springframework.context.annotation.AnnotationBeanNameGenerator , it maybe a potential problem on bean name generation., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:04.858 [main            ] WARN  ServiceAnnotationPostProcessor -  [DUBBO] No class annotated by Dubbo @Service was found under package [cn.wenzhuo4657.trigger.api], ignore re-scanned classes: 0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:04.862 [main            ] INFO  ConfigurationClassPostProcessor - Cannot enhance @Configuration bean definition 'org.apache.dubbo.spring.boot.autoconfigure.DubboRelaxedBinding2AutoConfiguration' since its singleton instance has been created too early. The typical cause is a non-static @Bean method with a BeanDefinitionRegistryPostProcessor return type: Consider declaring such methods as 'static'.
24-11-27.11:41:04.862 [main            ] INFO  ConfigurationClassPostProcessor - Cannot enhance @Configuration bean definition 'org.apache.dubbo.spring.boot.autoconfigure.DubboAutoConfiguration' since its singleton instance has been created too early. The typical cause is a non-static @Bean method with a BeanDefinitionRegistryPostProcessor return type: Consider declaring such methods as 'static'.
24-11-27.11:41:04.939 [main            ] INFO  GenericScope           - BeanFactory id=d499ceed-279a-3d77-817f-a65b97419307
24-11-27.11:41:05.734 [main            ] INFO  ReferenceAnnotationBeanPostProcessor - class org.apache.dubbo.config.spring.beans.factory.annotation.ReferenceAnnotationBeanPostProcessor was destroying!
24-11-27.11:41:06.058 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'zooKeeperClientConfig' of type [cn.wenzhuo4657.BigMarket.config.ZooKeeperClientConfig$$EnhancerBySpringCGLIB$$6bb1ac33] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-11-27.11:41:06.068 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-11-27.11:41:06.071 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-11-27.11:41:06.073 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$585/122461713] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-11-27.11:41:06.076 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-11-27.11:41:06.080 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'zookeeper.sdk.config-cn.wenzhuo4657.BigMarket.config.ZookeeperClientConfigProperties' of type [cn.wenzhuo4657.BigMarket.config.ZookeeperClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-11-27.11:41:06.126 [main            ] INFO  CuratorFrameworkImpl   - Starting
24-11-27.11:41:06.132 [main            ] INFO  ZooKeeper              - Client environment:zookeeper.version=3.6.0--b4c89dc7f6083829e18fae6e446907ae0b1f22d7, built on 02/25/2020 14:38 GMT
24-11-27.11:41:06.132 [main            ] INFO  ZooKeeper              - Client environment:host.name=4657001021.mshome.net
24-11-27.11:41:06.132 [main            ] INFO  ZooKeeper              - Client environment:java.version=1.8.0_321
24-11-27.11:41:06.132 [main            ] INFO  ZooKeeper              - Client environment:java.vendor=Oracle Corporation
24-11-27.11:41:06.132 [main            ] INFO  ZooKeeper              - Client environment:java.home=C:\Program Files\Java\jdk1.8.0_321\jre
24-11-27.11:41:06.132 [main            ] INFO  ZooKeeper              - Client environment:java.class.path=C:\Program Files\Java\jdk1.8.0_321\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\access-bridge-64.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\cldrdata.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\jaccess.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\jfxrt.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\nashorn.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\sunpkcs11.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\zipfs.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\jce.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\jfr.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\jfxswt.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\resources.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\rt.jar;E:\code\java\idea\big-market\big-market-app\target\classes;D:\maven\local-maven\com\xuxueli\xxl-job-core\2.4.1\xxl-job-core-2.4.1.jar;D:\maven\local-maven\io\netty\netty-codec-http\4.1.92.Final\netty-codec-http-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-common\4.1.92.Final\netty-common-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-buffer\4.1.92.Final\netty-buffer-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport\4.1.92.Final\netty-transport-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec\4.1.92.Final\netty-codec-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-handler\4.1.92.Final\netty-handler-4.1.92.Final.jar;D:\maven\local-maven\com\google\code\gson\gson\2.9.1\gson-2.9.1.jar;D:\maven\local-maven\org\apache\groovy\groovy\4.0.21\groovy-4.0.21.jar;D:\maven\local-maven\org\slf4j\slf4j-api\1.7.36\slf4j-api-1.7.36.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-starter-zookeeper-discovery\3.1.4\spring-cloud-starter-zookeeper-discovery-3.1.4.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-starter-zookeeper\3.1.4\spring-cloud-starter-zookeeper-3.1.4.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-starter\3.1.7\spring-cloud-starter-3.1.7.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-context\3.1.7\spring-cloud-context-3.1.7.jar;D:\maven\local-maven\org\springframework\security\spring-security-crypto\5.7.8\spring-security-crypto-5.7.8.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-commons\3.1.7\spring-cloud-commons-3.1.7.jar;D:\maven\local-maven\org\springframework\security\spring-security-rsa\1.0.11.RELEASE\spring-security-rsa-1.0.11.RELEASE.jar;D:\maven\local-maven\org\bouncycastle\bcpkix-jdk15on\1.69\bcpkix-jdk15on-1.69.jar;D:\maven\local-maven\org\bouncycastle\bcprov-jdk15on\1.69\bcprov-jdk15on-1.69.jar;D:\maven\local-maven\org\bouncycastle\bcutil-jdk15on\1.69\bcutil-jdk15on-1.69.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-zookeeper-core\3.1.4\spring-cloud-zookeeper-core-3.1.4.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-validation\2.7.12\spring-boot-starter-validation-2.7.12.jar;D:\maven\local-maven\org\hibernate\validator\hibernate-validator\6.2.5.Final\hibernate-validator-6.2.5.Final.jar;D:\maven\local-maven\org\jboss\logging\jboss-logging\3.4.3.Final\jboss-logging-3.4.3.Final.jar;D:\maven\local-maven\com\fasterxml\classmate\1.5.1\classmate-1.5.1.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-zookeeper-discovery\3.1.4\spring-cloud-zookeeper-discovery-3.1.4.jar;D:\maven\local-maven\org\apache\curator\curator-x-discovery\5.1.0\curator-x-discovery-5.1.0.jar;D:\maven\local-maven\org\apache\curator\curator-recipes\5.1.0\curator-recipes-5.1.0.jar;D:\maven\local-maven\org\apache\curator\curator-framework\5.1.0\curator-framework-5.1.0.jar;D:\maven\local-maven\org\apache\curator\curator-client\5.1.0\curator-client-5.1.0.jar;D:\maven\local-maven\org\apache\zookeeper\zookeeper\3.6.0\zookeeper-3.6.0.jar;D:\maven\local-maven\org\apache\zookeeper\zookeeper-jute\3.6.0\zookeeper-jute-3.6.0.jar;D:\maven\local-maven\org\apache\yetus\audience-annotations\0.5.0\audience-annotations-0.5.0.jar;D:\maven\local-maven\io\netty\netty-transport-native-epoll\4.1.92.Final\netty-transport-native-epoll-4.1.92.Final.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-starter-loadbalancer\3.1.7\spring-cloud-starter-loadbalancer-3.1.7.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-loadbalancer\3.1.7\spring-cloud-loadbalancer-3.1.7.jar;D:\maven\local-maven\io\projectreactor\addons\reactor-extra\3.4.10\reactor-extra-3.4.10.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-cache\2.7.12\spring-boot-starter-cache-2.7.12.jar;D:\maven\local-maven\org\springframework\spring-context-support\5.3.27\spring-context-support-5.3.27.jar;D:\maven\local-maven\com\stoyanr\evictor\1.0.0\evictor-1.0.0.jar;D:\maven\local-maven\org\apache\dubbo\dubbo\3.0.9\dubbo-3.0.9.jar;D:\maven\local-maven\org\springframework\spring-context\5.3.27\spring-context-5.3.27.jar;D:\maven\local-maven\org\springframework\spring-aop\5.3.27\spring-aop-5.3.27.jar;D:\maven\local-maven\org\springframework\spring-beans\5.3.27\spring-beans-5.3.27.jar;D:\maven\local-maven\org\springframework\spring-expression\5.3.27\spring-expression-5.3.27.jar;D:\maven\local-maven\com\alibaba\spring\spring-context-support\1.0.8\spring-context-support-1.0.8.jar;D:\maven\local-maven\org\javassist\javassist\3.28.0-GA\javassist-3.28.0-GA.jar;D:\maven\local-maven\io\netty\netty-all\4.1.92.Final\netty-all-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-dns\4.1.92.Final\netty-codec-dns-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-haproxy\4.1.92.Final\netty-codec-haproxy-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-http2\4.1.92.Final\netty-codec-http2-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-memcache\4.1.92.Final\netty-codec-memcache-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-mqtt\4.1.92.Final\netty-codec-mqtt-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-redis\4.1.92.Final\netty-codec-redis-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-smtp\4.1.92.Final\netty-codec-smtp-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-socks\4.1.92.Final\netty-codec-socks-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-stomp\4.1.92.Final\netty-codec-stomp-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-xml\4.1.92.Final\netty-codec-xml-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport-native-unix-common\4.1.92.Final\netty-transport-native-unix-common-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-handler-proxy\4.1.92.Final\netty-handler-proxy-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-handler-ssl-ocsp\4.1.92.Final\netty-handler-ssl-ocsp-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-resolver\4.1.92.Final\netty-resolver-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-resolver-dns\4.1.92.Final\netty-resolver-dns-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport-rxtx\4.1.92.Final\netty-transport-rxtx-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport-sctp\4.1.92.Final\netty-transport-sctp-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport-udt\4.1.92.Final\netty-transport-udt-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport-classes-epoll\4.1.92.Final\netty-transport-classes-epoll-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport-classes-kqueue\4.1.92.Final\netty-transport-classes-kqueue-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-resolver-dns-classes-macos\4.1.92.Final\netty-resolver-dns-classes-macos-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport-native-epoll\4.1.92.Final\netty-transport-native-epoll-4.1.92.Final-linux-x86_64.jar;D:\maven\local-maven\io\netty\netty-transport-native-epoll\4.1.92.Final\netty-transport-native-epoll-4.1.92.Final-linux-aarch_64.jar;D:\maven\local-maven\io\netty\netty-transport-native-kqueue\4.1.92.Final\netty-transport-native-kqueue-4.1.92.Final-osx-x86_64.jar;D:\maven\local-maven\io\netty\netty-transport-native-kqueue\4.1.92.Final\netty-transport-native-kqueue-4.1.92.Final-osx-aarch_64.jar;D:\maven\local-maven\io\netty\netty-resolver-dns-native-macos\4.1.92.Final\netty-resolver-dns-native-macos-4.1.92.Final-osx-x86_64.jar;D:\maven\local-maven\io\netty\netty-resolver-dns-native-macos\4.1.92.Final\netty-resolver-dns-native-macos-4.1.92.Final-osx-aarch_64.jar;D:\maven\local-maven\org\yaml\snakeyaml\1.30\snakeyaml-1.30.jar;D:\maven\local-maven\org\apache\dubbo\dubbo-spring-boot-starter\3.0.9\dubbo-spring-boot-starter-3.0.9.jar;D:\maven\local-maven\org\apache\dubbo\dubbo-spring-boot-autoconfigure\3.0.9\dubbo-spring-boot-autoconfigure-3.0.9.jar;D:\maven\local-maven\org\apache\dubbo\dubbo-spring-boot-autoconfigure-compatible\3.0.9\dubbo-spring-boot-autoconfigure-compatible-3.0.9.jar;D:\maven\local-maven\com\alibaba\nacos\nacos-client\2.1.0\nacos-client-2.1.0.jar;D:\maven\local-maven\com\alibaba\nacos\nacos-auth-plugin\2.1.0\nacos-auth-plugin-2.1.0.jar;D:\maven\local-maven\com\alibaba\nacos\nacos-encryption-plugin\2.1.0\nacos-encryption-plugin-2.1.0.jar;D:\maven\local-maven\com\fasterxml\jackson\core\jackson-core\2.13.5\jackson-core-2.13.5.jar;D:\maven\local-maven\com\fasterxml\jackson\core\jackson-databind\2.13.5\jackson-databind-2.13.5.jar;D:\maven\local-maven\com\fasterxml\jackson\core\jackson-annotations\2.13.5\jackson-annotations-2.13.5.jar;D:\maven\local-maven\org\apache\httpcomponents\httpasyncclient\4.1.5\httpasyncclient-4.1.5.jar;D:\maven\local-maven\org\apache\httpcomponents\httpcore\4.4.16\httpcore-4.4.16.jar;D:\maven\local-maven\org\apache\httpcomponents\httpcore-nio\4.4.16\httpcore-nio-4.4.16.jar;D:\maven\local-maven\org\apache\httpcomponents\httpclient\4.5.14\httpclient-4.5.14.jar;D:\maven\local-maven\io\prometheus\simpleclient\0.15.0\simpleclient-0.15.0.jar;D:\maven\local-maven\io\prometheus\simpleclient_tracer_otel\0.15.0\simpleclient_tracer_otel-0.15.0.jar;D:\maven\local-maven\io\prometheus\simpleclient_tracer_common\0.15.0\simpleclient_tracer_common-0.15.0.jar;D:\maven\local-maven\io\prometheus\simpleclient_tracer_otel_agent\0.15.0\simpleclient_tracer_otel_agent-0.15.0.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-web\2.7.12\spring-boot-starter-web-2.7.12.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter\2.7.12\spring-boot-starter-2.7.12.jar;D:\maven\local-maven\org\springframework\boot\spring-boot\2.7.12\spring-boot-2.7.12.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-logging\2.7.12\spring-boot-starter-logging-2.7.12.jar;D:\maven\local-maven\ch\qos\logback\logback-classic\1.2.12\logback-classic-1.2.12.jar;D:\maven\local-maven\ch\qos\logback\logback-core\1.2.12\logback-core-1.2.12.jar;D:\maven\local-maven\org\apache\logging\log4j\log4j-to-slf4j\2.17.2\log4j-to-slf4j-2.17.2.jar;D:\maven\local-maven\org\apache\logging\log4j\log4j-api\2.17.2\log4j-api-2.17.2.jar;D:\maven\local-maven\org\slf4j\jul-to-slf4j\1.7.36\jul-to-slf4j-1.7.36.jar;D:\maven\local-maven\jakarta\annotation\jakarta.annotation-api\1.3.5\jakarta.annotation-api-1.3.5.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-json\2.7.12\spring-boot-starter-json-2.7.12.jar;D:\maven\local-maven\com\fasterxml\jackson\datatype\jackson-datatype-jdk8\2.13.5\jackson-datatype-jdk8-2.13.5.jar;D:\maven\local-maven\com\fasterxml\jackson\datatype\jackson-datatype-jsr310\2.13.5\jackson-datatype-jsr310-2.13.5.jar;D:\maven\local-maven\com\fasterxml\jackson\module\jackson-module-parameter-names\2.13.5\jackson-module-parameter-names-2.13.5.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-tomcat\2.7.12\spring-boot-starter-tomcat-2.7.12.jar;D:\maven\local-maven\org\apache\tomcat\embed\tomcat-embed-el\9.0.75\tomcat-embed-el-9.0.75.jar;D:\maven\local-maven\org\apache\tomcat\embed\tomcat-embed-websocket\9.0.75\tomcat-embed-websocket-9.0.75.jar;D:\maven\local-maven\org\springframework\spring-web\5.3.27\spring-web-5.3.27.jar;D:\maven\local-maven\org\springframework\spring-webmvc\5.3.27\spring-webmvc-5.3.27.jar;D:\maven\local-maven\net\bytebuddy\byte-buddy\1.12.23\byte-buddy-1.12.23.jar;D:\maven\local-maven\org\objenesis\objenesis\3.2\objenesis-3.2.jar;D:\maven\local-maven\org\springframework\spring-core\5.3.27\spring-core-5.3.27.jar;D:\maven\local-maven\org\springframework\spring-jcl\5.3.27\spring-jcl-5.3.27.jar;D:\maven\local-maven\org\apache\tomcat\embed\tomcat-embed-core\9.0.75\tomcat-embed-core-9.0.75.jar;D:\maven\local-maven\org\apache\tomcat\tomcat-annotations-api\9.0.75\tomcat-annotations-api-9.0.75.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-configuration-processor\2.7.12\spring-boot-configuration-processor-2.7.12.jar;D:\maven\local-maven\com\baomidou\mybatis-plus-boot-starter\3.3.1\mybatis-plus-boot-starter-3.3.1.jar;D:\maven\local-maven\com\baomidou\mybatis-plus\3.3.1\mybatis-plus-3.3.1.jar;D:\maven\local-maven\com\baomidou\mybatis-plus-extension\3.3.1\mybatis-plus-extension-3.3.1.jar;D:\maven\local-maven\com\baomidou\mybatis-plus-core\3.3.1\mybatis-plus-core-3.3.1.jar;D:\maven\local-maven\com\baomidou\mybatis-plus-annotation\3.3.1\mybatis-plus-annotation-3.3.1.jar;D:\maven\local-maven\com\github\jsqlparser\jsqlparser\3.1\jsqlparser-3.1.jar;D:\maven\local-maven\org\mybatis\mybatis-spring\2.0.3\mybatis-spring-2.0.3.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-autoconfigure\2.7.12\spring-boot-autoconfigure-2.7.12.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-jdbc\2.7.12\spring-boot-starter-jdbc-2.7.12.jar;D:\maven\local-maven\com\zaxxer\HikariCP\4.0.3\HikariCP-4.0.3.jar;D:\maven\local-maven\org\springframework\spring-jdbc\5.3.27\spring-jdbc-5.3.27.jar;D:\maven\local-maven\mysql\mysql-connector-java\8.0.22\mysql-connector-java-8.0.22.jar;D:\maven\local-maven\com\google\protobuf\protobuf-java\3.11.4\protobuf-java-3.11.4.jar;D:\maven\local-maven\com\alibaba\fastjson\2.0.28\fastjson-2.0.28.jar;D:\maven\local-maven\com\alibaba\fastjson2\fastjson2-extension\2.0.28\fastjson2-extension-2.0.28.jar;D:\maven\local-maven\com\alibaba\fastjson2\fastjson2\2.0.28\fastjson2-2.0.28.jar;D:\maven\local-maven\org\apache\commons\commons-lang3\3.9\commons-lang3-3.9.jar;D:\maven\local-maven\org\projectlombok\lombok\1.18.26\lombok-1.18.26.jar;D:\maven\local-maven\com\google\guava\guava\32.1.3-jre\guava-32.1.3-jre.jar;D:\maven\local-maven\com\google\guava\failureaccess\1.0.1\failureaccess-1.0.1.jar;D:\maven\local-maven\com\google\guava\listenablefuture\9999.0-empty-to-avoid-conflict-with-guava\listenablefuture-9999.0-empty-to-avoid-conflict-with-guava.jar;D:\maven\local-maven\com\google\code\findbugs\jsr305\3.0.2\jsr305-3.0.2.jar;D:\maven\local-maven\org\checkerframework\checker-qual\3.37.0\checker-qual-3.37.0.jar;D:\maven\local-maven\com\google\errorprone\error_prone_annotations\2.21.1\error_prone_annotations-2.21.1.jar;D:\maven\local-maven\com\google\j2objc\j2objc-annotations\2.8\j2objc-annotations-2.8.jar;D:\maven\local-maven\io\jsonwebtoken\jjwt\0.9.1\jjwt-0.9.1.jar;D:\maven\local-maven\com\auth0\java-jwt\4.4.0\java-jwt-4.4.0.jar;D:\maven\local-maven\commons-codec\commons-codec\1.15\commons-codec-1.15.jar;D:\maven\local-maven\com\squareup\retrofit2\converter-gson\2.9.0\converter-gson-2.9.0.jar;D:\maven\local-maven\com\squareup\retrofit2\retrofit\2.9.0\retrofit-2.9.0.jar;D:\maven\local-maven\com\squareup\okhttp3\okhttp\4.9.3\okhttp-4.9.3.jar;D:\maven\local-maven\com\squareup\okio\okio\2.8.0\okio-2.8.0.jar;D:\maven\local-maven\org\jetbrains\kotlin\kotlin-stdlib-common\1.6.21\kotlin-stdlib-common-1.6.21.jar;D:\maven\local-maven\org\jetbrains\kotlin\kotlin-stdlib\1.6.21\kotlin-stdlib-1.6.21.jar;D:\maven\local-maven\org\jetbrains\annotations\13.0\annotations-13.0.jar;E:\code\java\idea\big-market\big-market-trigger\target\classes;D:\maven\local-maven\com\netflix\hystrix\hystrix-javanica\1.5.18\hystrix-javanica-1.5.18.jar;D:\maven\local-maven\org\aspectj\aspectjrt\1.9.7\aspectjrt-1.9.7.jar;D:\maven\local-maven\org\ow2\asm\asm\5.0.4\asm-5.0.4.jar;D:\maven\local-maven\com\netflix\hystrix\hystrix-core\1.5.18\hystrix-core-1.5.18.jar;D:\maven\local-maven\com\netflix\archaius\archaius-core\0.4.1\archaius-core-0.4.1.jar;D:\maven\local-maven\commons-configuration\commons-configuration\1.8\commons-configuration-1.8.jar;D:\maven\local-maven\io\reactivex\rxjava\1.3.8\rxjava-1.3.8.jar;D:\maven\local-maven\org\hdrhistogram\HdrHistogram\2.1.9\HdrHistogram-2.1.9.jar;D:\maven\local-maven\org\aspectj\aspectjweaver\1.9.7\aspectjweaver-1.9.7.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-amqp\3.2.0\spring-boot-starter-amqp-3.2.0.jar;D:\maven\local-maven\org\springframework\spring-messaging\5.3.27\spring-messaging-5.3.27.jar;D:\maven\local-maven\org\springframework\amqp\spring-rabbit\2.4.12\spring-rabbit-2.4.12.jar;D:\maven\local-maven\org\springframework\amqp\spring-amqp\2.4.12\spring-amqp-2.4.12.jar;D:\maven\local-maven\org\springframework\retry\spring-retry\1.3.4\spring-retry-1.3.4.jar;D:\maven\local-maven\com\rabbitmq\amqp-client\5.14.2\amqp-client-5.14.2.jar;E:\code\java\idea\big-market\big-market-api\target\classes;D:\maven\local-maven\jakarta\validation\jakarta.validation-api\2.0.2\jakarta.validation-api-2.0.2.jar;D:\maven\local-maven\cn\bugstack\middleware\db-router-spring-boot-starter\1.0.2\db-router-spring-boot-starter-1.0.2.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-aop\2.7.12\spring-boot-starter-aop-2.7.12.jar;D:\maven\local-maven\org\mybatis\spring\boot\mybatis-spring-boot-starter\2.1.4\mybatis-spring-boot-starter-2.1.4.jar;D:\maven\local-maven\org\mybatis\spring\boot\mybatis-spring-boot-autoconfigure\2.1.4\mybatis-spring-boot-autoconfigure-2.1.4.jar;D:\maven\local-maven\org\mybatis\mybatis\3.5.6\mybatis-3.5.6.jar;D:\maven\local-maven\commons-beanutils\commons-beanutils\1.9.4\commons-beanutils-1.9.4.jar;D:\maven\local-maven\commons-logging\commons-logging\1.2\commons-logging-1.2.jar;D:\maven\local-maven\commons-collections\commons-collections\3.2.2\commons-collections-3.2.2.jar;D:\maven\local-maven\commons-lang\commons-lang\2.6\commons-lang-2.6.jar;D:\maven\local-maven\org\springframework\spring-tx\5.3.27\spring-tx-5.3.27.jar;E:\code\java\idea\big-market\big-market-types\target\classes;D:\maven\local-maven\com\thoughtworks\xstream\xstream\1.4.10\xstream-1.4.10.jar;D:\maven\local-maven\xmlpull\xmlpull\1.1.3.1\xmlpull-1.1.3.1.jar;D:\maven\local-maven\xpp3\xpp3_min\1.1.4c\xpp3_min-1.1.4c.jar;D:\maven\local-maven\dom4j\dom4j\1.6.1\dom4j-1.6.1.jar;D:\maven\local-maven\xml-apis\xml-apis\1.0.b2\xml-apis-1.0.b2.jar;E:\code\java\idea\big-market\big-market-domain\target\classes;D:\maven\local-maven\org\springframework\boot\spring-boot-actuator-autoconfigure\2.7.12\spring-boot-actuator-autoconfigure-2.7.12.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-actuator\2.7.12\spring-boot-actuator-2.7.12.jar;E:\code\java\idea\big-market\big-market-infrastructure\target\classes;D:\maven\local-maven\org\redisson\redisson-spring-boot-starter\3.23.4\redisson-spring-boot-starter-3.23.4.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-actuator\2.7.12\spring-boot-starter-actuator-2.7.12.jar;D:\maven\local-maven\io\micrometer\micrometer-core\1.9.11\micrometer-core-1.9.11.jar;D:\maven\local-maven\org\latencyutils\LatencyUtils\2.0.3\LatencyUtils-2.0.3.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-data-redis\2.7.12\spring-boot-starter-data-redis-2.7.12.jar;D:\maven\local-maven\org\springframework\data\spring-data-redis\2.7.12\spring-data-redis-2.7.12.jar;D:\maven\local-maven\org\springframework\data\spring-data-keyvalue\2.7.12\spring-data-keyvalue-2.7.12.jar;D:\maven\local-maven\org\springframework\data\spring-data-commons\2.7.12\spring-data-commons-2.7.12.jar;D:\maven\local-maven\org\springframework\spring-oxm\5.3.27\spring-oxm-5.3.27.jar;D:\maven\local-maven\org\redisson\redisson\3.23.4\redisson-3.23.4.jar;D:\maven\local-maven\javax\cache\cache-api\1.1.1\cache-api-1.1.1.jar;D:\maven\local-maven\io\projectreactor\reactor-core\3.4.29\reactor-core-3.4.29.jar;D:\maven\local-maven\org\reactivestreams\reactive-streams\1.0.4\reactive-streams-1.0.4.jar;D:\maven\local-maven\io\reactivex\rxjava3\rxjava\3.1.6\rxjava-3.1.6.jar;D:\maven\local-maven\org\jboss\marshalling\jboss-marshalling\2.0.11.Final\jboss-marshalling-2.0.11.Final.jar;D:\maven\local-maven\org\jboss\marshalling\jboss-marshalling-river\2.0.11.Final\jboss-marshalling-river-2.0.11.Final.jar;D:\maven\local-maven\com\esotericsoftware\kryo\5.5.0\kryo-5.5.0.jar;D:\maven\local-maven\com\esotericsoftware\reflectasm\1.11.9\reflectasm-1.11.9.jar;D:\maven\local-maven\com\esotericsoftware\minlog\1.3.1\minlog-1.3.1.jar;D:\maven\local-maven\com\fasterxml\jackson\dataformat\jackson-dataformat-yaml\2.13.5\jackson-dataformat-yaml-2.13.5.jar;D:\maven\local-maven\org\jodd\jodd-bean\5.1.6\jodd-bean-5.1.6.jar;D:\maven\local-maven\org\jodd\jodd-core\5.1.6\jodd-core-5.1.6.jar;D:\maven\local-maven\org\redisson\redisson-spring-data-31\3.23.4\redisson-spring-data-31-3.23.4.jar;D:\Program Files (x86)\IntelliJ IDEA 2023.1.7\lib\idea_rt.jar
24-11-27.11:41:06.133 [main            ] INFO  ZooKeeper              - Client environment:java.library.path=C:\Program Files\Java\jdk1.8.0_321\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;D:\Program Files (x86)\Ruby33-x64\bin;C:\Program Files (x86)\VMware\VMware Workstation\bin\;C:\Program Files (x86)\Common Files\Oracle\Java\java8path;C:\Program Files (x86)\Common Files\Oracle\Java\javapath;C:\Program Files\Java\jdk1.8.0_321\bin;E:\software\mysql\mysql8.0\mysql-8.0.39-winx64\bin;C:\Windows\system32;E:\software\mysql\mysql5.7\mysql-5.7.30-winx64\bin;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Windows\System32\OpenSSH\;C:\Program Files\dotnet\;D:\maven\apache-maven-3.9.9\bin;E:\software\Git\cmd;E:\software\redis-windows;E:\software\nvm\nvm;E:\software\nvm\nodejs;D:\gradle\gradle-8.10.2\bin;E:\software\giff\git-cliff-2.6.1\bin;D:\Program Files (x86)\Git LFS;C:\Program Files (x86)\Windows Kits\10\Windows Performance Toolkit\;C:\Program Files (x86)\Windows Kits\10\Microsoft Application Virtualization\Sequencer\;C:\Program Files\Docker\Docker\resources\bin;C:\Windows\system32;C:\Program Files (x86)\VMware\VMware Workstation\bin\;C:\Program Files (x86)\Common Files\Oracle\Java\java8path;C:\Program Files (x86)\Common Files\Oracle\Java\javapath;C:\Program Files\Java\jdk1.8.0_321\bin;E:\software\mysql\mysql8.0\mysql-8.0.39-winx64\bin;E:\software\mysql\mysql5.7\mysql-5.7.30-winx64\bin;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Windows\System32\OpenSSH\;C:\Program Files\dotnet\;D:\maven\apache-maven-3.9.9\bin;E:\software\Git\cmd;E:\software\redis-windows;E:\software\nvm\nvm;E:\software\nvm\nodejs;D:\gradle\gradle-8.10.2\bin;E:\software\giff\git-cliff-2.6.1\bin;C:\Program Files (x86)\VMware\VMware Workstation\bin\;C:\Program Files (x86)\Common Files\Oracle\Java\java8path;C:\Program Files (x86)\Common Files\Oracle\Java\javapath;C:\Program Files\Java\jdk1.8.0_321\bin;E:\software\mysql\mysql8.0\mysql-8.0.39-winx64\bin;C:\Windows\system32;E:\software\mysql\mysql5.7\mysql-5.7.30-winx64\bin;C:\Windows;C:\Windows\System32\Wbem;C:\Windo;E:\software\Fiddler;;.
24-11-27.11:41:06.133 [main            ] INFO  ZooKeeper              - Client environment:java.io.tmpdir=C:\Users\14783\AppData\Local\Temp\
24-11-27.11:41:06.133 [main            ] INFO  ZooKeeper              - Client environment:java.compiler=<NA>
24-11-27.11:41:06.133 [main            ] INFO  ZooKeeper              - Client environment:os.name=Windows 11
24-11-27.11:41:06.133 [main            ] INFO  ZooKeeper              - Client environment:os.arch=amd64
24-11-27.11:41:06.133 [main            ] INFO  ZooKeeper              - Client environment:os.version=10.0
24-11-27.11:41:06.133 [main            ] INFO  ZooKeeper              - Client environment:user.name=14783
24-11-27.11:41:06.133 [main            ] INFO  ZooKeeper              - Client environment:user.home=C:\Users\14783
24-11-27.11:41:06.133 [main            ] INFO  ZooKeeper              - Client environment:user.dir=E:\code\java\idea\big-market
24-11-27.11:41:06.133 [main            ] INFO  ZooKeeper              - Client environment:os.memory.free=367MB
24-11-27.11:41:06.133 [main            ] INFO  ZooKeeper              - Client environment:os.memory.max=3609MB
24-11-27.11:41:06.133 [main            ] INFO  ZooKeeper              - Client environment:os.memory.total=464MB
24-11-27.11:41:06.135 [main            ] INFO  ZooKeeper              - Initiating client connection, connectString=117.72.36.124:2181 sessionTimeout=30000 watcher=org.apache.curator.ConnectionState@5b1e88f
24-11-27.11:41:06.138 [main            ] INFO  X509Util               - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
24-11-27.11:41:06.147 [main            ] INFO  ClientCnxnSocket       - jute.maxbuffer value is 1048575 Bytes
24-11-27.11:41:06.152 [main            ] INFO  ClientCnxn             - zookeeper.request.timeout value is 0. feature enabled=false
24-11-27.11:41:06.159 [main            ] INFO  CuratorFrameworkImpl   - Default schema
24-11-27.11:41:06.164 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'zookeeperClient' of type [org.apache.curator.framework.imps.CuratorFrameworkImpl] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-11-27.11:41:17.890 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Opening socket connection to server 117.72.36.124/117.72.36.124:2181.
24-11-27.11:41:17.890 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - SASL config status: Will not attempt to authenticate using SASL (unknown error)
24-11-27.11:41:17.920 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Socket connection established, initiating session, client: /10.224.3.20:63429, server: 117.72.36.124/117.72.36.124:2181
24-11-27.11:41:17.963 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Session establishment complete on server 117.72.36.124/117.72.36.124:2181, session id = 0x100003791620007, negotiated timeout = 30000
24-11-27.11:41:17.970 [main-EventThread] INFO  ConnectionStateManager - State change: CONNECTED
24-11-27.11:41:18.008 [main-EventThread] INFO  EnsembleTracker        - New config event received: {}
24-11-27.11:41:18.008 [main-EventThread] INFO  EnsembleTracker        - New config event received: {}
24-11-27.11:41:18.603 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-11-27.11:41:18.611 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-11-27.11:41:18.612 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-11-27.11:41:18.612 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-11-27.11:41:18.822 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-11-27.11:41:18.822 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 16302 ms
24-11-27.11:41:19.370 [main            ] INFO  DubboConfigBeanInitializer - loading dubbo config beans ...
24-11-27.11:41:19.373 [main            ] INFO  DubboConfigBeanInitializer - dubbo config beans are loaded.
24-11-27.11:41:19.411 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] No value is configured in the registry, the DynamicConfigurationFactory extension[name : nacos] supports as the config center, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:19.412 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] The registry[<dubbo:registry id="nacos-registry" address="nacos://117.72.36.124:8848" protocol="nacos" port="8848" />] will be used as the config center, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:19.416 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] use registry as config-center: <dubbo:config-center highestPriority="false" id="config-center-nacos-117.72.36.124-8848" address="nacos://117.72.36.124:8848" protocol="nacos" port="8848" />, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:19.471 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
24-11-27.11:41:19.471 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
24-11-27.11:41:21.609 [main            ] WARN  ConfigurationUtils     -  [DUBBO] Config center was specified, but no config item found., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:21.609 [main            ] WARN  ConfigurationUtils     -  [DUBBO] Config center was specified, but no config item found., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:21.640 [main            ] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.0] has been initialized!, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:21.644 [main            ] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.1] has been initialized!, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:21.649 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] No value is configured in the registry, the MetadataReportFactory extension[name : nacos] supports as the metadata center, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:21.649 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] The registry[<dubbo:registry id="nacos-registry" address="nacos://117.72.36.124:8848" protocol="nacos" port="8848" />] will be used as the metadata center, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:21.651 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] use registry as metadata-center: <dubbo:metadata-report id="nacos-registry" address="nacos://117.72.36.124:8848" protocol="nacos" port="8848" />, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:21.738 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
24-11-27.11:41:21.738 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
24-11-27.11:41:21.738 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] Dubbo Application[1.1](big-market) has been initialized!, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:21.824 [main            ] INFO  DCCValueBeanFactory    - DCC 节点监听 设置配置 /big-market-dcc/config/rateLimiterSwitch rateLimiterSwitch 172.18.144.1
24-11-27.11:41:22.133 [main            ] INFO  Version                - Redisson 3.23.4
24-11-27.11:41:22.656 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.36.124/117.72.36.124:6379
24-11-27.11:41:23.205 [redisson-netty-2-23] INFO  MasterConnectionPool   - 10 connections initialized for 117.72.36.124/117.72.36.124:6379
24-11-27.11:41:25.044 [main            ] INFO  DCCValueBeanFactory    - DCC 节点监听 设置配置 /big-market-dcc/config/degradeSwitch degradeSwitch 172.18.144.1
24-11-27.11:41:25.084 [main            ] INFO  XxlJobAutoConfig       - >>>>>>>>>>> xxl-job config init.
24-11-27.11:41:27.729 [main            ] WARN  LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
24-11-27.11:41:27.736 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-27.11:41:27.850 [main            ] INFO  XxlJobExecutor         - >>>>>>>>>>> xxl-job register jobhandler success, name:SendMessageTaskJob_DB1, jobHandler:com.xxl.job.core.handler.impl.MethodJobHandler@5a079446[class cn.wenzhuo4657.BigMarket.trigger.job.SendMessageTaskJob#exec_db01]
24-11-27.11:41:27.850 [main            ] INFO  XxlJobExecutor         - >>>>>>>>>>> xxl-job register jobhandler success, name:UpdateActivitySkuStockJob, jobHandler:com.xxl.job.core.handler.impl.MethodJobHandler@694c0ed1[class cn.wenzhuo4657.BigMarket.trigger.job.UpdateActivitySkuStockJob#exec]
24-11-27.11:41:27.850 [main            ] INFO  XxlJobExecutor         - >>>>>>>>>>> xxl-job register jobhandler success, name:updateAwardStockJob, jobHandler:com.xxl.job.core.handler.impl.MethodJobHandler@118f2486[class cn.wenzhuo4657.BigMarket.trigger.job.UpdateAwardStockJob#exec]
24-11-27.11:41:27.914 [Thread-75       ] INFO  EmbedServer            - >>>>>>>>>>> xxl-job remoting server start success, nettype = class com.xxl.job.core.server.EmbedServer, port = 9999
24-11-27.11:41:27.968 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-11-27.11:41:27.982 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-11-27.11:41:28.595 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [117.72.36.124:5672]
24-11-27.11:41:28.739 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#4e933cf1:0/SimpleConnection@3e984100 [delegate=amqp://admin@117.72.36.124:5672/, localPort= 63746]
24-11-27.11:41:29.464 [main            ] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.1] is starting., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:29.464 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] Dubbo Application[1.1](big-market) is starting., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:29.602 [main            ] WARN  ServiceConfig          -  [DUBBO] Use random available port(20880) for protocol dubbo, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:29.654 [main            ] INFO  ServiceConfig          -  [DUBBO] Export dubbo service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService to local registry url : injvm://127.0.0.1/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=2508&qos.enable=false&release=3.0.9&revision=1.0&side=provider&timestamp=1732678889598&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:29.654 [main            ] INFO  ServiceConfig          -  [DUBBO] Register dubbo service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService url dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=2508&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732678889598&version=1.0 to registry 117.72.36.124:8848, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:29.656 [main            ] INFO  QosProtocolWrapper     -  [DUBBO] qos won't be started because it is disabled. Please check dubbo.application.qos.enable is configured either in system property, dubbo.properties or XML/spring-boot configuration., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:29.790 [main            ] INFO  AbstractServer         -  [DUBBO] Start NettyServer bind /0.0.0.0:20880, export /172.18.144.1:20880, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:29.828 [main            ] INFO  MetaCacheManager       -  [DUBBO] Successfully loaded mapping cache from file .metadata.nacos117.72.36.124:8848, entries 0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:29.854 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
24-11-27.11:41:29.854 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
24-11-27.11:41:30.081 [main            ] INFO  MappingCacheManager    -  [DUBBO] Successfully loaded mapping cache from file .mapping, entries 0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:30.092 [main            ] INFO  MigrationRuleListener  -  [DUBBO] Listening for migration rules on dataId big-market.migration, group DUBBO_SERVICEDISCOVERY_MIGRATION, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:30.127 [main            ] INFO  ServiceConfig          -  [DUBBO] Register dubbo service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService url dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=2508&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732678889598&version=1.0 to registry 117.72.36.124:8848, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:30.127 [main            ] INFO  QosProtocolWrapper     -  [DUBBO] qos won't be started because it is disabled. Please check dubbo.application.qos.enable is configured either in system property, dubbo.properties or XML/spring-boot configuration., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:30.168 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
24-11-27.11:41:30.168 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
24-11-27.11:41:30.367 [main            ] INFO  NacosRegistry          -  [DUBBO] Register: dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=2508&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732678889598&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:30.408 [main            ] INFO  NacosRegistry          -  [DUBBO] Subscribe: provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=2508&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732678889598&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:30.484 [main            ] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=2508&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732678889598&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:30.491 [DubboSaveMetadataReport-thread-1] INFO  NacosMetadataReport    -  [DUBBO] store provider metadata. Identifier : org.apache.dubbo.metadata.report.identifier.MetadataIdentifier@112bcdf4; definition: FullServiceDefinition{parameters=org.apache.dubbo.common.url.component.URLParam$URLParamMap@163e8892} ServiceDefinition [canonicalName=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService, codeSource=file:/E:/code/java/idea/big-market/big-market-api/target/classes/, methods=[MethodDefinition [name=draw, parameterTypes=[cn.wenzhuo4657.BigMarket.tigger.api.dto.ActivityDrawRequestDTO], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=armory, parameterTypes=[java.lang.Long], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=queryUserCreditAccount, parameterTypes=[java.lang.String], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=isCalendarSignRebate, parameterTypes=[java.lang.String], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=queryUserActivityAccount, parameterTypes=[cn.wenzhuo4657.BigMarket.tigger.api.dto.UserActivityAccountRequestDTO], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=calendarSignRebate, parameterTypes=[java.lang.String], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=querySkuProductListByActivityId, parameterTypes=[java.lang.Long], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=creditPayExchangeSku, parameterTypes=[cn.wenzhuo4657.BigMarket.tigger.api.dto.SkuProductShopCartRequestDTO], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response]]], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:30.717 [main            ] INFO  ServiceConfig          -  [DUBBO] Successfully registered interface application mapping for service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService:1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:30.736 [main            ] INFO  ServiceConfig          -  [DUBBO] Export dubbo service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService to local registry url : injvm://127.0.0.1/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,strategyArmory,queryRaffleAwardList,queryRaffleStrategyRuleWeight&pid=2508&qos.enable=false&release=3.0.9&revision=1.0&side=provider&timestamp=1732678890720&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:30.737 [main            ] INFO  ServiceConfig          -  [DUBBO] Register dubbo service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService url dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,strategyArmory,queryRaffleAwardList,queryRaffleStrategyRuleWeight&pid=2508&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732678890720&version=1.0 to registry 117.72.36.124:8848, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:30.773 [main            ] INFO  ServiceConfig          -  [DUBBO] Register dubbo service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService url dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,strategyArmory,queryRaffleAwardList,queryRaffleStrategyRuleWeight&pid=2508&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732678890720&version=1.0 to registry 117.72.36.124:8848, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:30.970 [main            ] INFO  NacosRegistry          -  [DUBBO] Register: dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,strategyArmory,queryRaffleAwardList,queryRaffleStrategyRuleWeight&pid=2508&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732678890720&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:30.999 [main            ] INFO  NacosRegistry          -  [DUBBO] Subscribe: provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,strategyArmory,queryRaffleAwardList,queryRaffleStrategyRuleWeight&pid=2508&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732678890720&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:31.063 [main            ] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,strategyArmory,queryRaffleAwardList,queryRaffleStrategyRuleWeight&pid=2508&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732678890720&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:31.064 [DubboSaveMetadataReport-thread-1] INFO  NacosMetadataReport    -  [DUBBO] store provider metadata. Identifier : org.apache.dubbo.metadata.report.identifier.MetadataIdentifier@10a937a3; definition: FullServiceDefinition{parameters=org.apache.dubbo.common.url.component.URLParam$URLParamMap@ee62eb71} ServiceDefinition [canonicalName=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService, codeSource=file:/E:/code/java/idea/big-market/big-market-api/target/classes/, methods=[MethodDefinition [name=strategyArmory, parameterTypes=[java.lang.Long], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=randomRaffle, parameterTypes=[cn.wenzhuo4657.BigMarket.tigger.api.dto.RaffleStrategyRequestDTO], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=queryRaffleAwardList, parameterTypes=[cn.wenzhuo4657.BigMarket.tigger.api.dto.RaffleAwardListRequestDTO], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=queryRaffleStrategyRuleWeight, parameterTypes=[cn.wenzhuo4657.BigMarket.tigger.api.dto.RaffleStrategyRuleWeightRequestDTO], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response]]], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:31.094 [main            ] INFO  ServiceConfig          -  [DUBBO] Successfully registered interface application mapping for service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService:1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:31.094 [main            ] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.0] is starting., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:31.095 [main            ] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.0] has started., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:31.095 [main            ] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.1] has started., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:31.096 [main            ] INFO  ConfigurableMetadataServiceExporter -  [DUBBO] Metadata Service Port hasn't been set will use default protocol defined in protocols., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:31.096 [main            ] INFO  ConfigurableMetadataServiceExporter -  [DUBBO] Using dubbo protocol to export metadata service on port 20880, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:31.147 [main            ] INFO  ServiceConfig          -  [DUBBO] Export dubbo service org.apache.dubbo.metadata.MetadataService to local registry url : injvm://127.0.0.1/org.apache.dubbo.metadata.MetadataService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&connections=1&corethreads=2&delay=0&deprecated=false&dubbo=2.0.2&dynamic=true&executes=100&generic=false&getAndListenInstanceMetadata.1.callback=true&getAndListenInstanceMetadata.return=true&getAndListenInstanceMetadata.sent=true&group=big-market&interface=org.apache.dubbo.metadata.MetadataService&methods=getMetadataURL,isMetadataService,getExportedURLs,getAndListenInstanceMetadata,serviceName,version,getSubscribedURLs,getExportedServiceURLs,exportInstanceMetadata,getMetadataInfo,toSortedStrings,getMetadataInfos,getServiceDefinition,getInstanceMetadataChangedListenerMap&pid=2508&qos.enable=false&register=false&release=3.0.9&revision=3.0.9&side=provider&threadpool=cached&threads=100&timestamp=1732678891135&version=1.0.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:31.147 [main            ] INFO  ServiceConfig          -  [DUBBO] Export dubbo service org.apache.dubbo.metadata.MetadataService to url dubbo://172.18.144.1:20880/org.apache.dubbo.metadata.MetadataService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&connections=1&corethreads=2&delay=0&deprecated=false&dubbo=2.0.2&dynamic=true&executes=100&generic=false&getAndListenInstanceMetadata.1.callback=true&getAndListenInstanceMetadata.return=true&getAndListenInstanceMetadata.sent=true&group=big-market&interface=org.apache.dubbo.metadata.MetadataService&methods=getMetadataURL,isMetadataService,getExportedURLs,getAndListenInstanceMetadata,serviceName,version,getSubscribedURLs,getExportedServiceURLs,exportInstanceMetadata,getMetadataInfo,toSortedStrings,getMetadataInfos,getServiceDefinition,getInstanceMetadataChangedListenerMap&pid=2508&qos.enable=false&register=false&release=3.0.9&revision=3.0.9&service-name-mapping=true&side=provider&threadpool=cached&threads=100&timestamp=1732678891135&version=1.0.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:31.217 [main            ] INFO  MigrationRuleListener  -  [DUBBO] Listening for migration rules on dataId big-market.migration, group DUBBO_SERVICEDISCOVERY_MIGRATION, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:31.253 [main            ] INFO  ServiceConfig          -  [DUBBO] Export dubbo service org.apache.dubbo.metadata.MetadataService to url dubbo://172.18.144.1:20880/org.apache.dubbo.metadata.MetadataService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&connections=1&corethreads=2&delay=0&deprecated=false&dubbo=2.0.2&dynamic=true&executes=100&generic=false&getAndListenInstanceMetadata.1.callback=true&getAndListenInstanceMetadata.return=true&getAndListenInstanceMetadata.sent=true&group=big-market&interface=org.apache.dubbo.metadata.MetadataService&methods=getMetadataURL,isMetadataService,getExportedURLs,getAndListenInstanceMetadata,serviceName,version,getSubscribedURLs,getExportedServiceURLs,exportInstanceMetadata,getMetadataInfo,toSortedStrings,getMetadataInfos,getServiceDefinition,getInstanceMetadataChangedListenerMap&pid=2508&qos.enable=false&register=false&release=3.0.9&revision=3.0.9&service-name-mapping=true&side=provider&threadpool=cached&threads=100&timestamp=1732678891135&version=1.0.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:31.416 [main            ] INFO  NacosRegistry          -  [DUBBO] Subscribe: provider://172.18.144.1:20880/org.apache.dubbo.metadata.MetadataService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&connections=1&corethreads=2&delay=0&deprecated=false&dubbo=2.0.2&dynamic=true&executes=100&generic=false&getAndListenInstanceMetadata.1.callback=true&getAndListenInstanceMetadata.return=true&getAndListenInstanceMetadata.sent=true&group=big-market&interface=org.apache.dubbo.metadata.MetadataService&methods=getMetadataURL,isMetadataService,getExportedURLs,getAndListenInstanceMetadata,serviceName,version,getSubscribedURLs,getExportedServiceURLs,exportInstanceMetadata,getMetadataInfo,toSortedStrings,getMetadataInfos,getServiceDefinition,getInstanceMetadataChangedListenerMap&pid=2508&qos.enable=false&register=false&release=3.0.9&revision=3.0.9&service-name-mapping=true&side=provider&threadpool=cached&threads=100&timestamp=1732678891135&version=1.0.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:31.448 [main            ] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/org.apache.dubbo.metadata.MetadataService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&connections=1&corethreads=2&delay=0&deprecated=false&dubbo=2.0.2&dynamic=true&executes=100&generic=false&getAndListenInstanceMetadata.1.callback=true&getAndListenInstanceMetadata.return=true&getAndListenInstanceMetadata.sent=true&group=big-market&interface=org.apache.dubbo.metadata.MetadataService&methods=getMetadataURL,isMetadataService,getExportedURLs,getAndListenInstanceMetadata,serviceName,version,getSubscribedURLs,getExportedServiceURLs,exportInstanceMetadata,getMetadataInfo,toSortedStrings,getMetadataInfos,getServiceDefinition,getInstanceMetadataChangedListenerMap&pid=2508&qos.enable=false&register=false&release=3.0.9&revision=3.0.9&service-name-mapping=true&side=provider&threadpool=cached&threads=100&timestamp=1732678891135&version=1.0.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:31.448 [main            ] INFO  ServiceConfig          -  [DUBBO] Successfully registered interface application mapping for service big-market/org.apache.dubbo.metadata.MetadataService:1.0.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:31.448 [main            ] INFO  ConfigurableMetadataServiceExporter -  [DUBBO] The MetadataService exports urls : [dubbo://172.18.144.1:20880/org.apache.dubbo.metadata.MetadataService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&connections=1&corethreads=2&delay=0&deprecated=false&dubbo=2.0.2&dynamic=true&executes=100&generic=false&getAndListenInstanceMetadata.1.callback=true&getAndListenInstanceMetadata.return=true&getAndListenInstanceMetadata.sent=true&group=big-market&interface=org.apache.dubbo.metadata.MetadataService&methods=getMetadataURL,isMetadataService,getExportedURLs,getAndListenInstanceMetadata,serviceName,version,getSubscribedURLs,getExportedServiceURLs,exportInstanceMetadata,getMetadataInfo,toSortedStrings,getMetadataInfos,getServiceDefinition,getInstanceMetadataChangedListenerMap&pid=2508&qos.enable=false&register=false&release=3.0.9&revision=3.0.9&service-name-mapping=true&side=provider&threadpool=cached&threads=100&timestamp=1732678891135&version=1.0.0], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:31.449 [main            ] INFO  ServiceInstanceMetadataUtils -  [DUBBO] Start registering instance address to registry., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:31.461 [main            ] INFO  MetadataInfo           -  [DUBBO] metadata revision changed: null -> f9c9a00a340399ea8dcafba160d78887, app: big-market, services: 2, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:31.497 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] Dubbo Application[1.1](big-market) is ready., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:41:31.502 [main            ] INFO  Application            - Started Application in 30.286 seconds (JVM running for 36.502)
24-11-27.11:41:32.117 [RMI TCP Connection(3)-172.18.144.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-11-27.11:41:32.117 [RMI TCP Connection(3)-172.18.144.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-11-27.11:41:32.118 [RMI TCP Connection(3)-172.18.144.1] INFO  DispatcherServlet      - Completed initialization in 1 ms
24-11-27.11:41:32.631 [RMI TCP Connection(5)-172.18.144.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-27.11:41:33.219 [RMI TCP Connection(5)-172.18.144.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-27.11:41:33.262 [RMI TCP Connection(5)-172.18.144.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-27.11:41:33.614 [RMI TCP Connection(5)-172.18.144.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-27.11:41:40.444 [http-nio-8091-exec-6] INFO  RaffleActivityController - 查询用户活动账户开始 userId:null activityId:0
24-11-27.11:41:40.444 [http-nio-8091-exec-1] INFO  RaffleActivityController - 查询用户积分值开始 userId:null
24-11-27.11:41:40.444 [http-nio-8091-exec-2] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:null
24-11-27.11:41:40.560 [http-nio-8091-exec-2] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:null orders.size:0
24-11-27.11:41:40.567 [http-nio-8091-exec-6] INFO  RaffleActivityController - 查询用户活动账户完成 userId:null activityId:0 dto:{"dayCount":0,"dayCountSurplus":0,"monthCount":0,"monthCountSurplus":0,"totalCount":0,"totalCountSurplus":0}
24-11-27.11:41:40.573 [http-nio-8091-exec-1] ERROR RaffleActivityController - 查询用户积分值失败 userId:null
java.lang.NullPointerException: null
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.queryUserCreditAccount(CreditRepository.java:119)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$b71add64.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$a5114436.queryUserCreditAccount(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.credit.service.adjust.CreditAdjustService.queryUserCreditAccount(CreditAdjustService.java:69)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.queryUserCreditAccount(RaffleActivityController.java:335)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$194abf39.queryUserCreditAccount(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
24-11-27.11:42:04.283 [http-nio-8091-exec-4] INFO  RaffleActivityController - 查询用户积分值开始 userId:null
24-11-27.11:42:04.283 [http-nio-8091-exec-7] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:null
24-11-27.11:42:04.283 [http-nio-8091-exec-5] INFO  RaffleActivityController - 查询用户活动账户开始 userId:null activityId:0
24-11-27.11:42:04.340 [http-nio-8091-exec-7] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:null orders.size:0
24-11-27.11:42:04.341 [http-nio-8091-exec-5] INFO  RaffleActivityController - 查询用户活动账户完成 userId:null activityId:0 dto:{"dayCount":0,"dayCountSurplus":0,"monthCount":0,"monthCountSurplus":0,"totalCount":0,"totalCountSurplus":0}
24-11-27.11:42:04.341 [http-nio-8091-exec-4] ERROR RaffleActivityController - 查询用户积分值失败 userId:null
java.lang.NullPointerException: null
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.queryUserCreditAccount(CreditRepository.java:119)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$b71add64.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$a5114436.queryUserCreditAccount(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.credit.service.adjust.CreditAdjustService.queryUserCreditAccount(CreditAdjustService.java:69)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.queryUserCreditAccount(RaffleActivityController.java:335)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$194abf39.queryUserCreditAccount(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
24-11-27.11:42:26.632 [http-nio-8091-exec-12] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.11:42:26.632 [http-nio-8091-exec-13] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.11:42:26.632 [http-nio-8091-exec-14] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.11:42:26.632 [http-nio-8091-exec-15] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.11:42:26.637 [http-nio-8091-exec-12] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-27.11:42:26.652 [http-nio-8091-exec-17] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:42:26.652 [http-nio-8091-exec-16] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:42:26.724 [http-nio-8091-exec-17] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:42:26.729 [http-nio-8091-exec-18] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:42:26.763 [http-nio-8091-exec-18] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:0
24-11-27.11:42:26.767 [http-nio-8091-exec-19] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:42:26.786 [http-nio-8091-exec-16] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":660,"monthCount":660,"monthCountSurplus":596,"totalCount":660,"totalCountSurplus":558}
24-11-27.11:42:26.789 [http-nio-8091-exec-20] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:42:26.819 [http-nio-8091-exec-20] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:42:26.821 [http-nio-8091-exec-27] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:42:26.852 [http-nio-8091-exec-27] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:0
24-11-27.11:42:26.857 [http-nio-8091-exec-22] INFO  RaffleActivityController - 查询sku商品集合开始 activityId:100301
24-11-27.11:42:26.857 [http-nio-8091-exec-19] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":660,"monthCount":660,"monthCountSurplus":596,"totalCount":660,"totalCountSurplus":558}
24-11-27.11:42:26.864 [http-nio-8091-exec-24] INFO  RaffleActivityController - 查询sku商品集合开始 activityId:100301
24-11-27.11:42:27.003 [http-nio-8091-exec-12] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-27.11:42:27.222 [http-nio-8091-exec-22] INFO  RaffleActivityController - 查询sku商品集合完成 activityId:100301 skuProductResponseDTOS:[{"activityCount":{"dayCount":100,"monthCount":100,"totalCount":100},"activityCountId":11101,"productAmount":1.68,"sku":9011,"stockCount":100000,"stockCountSurplus":99886}]
24-11-27.11:42:27.230 [http-nio-8091-exec-26] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.11:42:27.319 [http-nio-8091-exec-12] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.11:42:27.322 [http-nio-8091-exec-21] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.11:42:27.336 [http-nio-8091-exec-13] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.11:42:27.344 [http-nio-8091-exec-24] INFO  RaffleActivityController - 查询sku商品集合完成 activityId:100301 skuProductResponseDTOS:[{"activityCount":{"dayCount":100,"monthCount":100,"totalCount":100},"activityCountId":11101,"productAmount":1.68,"sku":9011,"stockCount":100000,"stockCountSurplus":99886}]
24-11-27.11:42:27.368 [http-nio-8091-exec-14] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.11:42:27.399 [http-nio-8091-exec-15] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.11:42:27.656 [http-nio-8091-exec-21] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":102},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":102},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":102}],"info":"调用成功"}
24-11-27.11:42:27.656 [http-nio-8091-exec-26] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":102},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":102},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":102}],"info":"调用成功"}
24-11-27.11:42:38.068 [http-nio-8091-exec-35] INFO  RateLimiterAOP         - aop attr xiaofuge
24-11-27.11:42:38.071 [http-nio-8091-exec-35] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
24-11-27.11:42:38.285 [http-nio-8091-exec-35] INFO  AbstractRaffleActivityPartake - 创建参与活动订单 userId:xiaofuge activityId:100301 userRaffleOrderEntity:null
24-11-27.11:42:38.861 [http-nio-8091-exec-35] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:276511969315
24-11-27.11:42:38.999 [http-nio-8091-exec-35] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId:xiaofuge strategyId:100006 ruleModel:rule_blacklist
24-11-27.11:42:39.026 [http-nio-8091-exec-35] INFO  BackListLogicChain     - 抽奖责任链-黑名单放行 userId:xiaofuge strategyId:100006 ruleModel:rule_blacklist
24-11-27.11:42:39.058 [http-nio-8091-exec-35] ERROR RaffleActivityController - 活动抽奖失败 userId:xiaofuge activityId:100301
java.lang.NullPointerException: null
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.StrategyRepository.getRateRange(StrategyRepository.java:98)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.StrategyRepository$$FastClassBySpringCGLIB$$43dd791e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.StrategyRepository$$EnhancerBySpringCGLIB$$bf533ba4.getRateRange(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.strategy.service.armory.StrategyArmoryDispatch.getRandomAwardId(StrategyArmoryDispatch.java:122)
	at cn.wenzhuo4657.BigMarket.domain.strategy.service.rule.chain.impl.DefaultLogicChain.logic(DefaultLogicChain.java:40)
	at cn.wenzhuo4657.BigMarket.domain.strategy.service.rule.chain.impl.BackListLogicChain.logic(BackListLogicChain.java:56)
	at cn.wenzhuo4657.BigMarket.domain.strategy.service.raffle.DefaultRaffleStrategy.raffleLogicChain(DefaultRaffleStrategy.java:46)
	at cn.wenzhuo4657.BigMarket.domain.strategy.service.AbstractRaffleStrategy.performRaffle(AbstractRaffleStrategy.java:45)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:127)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at cn.wenzhuo4657.BigMarket.aop.RateLimiterAOP.doRouter(RateLimiterAOP.java:97)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:634)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:624)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$194abf39.draw(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
24-11-27.11:42:41.368 [http-nio-8091-exec-36] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:42:41.369 [http-nio-8091-exec-37] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:42:41.370 [http-nio-8091-exec-46] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.11:42:41.370 [http-nio-8091-exec-25] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:42:41.426 [http-nio-8091-exec-37] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:42:41.427 [http-nio-8091-exec-25] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:0
24-11-27.11:42:41.484 [http-nio-8091-exec-36] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":595,"monthCount":660,"monthCountSurplus":595,"totalCount":660,"totalCountSurplus":557}
24-11-27.11:42:41.511 [http-nio-8091-exec-46] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":103},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":103},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":103}],"info":"调用成功"}
24-11-27.11:42:49.600 [http-nio-8091-exec-41] INFO  RaffleActivityController - 活动装配，数据预热，开始 activityId:100301
24-11-27.11:42:50.657 [http-nio-8091-exec-41] INFO  RaffleActivityController - 活动装配，数据预热，完成 activityId:100301
24-11-27.11:42:56.025 [http-nio-8091-exec-42] INFO  RateLimiterAOP         - aop attr xiaofuge
24-11-27.11:42:56.025 [http-nio-8091-exec-42] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
24-11-27.11:42:56.110 [http-nio-8091-exec-42] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:276511969315
24-11-27.11:42:56.111 [http-nio-8091-exec-42] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId:xiaofuge strategyId:100006 ruleModel:rule_blacklist
24-11-27.11:42:56.166 [http-nio-8091-exec-42] INFO  BackListLogicChain     - 抽奖责任链-黑名单放行 userId:xiaofuge strategyId:100006 ruleModel:rule_blacklist
24-11-27.11:42:56.223 [http-nio-8091-exec-42] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: rule_default awardId: 107
24-11-27.11:42:56.225 [http-nio-8091-exec-42] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 xiaofuge 100006 107 rule_default
24-11-27.11:42:56.636 [http-nio-8091-exec-42] INFO  EventPublisher         - 发送MQ消息 topic:send_award message:{"data":{"awardId":107,"awardTitle":"小霸王游戏机","orderId":"276511969315","userId":"xiaofuge"},"id":"22838487642","timestamp":1732678976311}
24-11-27.11:42:56.680 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":107,"awardTitle":"小霸王游戏机","orderId":"276511969315","userId":"xiaofuge"},"id":"22838487642","timestamp":1732678976311}
24-11-27.11:42:56.728 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-1] ERROR AwardService           - 分发奖品，对应的服务不存在。awardKey:openai_model
24-11-27.11:42:57.257 [http-nio-8091-exec-44] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:42:57.257 [http-nio-8091-exec-45] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:42:57.257 [http-nio-8091-exec-43] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:42:57.257 [http-nio-8091-exec-32] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.11:42:57.313 [http-nio-8091-exec-44] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:42:57.313 [http-nio-8091-exec-45] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:0
24-11-27.11:42:57.369 [http-nio-8091-exec-43] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":595,"monthCount":660,"monthCountSurplus":595,"totalCount":660,"totalCountSurplus":557}
24-11-27.11:42:57.405 [http-nio-8091-exec-32] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":103},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":103},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":103}],"info":"调用成功"}
24-11-27.11:43:04.754 [http-nio-8091-exec-48] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:43:04.754 [http-nio-8091-exec-49] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:43:04.755 [http-nio-8091-exec-47] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:43:04.823 [http-nio-8091-exec-49] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:0
24-11-27.11:43:04.823 [http-nio-8091-exec-48] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:43:04.888 [http-nio-8091-exec-47] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":595,"monthCount":660,"monthCountSurplus":595,"totalCount":660,"totalCountSurplus":557}
24-11-27.11:43:05.568 [http-nio-8091-exec-1] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:43:05.568 [http-nio-8091-exec-3] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:43:05.568 [http-nio-8091-exec-50] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:43:05.628 [http-nio-8091-exec-1] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:0
24-11-27.11:43:05.628 [http-nio-8091-exec-3] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:43:05.692 [http-nio-8091-exec-50] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":595,"monthCount":660,"monthCountSurplus":595,"totalCount":660,"totalCountSurplus":557}
24-11-27.11:43:05.752 [http-nio-8091-exec-6] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:43:05.752 [http-nio-8091-exec-7] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:43:05.752 [http-nio-8091-exec-2] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:43:05.781 [http-nio-8091-exec-7] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:0
24-11-27.11:43:05.782 [http-nio-8091-exec-6] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:43:05.848 [http-nio-8091-exec-2] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":595,"monthCount":660,"monthCountSurplus":595,"totalCount":660,"totalCountSurplus":557}
24-11-27.11:43:05.958 [http-nio-8091-exec-8] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:43:05.958 [http-nio-8091-exec-4] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:43:05.958 [http-nio-8091-exec-5] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:43:05.986 [http-nio-8091-exec-4] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:43:05.986 [http-nio-8091-exec-8] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:0
24-11-27.11:43:06.043 [http-nio-8091-exec-5] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":595,"monthCount":660,"monthCountSurplus":595,"totalCount":660,"totalCountSurplus":557}
24-11-27.11:43:10.145 [http-nio-8091-exec-9] INFO  RateLimiterAOP         - aop attr xiaofuge
24-11-27.11:43:10.145 [http-nio-8091-exec-9] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
24-11-27.11:43:10.230 [http-nio-8091-exec-9] INFO  AbstractRaffleActivityPartake - 创建参与活动订单 userId:xiaofuge activityId:100301 userRaffleOrderEntity:null
24-11-27.11:43:10.779 [http-nio-8091-exec-9] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:690147629749
24-11-27.11:43:10.779 [http-nio-8091-exec-9] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId:xiaofuge strategyId:100006 ruleModel:rule_blacklist
24-11-27.11:43:10.833 [http-nio-8091-exec-9] INFO  BackListLogicChain     - 抽奖责任链-黑名单放行 userId:xiaofuge strategyId:100006 ruleModel:rule_blacklist
24-11-27.11:43:10.889 [http-nio-8091-exec-9] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: rule_default awardId: 105
24-11-27.11:43:10.889 [http-nio-8091-exec-9] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 xiaofuge 100006 105 rule_default
24-11-27.11:43:11.228 [http-nio-8091-exec-9] INFO  EventPublisher         - 发送MQ消息 topic:send_award message:{"data":{"awardId":105,"awardTitle":"小米su7周体验","orderId":"690147629749","userId":"xiaofuge"},"id":"91473259848","timestamp":1732678990973}
24-11-27.11:43:11.255 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":105,"awardTitle":"小米su7周体验","orderId":"690147629749","userId":"xiaofuge"},"id":"91473259848","timestamp":1732678990973}
24-11-27.11:43:11.283 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-1] ERROR AwardService           - 分发奖品，对应的服务不存在。awardKey:openai_model
24-11-27.11:43:11.847 [http-nio-8091-exec-17] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:43:11.847 [http-nio-8091-exec-11] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:43:11.847 [http-nio-8091-exec-18] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.11:43:11.847 [http-nio-8091-exec-10] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:43:11.905 [http-nio-8091-exec-17] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:0
24-11-27.11:43:11.905 [http-nio-8091-exec-11] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:43:11.961 [http-nio-8091-exec-10] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:43:11.988 [http-nio-8091-exec-18] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":104}],"info":"调用成功"}
24-11-27.11:43:16.840 [http-nio-8091-exec-27] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:43:16.840 [http-nio-8091-exec-20] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:43:16.840 [http-nio-8091-exec-16] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:43:16.896 [http-nio-8091-exec-27] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:0
24-11-27.11:43:16.896 [http-nio-8091-exec-20] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:43:16.952 [http-nio-8091-exec-16] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:43:17.040 [http-nio-8091-exec-23] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:43:17.040 [http-nio-8091-exec-22] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:43:17.040 [http-nio-8091-exec-19] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:43:17.068 [http-nio-8091-exec-22] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:0
24-11-27.11:43:17.069 [http-nio-8091-exec-23] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:43:17.125 [http-nio-8091-exec-19] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:43:17.255 [http-nio-8091-exec-13] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:43:17.255 [http-nio-8091-exec-12] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:43:17.255 [http-nio-8091-exec-31] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:43:17.282 [http-nio-8091-exec-13] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:0
24-11-27.11:43:17.284 [http-nio-8091-exec-12] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:43:17.341 [http-nio-8091-exec-31] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:43:27.185 [http-nio-8091-exec-24] INFO  RaffleActivityController - 日历签到返利开始 userId:xiaofuge
24-11-27.11:43:27.479 [http-nio-8091-exec-24] INFO  EventPublisher         - 发送MQ消息，topic:send_rebate message:{"data":{"bizId":"xiaofuge_integral_20241127","rebateConfig":"10","rebateType":"sign","userId":"xiaofuge"},"id":"81338621893","timestamp":1732679007248}
24-11-27.11:43:27.506 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  RebateMessageCustomer  - 监听用户行为返利消息 topic: send_rebate message: {"data":{"bizId":"xiaofuge_integral_20241127","rebateConfig":"10","rebateType":"sign","userId":"xiaofuge"},"id":"81338621893","timestamp":1732679007248}
24-11-27.11:43:27.537 [http-nio-8091-exec-24] INFO  RaffleActivityController - 日历签到返利完成 userId:xiaofuge orderIds: ["317305179742"]
24-11-27.11:43:28.093 [http-nio-8091-exec-26] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:43:28.093 [http-nio-8091-exec-15] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:43:28.094 [http-nio-8091-exec-14] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:43:28.148 [http-nio-8091-exec-15] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:43:28.149 [http-nio-8091-exec-26] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:43:28.204 [http-nio-8091-exec-14] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:43:29.515 [http-nio-8091-exec-28] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:43:29.515 [http-nio-8091-exec-38] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:43:29.516 [http-nio-8091-exec-21] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:43:29.572 [http-nio-8091-exec-28] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:43:29.572 [http-nio-8091-exec-38] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:43:29.629 [http-nio-8091-exec-21] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:43:31.287 [http-nio-8091-exec-33] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:43:31.287 [http-nio-8091-exec-29] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:43:31.287 [http-nio-8091-exec-30] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:43:31.342 [http-nio-8091-exec-29] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:43:31.342 [http-nio-8091-exec-33] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:43:31.400 [http-nio-8091-exec-30] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:43:31.482 [http-nio-8091-exec-34] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:43:31.482 [http-nio-8091-exec-35] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:43:31.482 [http-nio-8091-exec-39] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:43:31.511 [http-nio-8091-exec-35] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:43:31.511 [http-nio-8091-exec-34] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:43:31.568 [http-nio-8091-exec-39] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:43:31.710 [http-nio-8091-exec-36] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:43:31.710 [http-nio-8091-exec-25] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:43:31.710 [http-nio-8091-exec-37] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:43:31.742 [http-nio-8091-exec-36] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:43:31.770 [http-nio-8091-exec-25] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:43:31.799 [http-nio-8091-exec-37] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:43:33.419 [http-nio-8091-exec-40] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.11:43:33.419 [http-nio-8091-exec-46] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.11:43:33.422 [http-nio-8091-exec-41] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.11:43:33.422 [http-nio-8091-exec-42] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.11:43:33.439 [http-nio-8091-exec-45] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:43:33.439 [http-nio-8091-exec-44] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:43:33.495 [http-nio-8091-exec-44] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:43:33.500 [http-nio-8091-exec-43] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:43:33.531 [http-nio-8091-exec-46] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.11:43:33.534 [http-nio-8091-exec-32] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:43:33.554 [http-nio-8091-exec-43] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:43:33.555 [http-nio-8091-exec-45] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:43:33.558 [http-nio-8091-exec-40] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.11:43:33.558 [http-nio-8091-exec-48] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:43:33.558 [http-nio-8091-exec-49] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:43:33.561 [http-nio-8091-exec-47] INFO  RaffleActivityController - 查询sku商品集合开始 activityId:100301
24-11-27.11:43:33.563 [http-nio-8091-exec-42] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.11:43:33.563 [http-nio-8091-exec-41] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.11:43:33.567 [http-nio-8091-exec-1] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.11:43:33.568 [http-nio-8091-exec-3] INFO  RaffleActivityController - 查询sku商品集合开始 activityId:100301
24-11-27.11:43:33.587 [http-nio-8091-exec-48] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:43:33.589 [http-nio-8091-exec-50] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.11:43:33.591 [http-nio-8091-exec-49] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:43:33.619 [http-nio-8091-exec-32] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:43:33.619 [http-nio-8091-exec-47] INFO  RaffleActivityController - 查询sku商品集合完成 activityId:100301 skuProductResponseDTOS:[{"activityCount":{"dayCount":100,"monthCount":100,"totalCount":100},"activityCountId":11101,"productAmount":1.68,"sku":9011,"stockCount":100000,"stockCountSurplus":99886}]
24-11-27.11:43:33.627 [http-nio-8091-exec-3] INFO  RaffleActivityController - 查询sku商品集合完成 activityId:100301 skuProductResponseDTOS:[{"activityCount":{"dayCount":100,"monthCount":100,"totalCount":100},"activityCountId":11101,"productAmount":1.68,"sku":9011,"stockCount":100000,"stockCountSurplus":99886}]
24-11-27.11:43:33.653 [http-nio-8091-exec-1] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":104}],"info":"调用成功"}
24-11-27.11:43:33.674 [http-nio-8091-exec-50] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":104}],"info":"调用成功"}
24-11-27.11:43:42.768 [http-nio-8091-exec-7] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.11:43:42.835 [http-nio-8091-exec-7] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:衸𦑆𤺆𪖯𧢴𩢋
24-11-27.11:43:42.839 [http-nio-8091-exec-7] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.11:43:43.080 [http-nio-8091-exec-7] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:473601479790
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [E:\code\java\idea\big-market\big-market-app\target\classes\mybatis\mapper\UserCreditOrderDao.xml]
### The error may involve cn.wenzhuo4657.BigMarket.infrastructure.persistent.dao.UserCreditOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values(                   ?,?,?,?,?,?,now(),now()               )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy164.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:96)
	at com.sun.proxy.$Proxy196.insert(Unknown Source)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:92)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:84)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$b71add64.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$a5114436.saveUserCreditTradeOrder(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.credit.service.adjust.CreditAdjustService.createOrder(CreditAdjustService.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:363)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$194abf39.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor150.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy242.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.GeneratedMethodAccessor199.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy241.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:54)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 84 common frames omitted
24-11-27.11:43:43.164 [http-nio-8091-exec-7] INFO  CreditAdjustService    - 增加账户积分额度完成 userId:xiaofuge orderId:473601479790
24-11-27.11:43:43.165 [http-nio-8091-exec-7] INFO  RaffleActivityController - 积分兑换商品，支付订单完成  userId:xiaofuge sku:9011 orderId:473601479790
24-11-27.11:43:43.526 [http-nio-8091-exec-8] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:43:43.526 [http-nio-8091-exec-4] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:43:43.526 [http-nio-8091-exec-5] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.11:43:43.526 [http-nio-8091-exec-2] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:43:43.581 [http-nio-8091-exec-4] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:43:43.581 [http-nio-8091-exec-8] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:43:43.636 [http-nio-8091-exec-5] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":104}],"info":"调用成功"}
24-11-27.11:43:43.640 [http-nio-8091-exec-2] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:44:00.224 [http-nio-8091-exec-9] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.11:44:00.282 [http-nio-8091-exec-9] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:衸𦑆𤺆𪖯𧢴𩢋
24-11-27.11:44:00.282 [http-nio-8091-exec-9] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.11:44:00.452 [http-nio-8091-exec-9] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:023884812090
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [E:\code\java\idea\big-market\big-market-app\target\classes\mybatis\mapper\UserCreditOrderDao.xml]
### The error may involve cn.wenzhuo4657.BigMarket.infrastructure.persistent.dao.UserCreditOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values(                   ?,?,?,?,?,?,now(),now()               )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy164.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:96)
	at com.sun.proxy.$Proxy196.insert(Unknown Source)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:92)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:84)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$b71add64.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$a5114436.saveUserCreditTradeOrder(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.credit.service.adjust.CreditAdjustService.createOrder(CreditAdjustService.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:363)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$194abf39.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor150.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy242.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.GeneratedMethodAccessor199.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy241.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:54)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 84 common frames omitted
24-11-27.11:44:00.535 [http-nio-8091-exec-9] INFO  CreditAdjustService    - 增加账户积分额度完成 userId:xiaofuge orderId:023884812090
24-11-27.11:44:00.535 [http-nio-8091-exec-9] INFO  RaffleActivityController - 积分兑换商品，支付订单完成  userId:xiaofuge sku:9011 orderId:023884812090
24-11-27.11:44:00.902 [http-nio-8091-exec-17] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:44:00.902 [http-nio-8091-exec-10] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:44:00.902 [http-nio-8091-exec-18] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.11:44:00.902 [http-nio-8091-exec-11] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:44:00.957 [http-nio-8091-exec-10] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:44:00.957 [http-nio-8091-exec-17] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:44:00.986 [http-nio-8091-exec-11] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:44:01.038 [http-nio-8091-exec-18] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":104}],"info":"调用成功"}
24-11-27.11:44:01.842 [http-nio-8091-exec-20] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.11:44:01.898 [http-nio-8091-exec-20] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:衸𦑆𤺆𪖯𧢴𩢋
24-11-27.11:44:01.898 [http-nio-8091-exec-20] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.11:44:02.066 [http-nio-8091-exec-20] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:401235509414
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [E:\code\java\idea\big-market\big-market-app\target\classes\mybatis\mapper\UserCreditOrderDao.xml]
### The error may involve cn.wenzhuo4657.BigMarket.infrastructure.persistent.dao.UserCreditOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values(                   ?,?,?,?,?,?,now(),now()               )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy164.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:96)
	at com.sun.proxy.$Proxy196.insert(Unknown Source)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:92)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:84)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$b71add64.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$a5114436.saveUserCreditTradeOrder(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.credit.service.adjust.CreditAdjustService.createOrder(CreditAdjustService.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:363)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$194abf39.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor150.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy242.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.GeneratedMethodAccessor199.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy241.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:54)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 84 common frames omitted
24-11-27.11:44:02.150 [http-nio-8091-exec-20] INFO  CreditAdjustService    - 增加账户积分额度完成 userId:xiaofuge orderId:401235509414
24-11-27.11:44:02.150 [http-nio-8091-exec-20] INFO  RaffleActivityController - 积分兑换商品，支付订单完成  userId:xiaofuge sku:9011 orderId:401235509414
24-11-27.11:44:02.519 [http-nio-8091-exec-16] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:44:02.519 [http-nio-8091-exec-22] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:44:02.519 [http-nio-8091-exec-27] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:44:02.519 [http-nio-8091-exec-23] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.11:44:02.547 [http-nio-8091-exec-22] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:44:02.581 [http-nio-8091-exec-16] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:44:02.638 [http-nio-8091-exec-27] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:44:02.664 [http-nio-8091-exec-23] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":104}],"info":"调用成功"}
24-11-27.11:44:03.546 [http-nio-8091-exec-13] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.11:44:03.546 [http-nio-8091-exec-19] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.11:44:03.547 [http-nio-8091-exec-12] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.11:44:03.548 [http-nio-8091-exec-31] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.11:44:03.566 [http-nio-8091-exec-24] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:44:03.567 [http-nio-8091-exec-15] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:44:03.624 [http-nio-8091-exec-15] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:44:03.626 [http-nio-8091-exec-26] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:44:03.655 [http-nio-8091-exec-13] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.11:44:03.658 [http-nio-8091-exec-14] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:44:03.681 [http-nio-8091-exec-26] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:44:03.681 [http-nio-8091-exec-24] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:44:03.681 [http-nio-8091-exec-31] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.11:44:03.681 [http-nio-8091-exec-19] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.11:44:03.682 [http-nio-8091-exec-12] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.11:44:03.688 [http-nio-8091-exec-38] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:44:03.688 [http-nio-8091-exec-21] INFO  RaffleActivityController - 查询sku商品集合开始 activityId:100301
24-11-27.11:44:03.688 [http-nio-8091-exec-33] INFO  RaffleActivityController - 查询sku商品集合开始 activityId:100301
24-11-27.11:44:03.689 [http-nio-8091-exec-29] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.11:44:03.689 [http-nio-8091-exec-28] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:44:03.717 [http-nio-8091-exec-28] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:44:03.717 [http-nio-8091-exec-38] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:44:03.722 [http-nio-8091-exec-30] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.11:44:03.742 [http-nio-8091-exec-14] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:44:03.745 [http-nio-8091-exec-21] INFO  RaffleActivityController - 查询sku商品集合完成 activityId:100301 skuProductResponseDTOS:[{"activityCount":{"dayCount":100,"monthCount":100,"totalCount":100},"activityCountId":11101,"productAmount":1.68,"sku":9011,"stockCount":100000,"stockCountSurplus":99886}]
24-11-27.11:44:03.745 [http-nio-8091-exec-33] INFO  RaffleActivityController - 查询sku商品集合完成 activityId:100301 skuProductResponseDTOS:[{"activityCount":{"dayCount":100,"monthCount":100,"totalCount":100},"activityCountId":11101,"productAmount":1.68,"sku":9011,"stockCount":100000,"stockCountSurplus":99886}]
24-11-27.11:44:03.772 [http-nio-8091-exec-29] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":104}],"info":"调用成功"}
24-11-27.11:44:03.805 [http-nio-8091-exec-30] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":104}],"info":"调用成功"}
24-11-27.11:44:05.494 [http-nio-8091-exec-35] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.11:44:05.555 [http-nio-8091-exec-35] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:衸𦑆𤺆𪖯𧢴𩢋
24-11-27.11:44:05.555 [http-nio-8091-exec-35] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.11:44:05.724 [http-nio-8091-exec-35] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:363288995460
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [E:\code\java\idea\big-market\big-market-app\target\classes\mybatis\mapper\UserCreditOrderDao.xml]
### The error may involve cn.wenzhuo4657.BigMarket.infrastructure.persistent.dao.UserCreditOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values(                   ?,?,?,?,?,?,now(),now()               )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy164.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:96)
	at com.sun.proxy.$Proxy196.insert(Unknown Source)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:92)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:84)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$b71add64.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$a5114436.saveUserCreditTradeOrder(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.credit.service.adjust.CreditAdjustService.createOrder(CreditAdjustService.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:363)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$194abf39.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor150.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy242.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.GeneratedMethodAccessor199.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy241.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:54)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 84 common frames omitted
24-11-27.11:44:05.741 [http-nio-8091-exec-34] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.11:44:05.798 [http-nio-8091-exec-34] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:衸𦑆𤺆𪖯𧢴𩢋
24-11-27.11:44:05.798 [http-nio-8091-exec-34] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.11:44:05.810 [http-nio-8091-exec-35] INFO  CreditAdjustService    - 增加账户积分额度完成 userId:xiaofuge orderId:363288995460
24-11-27.11:44:05.810 [http-nio-8091-exec-35] INFO  RaffleActivityController - 积分兑换商品，支付订单完成  userId:xiaofuge sku:9011 orderId:363288995460
24-11-27.11:44:05.957 [http-nio-8091-exec-39] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.11:44:05.965 [http-nio-8091-exec-34] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:011592144677
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [E:\code\java\idea\big-market\big-market-app\target\classes\mybatis\mapper\UserCreditOrderDao.xml]
### The error may involve cn.wenzhuo4657.BigMarket.infrastructure.persistent.dao.UserCreditOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values(                   ?,?,?,?,?,?,now(),now()               )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy164.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:96)
	at com.sun.proxy.$Proxy196.insert(Unknown Source)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:92)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:84)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$b71add64.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$a5114436.saveUserCreditTradeOrder(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.credit.service.adjust.CreditAdjustService.createOrder(CreditAdjustService.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:363)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$194abf39.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor150.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy242.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.GeneratedMethodAccessor199.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy241.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:54)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 84 common frames omitted
24-11-27.11:44:06.014 [http-nio-8091-exec-39] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:衸𦑆𤺆𪖯𧢴𩢋
24-11-27.11:44:06.014 [http-nio-8091-exec-39] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.11:44:06.045 [http-nio-8091-exec-34] INFO  CreditAdjustService    - 增加账户积分额度完成 userId:xiaofuge orderId:011592144677
24-11-27.11:44:06.045 [http-nio-8091-exec-34] INFO  RaffleActivityController - 积分兑换商品，支付订单完成  userId:xiaofuge sku:9011 orderId:011592144677
24-11-27.11:44:06.155 [http-nio-8091-exec-36] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.11:44:06.168 [http-nio-8091-exec-37] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:44:06.168 [http-nio-8091-exec-44] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:44:06.168 [http-nio-8091-exec-46] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.11:44:06.168 [http-nio-8091-exec-25] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:44:06.184 [http-nio-8091-exec-36] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:衸𦑆𤺆𪖯𧢴𩢋
24-11-27.11:44:06.184 [http-nio-8091-exec-36] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.11:44:06.196 [http-nio-8091-exec-37] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:44:06.223 [http-nio-8091-exec-44] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:44:06.252 [http-nio-8091-exec-39] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:303671993947
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [E:\code\java\idea\big-market\big-market-app\target\classes\mybatis\mapper\UserCreditOrderDao.xml]
### The error may involve cn.wenzhuo4657.BigMarket.infrastructure.persistent.dao.UserCreditOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values(                   ?,?,?,?,?,?,now(),now()               )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy164.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:96)
	at com.sun.proxy.$Proxy196.insert(Unknown Source)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:92)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:84)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$b71add64.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$a5114436.saveUserCreditTradeOrder(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.credit.service.adjust.CreditAdjustService.createOrder(CreditAdjustService.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:363)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$194abf39.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor150.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy242.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.GeneratedMethodAccessor199.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy241.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:54)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 84 common frames omitted
24-11-27.11:44:06.279 [http-nio-8091-exec-25] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:44:06.307 [http-nio-8091-exec-46] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":104}],"info":"调用成功"}
24-11-27.11:44:06.333 [http-nio-8091-exec-39] INFO  CreditAdjustService    - 增加账户积分额度完成 userId:xiaofuge orderId:303671993947
24-11-27.11:44:06.333 [http-nio-8091-exec-39] INFO  RaffleActivityController - 积分兑换商品，支付订单完成  userId:xiaofuge sku:9011 orderId:303671993947
24-11-27.11:44:06.375 [http-nio-8091-exec-43] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.11:44:06.405 [http-nio-8091-exec-43] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:衸𦑆𤺆𪖯𧢴𩢋
24-11-27.11:44:06.405 [http-nio-8091-exec-43] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.11:44:06.504 [http-nio-8091-exec-36] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:122704311631
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [E:\code\java\idea\big-market\big-market-app\target\classes\mybatis\mapper\UserCreditOrderDao.xml]
### The error may involve cn.wenzhuo4657.BigMarket.infrastructure.persistent.dao.UserCreditOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values(                   ?,?,?,?,?,?,now(),now()               )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy164.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:96)
	at com.sun.proxy.$Proxy196.insert(Unknown Source)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:92)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:84)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$b71add64.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$a5114436.saveUserCreditTradeOrder(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.credit.service.adjust.CreditAdjustService.createOrder(CreditAdjustService.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:363)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$194abf39.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor150.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy242.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.GeneratedMethodAccessor199.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy241.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:54)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 84 common frames omitted
24-11-27.11:44:06.588 [http-nio-8091-exec-36] INFO  CreditAdjustService    - 增加账户积分额度完成 userId:xiaofuge orderId:122704311631
24-11-27.11:44:06.588 [http-nio-8091-exec-36] INFO  RaffleActivityController - 积分兑换商品，支付订单完成  userId:xiaofuge sku:9011 orderId:122704311631
24-11-27.11:44:06.754 [http-nio-8091-exec-43] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:066107621770
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [E:\code\java\idea\big-market\big-market-app\target\classes\mybatis\mapper\UserCreditOrderDao.xml]
### The error may involve cn.wenzhuo4657.BigMarket.infrastructure.persistent.dao.UserCreditOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values(                   ?,?,?,?,?,?,now(),now()               )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy164.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:96)
	at com.sun.proxy.$Proxy196.insert(Unknown Source)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:92)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:84)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$b71add64.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$a5114436.saveUserCreditTradeOrder(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.credit.service.adjust.CreditAdjustService.createOrder(CreditAdjustService.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:363)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$194abf39.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor150.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy242.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.GeneratedMethodAccessor199.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy241.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:54)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.GeneratedMethodAccessor260.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 84 common frames omitted
24-11-27.11:44:06.838 [http-nio-8091-exec-43] INFO  CreditAdjustService    - 增加账户积分额度完成 userId:xiaofuge orderId:066107621770
24-11-27.11:44:06.838 [http-nio-8091-exec-43] INFO  RaffleActivityController - 积分兑换商品，支付订单完成  userId:xiaofuge sku:9011 orderId:066107621770
24-11-27.11:44:07.204 [http-nio-8091-exec-40] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:44:07.204 [http-nio-8091-exec-42] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:44:07.204 [http-nio-8091-exec-45] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:44:07.204 [http-nio-8091-exec-41] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.11:44:07.260 [http-nio-8091-exec-40] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:44:07.260 [http-nio-8091-exec-42] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:44:07.316 [http-nio-8091-exec-45] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:44:07.342 [http-nio-8091-exec-41] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":104}],"info":"调用成功"}
24-11-27.11:44:07.361 [http-nio-8091-exec-48] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.11:44:07.416 [http-nio-8091-exec-48] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:衸𦑆𤺆𪖯𧢴𩢋
24-11-27.11:44:07.416 [http-nio-8091-exec-48] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.11:44:07.584 [http-nio-8091-exec-48] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:740863012573
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [E:\code\java\idea\big-market\big-market-app\target\classes\mybatis\mapper\UserCreditOrderDao.xml]
### The error may involve cn.wenzhuo4657.BigMarket.infrastructure.persistent.dao.UserCreditOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values(                   ?,?,?,?,?,?,now(),now()               )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy164.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:96)
	at com.sun.proxy.$Proxy196.insert(Unknown Source)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:92)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:84)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$b71add64.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$a5114436.saveUserCreditTradeOrder(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.credit.service.adjust.CreditAdjustService.createOrder(CreditAdjustService.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:363)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$194abf39.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor150.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy242.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.GeneratedMethodAccessor199.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy241.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:54)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.GeneratedMethodAccessor260.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 84 common frames omitted
24-11-27.11:44:07.668 [http-nio-8091-exec-48] INFO  CreditAdjustService    - 增加账户积分额度完成 userId:xiaofuge orderId:740863012573
24-11-27.11:44:07.668 [http-nio-8091-exec-48] INFO  RaffleActivityController - 积分兑换商品，支付订单完成  userId:xiaofuge sku:9011 orderId:740863012573
24-11-27.11:44:08.035 [http-nio-8091-exec-47] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:44:08.035 [http-nio-8091-exec-32] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:44:08.035 [http-nio-8091-exec-49] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:44:08.035 [http-nio-8091-exec-3] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.11:44:08.064 [http-nio-8091-exec-47] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:44:08.091 [http-nio-8091-exec-32] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:44:08.148 [http-nio-8091-exec-49] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:44:08.174 [http-nio-8091-exec-3] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":104}],"info":"调用成功"}
24-11-27.11:44:23.136 [http-nio-8091-exec-1] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.11:44:23.193 [http-nio-8091-exec-1] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:衸𦑆𤺆𪖯𧢴𩢋
24-11-27.11:44:23.193 [http-nio-8091-exec-1] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.11:44:23.364 [http-nio-8091-exec-1] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:723665544044
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [E:\code\java\idea\big-market\big-market-app\target\classes\mybatis\mapper\UserCreditOrderDao.xml]
### The error may involve cn.wenzhuo4657.BigMarket.infrastructure.persistent.dao.UserCreditOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values(                   ?,?,?,?,?,?,now(),now()               )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy164.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:96)
	at com.sun.proxy.$Proxy196.insert(Unknown Source)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:92)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:84)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$b71add64.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$a5114436.saveUserCreditTradeOrder(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.credit.service.adjust.CreditAdjustService.createOrder(CreditAdjustService.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:363)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$194abf39.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor150.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy242.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.GeneratedMethodAccessor199.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy241.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:54)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.GeneratedMethodAccessor260.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 84 common frames omitted
24-11-27.11:44:23.447 [http-nio-8091-exec-1] INFO  CreditAdjustService    - 增加账户积分额度完成 userId:xiaofuge orderId:723665544044
24-11-27.11:44:23.447 [http-nio-8091-exec-1] INFO  RaffleActivityController - 积分兑换商品，支付订单完成  userId:xiaofuge sku:9011 orderId:723665544044
24-11-27.11:44:23.809 [http-nio-8091-exec-7] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:44:23.809 [http-nio-8091-exec-6] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:44:23.809 [http-nio-8091-exec-50] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:44:23.812 [http-nio-8091-exec-4] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.11:44:23.864 [http-nio-8091-exec-6] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:44:23.866 [http-nio-8091-exec-7] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:44:23.921 [http-nio-8091-exec-4] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":104}],"info":"调用成功"}
24-11-27.11:44:23.922 [http-nio-8091-exec-50] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:44:35.558 [http-nio-8091-exec-8] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:44:35.558 [http-nio-8091-exec-5] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:44:35.559 [http-nio-8091-exec-2] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:44:35.618 [http-nio-8091-exec-5] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:44:35.619 [http-nio-8091-exec-2] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:44:35.677 [http-nio-8091-exec-8] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:44:36.456 [http-nio-8091-exec-9] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:44:36.456 [http-nio-8091-exec-10] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:44:36.459 [http-nio-8091-exec-17] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:44:36.513 [http-nio-8091-exec-10] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:44:36.513 [http-nio-8091-exec-17] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:44:36.571 [http-nio-8091-exec-9] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:44:36.655 [http-nio-8091-exec-11] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:44:36.655 [http-nio-8091-exec-18] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:44:36.656 [http-nio-8091-exec-20] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:44:36.684 [http-nio-8091-exec-20] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:44:36.711 [http-nio-8091-exec-18] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:44:36.742 [http-nio-8091-exec-11] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:44:36.898 [http-nio-8091-exec-22] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:44:36.898 [http-nio-8091-exec-16] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:44:36.898 [http-nio-8091-exec-27] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:44:36.926 [http-nio-8091-exec-16] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:44:36.926 [http-nio-8091-exec-27] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:44:36.982 [http-nio-8091-exec-22] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:44:37.634 [http-nio-8091-exec-23] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:44:37.635 [http-nio-8091-exec-15] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:44:37.636 [http-nio-8091-exec-13] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:44:37.691 [http-nio-8091-exec-13] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:44:37.691 [http-nio-8091-exec-15] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:44:37.749 [http-nio-8091-exec-23] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:44:37.837 [http-nio-8091-exec-24] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:44:37.837 [http-nio-8091-exec-26] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:44:37.838 [http-nio-8091-exec-31] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:44:37.865 [http-nio-8091-exec-24] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:44:37.892 [http-nio-8091-exec-31] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:44:37.951 [http-nio-8091-exec-26] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:44:38.132 [http-nio-8091-exec-19] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:44:38.132 [http-nio-8091-exec-12] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:44:38.134 [http-nio-8091-exec-38] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:44:38.161 [http-nio-8091-exec-12] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:44:38.161 [http-nio-8091-exec-38] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:44:38.247 [http-nio-8091-exec-19] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:44:38.748 [http-nio-8091-exec-28] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:44:38.748 [http-nio-8091-exec-21] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:44:38.748 [http-nio-8091-exec-14] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:44:38.803 [http-nio-8091-exec-14] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:44:38.803 [http-nio-8091-exec-21] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:44:38.862 [http-nio-8091-exec-28] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:44:38.995 [http-nio-8091-exec-33] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:44:38.996 [http-nio-8091-exec-29] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:44:38.996 [http-nio-8091-exec-30] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:44:39.024 [http-nio-8091-exec-29] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:44:39.051 [http-nio-8091-exec-30] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:44:39.079 [http-nio-8091-exec-33] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:46:54.296 [DubboShutdownHook] INFO  DubboShutdownHook      -  [DUBBO] Run shutdown hook now., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:46:54.296 [Thread-41       ] WARN  HttpClientBeanHolder   - [HttpClientBeanHolder] Start destroying common HttpClient
24-11-27.11:46:54.296 [Thread-46       ] WARN  NotifyCenter           - [NotifyCenter] Start destroying Publisher
24-11-27.11:46:54.296 [DubboShutdownHook] INFO  FrameworkModel         -  [DUBBO] Reset global default application from Dubbo Application[1.1](big-market) to null, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:46:54.296 [Thread-46       ] WARN  NotifyCenter           - [NotifyCenter] Destruction of the end
24-11-27.11:46:54.296 [DubboShutdownHook] INFO  DefaultApplicationDeployer -  [DUBBO] Dubbo Application[1.1](big-market) is stopping., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:46:54.296 [DubboShutdownHook] INFO  RegistryManager        -  [DUBBO] Close all registries [nacos://117.72.36.124:8848/org.apache.dubbo.registry.RegistryService?REGISTRY_CLUSTER=nacos-registry&application=big-market&application.version=1.0&dubbo=2.0.2&interface=org.apache.dubbo.registry.RegistryService&pid=2508&qos.enable=false&release=3.0.9, nacos://117.72.36.124:8848/org.apache.dubbo.registry.RegistryService?REGISTRY_CLUSTER=nacos-registry&application=big-market&application.version=1.0&dubbo=2.0.2&interface=org.apache.dubbo.registry.RegistryService&pid=2508&qos.enable=false&release=3.0.9], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:46:54.296 [DubboShutdownHook] INFO  NacosRegistry          -  [DUBBO] Destroy registry:nacos://117.72.36.124:8848/org.apache.dubbo.registry.RegistryService?REGISTRY_CLUSTER=nacos-registry&application=big-market&application.version=1.0&dubbo=2.0.2&interface=org.apache.dubbo.registry.RegistryService&pid=2508&qos.enable=false&release=3.0.9, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:46:54.296 [DubboShutdownHook] INFO  NacosRegistry          -  [DUBBO] Unregister: dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=2508&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732678889598&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:46:54.296 [Thread-41       ] WARN  HttpClientBeanHolder   - [HttpClientBeanHolder] Destruction of the end
24-11-27.11:46:54.298 [SpringApplicationShutdownHook] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.1] is stopping., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:46:54.298 [SpringApplicationShutdownHook] WARN  RegistryManager        -  [DUBBO] All registry instances have been destroyed, failed to fetch any instance. Usually, this means no need to try to do unnecessary redundant resource clearance, all registries has been taken care of., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:46:54.299 [SpringApplicationShutdownHook] WARN  RegistryManager        -  [DUBBO] All registry instances have been destroyed, failed to fetch any instance. Usually, this means no need to try to do unnecessary redundant resource clearance, all registries has been taken care of., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:46:54.299 [SpringApplicationShutdownHook] WARN  RegistryManager        -  [DUBBO] All registry instances have been destroyed, failed to fetch any instance. Usually, this means no need to try to do unnecessary redundant resource clearance, all registries has been taken care of., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:46:54.299 [SpringApplicationShutdownHook] WARN  RegistryManager        -  [DUBBO] All registry instances have been destroyed, failed to fetch any instance. Usually, this means no need to try to do unnecessary redundant resource clearance, all registries has been taken care of., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:46:54.299 [SpringApplicationShutdownHook] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.1] has stopped., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:46:54.299 [SpringApplicationShutdownHook] INFO  DubboSpringInitializer -  [DUBBO] Unbind Dubbo Module[1.1.1] from spring container: org.springframework.beans.factory.support.DefaultListableBeanFactory@5b444398, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:46:54.325 [DubboShutdownHook] INFO  NacosRegistry          -  [DUBBO] Destroy unregister url dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=2508&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732678889598&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:46:54.325 [DubboShutdownHook] INFO  NacosRegistry          -  [DUBBO] Unregister: dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,strategyArmory,queryRaffleAwardList,queryRaffleStrategyRuleWeight&pid=2508&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732678890720&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:46:54.331 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-27.11:46:54.354 [DubboShutdownHook] INFO  NacosRegistry          -  [DUBBO] Destroy unregister url dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,strategyArmory,queryRaffleAwardList,queryRaffleStrategyRuleWeight&pid=2508&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732678890720&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:46:54.354 [DubboShutdownHook] INFO  NacosRegistry          -  [DUBBO] Unsubscribe: provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,strategyArmory,queryRaffleAwardList,queryRaffleStrategyRuleWeight&pid=2508&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732678890720&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:46:54.354 [DubboShutdownHook] INFO  NacosRegistry          -  [DUBBO] Destroy unsubscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,strategyArmory,queryRaffleAwardList,queryRaffleStrategyRuleWeight&pid=2508&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732678890720&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:46:54.354 [DubboShutdownHook] INFO  NacosRegistry          -  [DUBBO] Unsubscribe: provider://172.18.144.1:20880/org.apache.dubbo.metadata.MetadataService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&connections=1&corethreads=2&delay=0&deprecated=false&dubbo=2.0.2&dynamic=true&executes=100&generic=false&getAndListenInstanceMetadata.1.callback=true&getAndListenInstanceMetadata.return=true&getAndListenInstanceMetadata.sent=true&group=big-market&interface=org.apache.dubbo.metadata.MetadataService&methods=getMetadataURL,isMetadataService,getExportedURLs,getAndListenInstanceMetadata,serviceName,version,getSubscribedURLs,getExportedServiceURLs,exportInstanceMetadata,getMetadataInfo,toSortedStrings,getMetadataInfos,getServiceDefinition,getInstanceMetadataChangedListenerMap&pid=2508&qos.enable=false&register=false&release=3.0.9&revision=3.0.9&service-name-mapping=true&side=provider&threadpool=cached&threads=100&timestamp=1732678891135&version=1.0.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:46:54.354 [DubboShutdownHook] INFO  NacosRegistry          -  [DUBBO] Destroy unsubscribe url provider://172.18.144.1:20880/org.apache.dubbo.metadata.MetadataService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&connections=1&corethreads=2&delay=0&deprecated=false&dubbo=2.0.2&dynamic=true&executes=100&generic=false&getAndListenInstanceMetadata.1.callback=true&getAndListenInstanceMetadata.return=true&getAndListenInstanceMetadata.sent=true&group=big-market&interface=org.apache.dubbo.metadata.MetadataService&methods=getMetadataURL,isMetadataService,getExportedURLs,getAndListenInstanceMetadata,serviceName,version,getSubscribedURLs,getExportedServiceURLs,exportInstanceMetadata,getMetadataInfo,toSortedStrings,getMetadataInfos,getServiceDefinition,getInstanceMetadataChangedListenerMap&pid=2508&qos.enable=false&register=false&release=3.0.9&revision=3.0.9&service-name-mapping=true&side=provider&threadpool=cached&threads=100&timestamp=1732678891135&version=1.0.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:46:54.354 [DubboShutdownHook] INFO  NacosRegistry          -  [DUBBO] Unsubscribe: provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=2508&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732678889598&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:46:54.354 [DubboShutdownHook] INFO  NacosRegistry          -  [DUBBO] Destroy unsubscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=2508&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732678889598&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:46:54.358 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-27.11:46:54.363 [DubboShutdownHook] INFO  DubboProtocol          -  [DUBBO] Destroying protocol [DubboProtocol] ..., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:46:54.363 [DubboShutdownHook] INFO  DubboProtocol          -  [DUBBO] Closing dubbo server: /172.18.144.1:20880, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:46:54.364 [DubboShutdownHook] INFO  AbstractServer         -  [DUBBO] Close NettyServer bind /0.0.0.0:20880, export /172.18.144.1:20880, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:46:54.386 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-27.11:46:54.413 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-27.11:46:54.513 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-27.11:46:54.513 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-27.11:46:54.881 [Dubbo-framework-registry-notification-0-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=2508&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732678889598&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:46:55.180 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-27.11:46:55.333 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-27.11:46:55.666 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-27.11:46:55.666 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-27.11:46:55.666 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-27.11:46:55.666 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-27.11:46:55.668 [Thread-75       ] INFO  EmbedServer            - >>>>>>>>>>> xxl-job remoting server stop.
24-11-27.11:46:55.696 [xxl-job, executor ExecutorRegistryThread] INFO  ExecutorRegistryThread - >>>>>>>>>>> xxl-job registry-remove success, registryParam:RegistryParam{registryGroup='EXECUTOR', registryKey='big-market-job', registryValue='http://117.72.36.124:9090/xxl-job-admin'}, registryResult:ReturnT [code=200, msg=null, content=null]
24-11-27.11:46:55.696 [xxl-job, executor ExecutorRegistryThread] INFO  ExecutorRegistryThread - >>>>>>>>>>> xxl-job, executor registry thread destroy.
24-11-27.11:46:55.696 [SpringApplicationShutdownHook] INFO  EmbedServer            - >>>>>>>>>>> xxl-job remoting server destroy success.
24-11-27.11:46:55.696 [xxl-job, executor JobLogFileCleanThread] INFO  JobLogFileCleanThread  - >>>>>>>>>>> xxl-job, executor JobLogFileCleanThread thread destroy.
24-11-27.11:46:55.696 [xxl-job, executor TriggerCallbackThread] INFO  TriggerCallbackThread  - >>>>>>>>>>> xxl-job, executor callback thread destroy.
24-11-27.11:46:55.697 [Thread-74       ] INFO  TriggerCallbackThread  - >>>>>>>>>>> xxl-job, executor retry callback thread destroy.
24-11-27.11:46:55.803 [Curator-Framework-0] INFO  CuratorFrameworkImpl   - backgroundOperationsLoop exiting
24-11-27.11:46:55.842 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - An exception was thrown while closing send thread for session 0x100003791620007.
org.apache.zookeeper.ClientCnxn$EndOfStreamException: Unable to read additional data from server sessionid 0x100003791620007, likely server has closed socket
	at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:75)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:348)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
24-11-27.11:46:55.951 [SpringApplicationShutdownHook] INFO  ZooKeeper              - Session: 0x100003791620007 closed
24-11-27.11:46:55.951 [main-EventThread] INFO  ClientCnxn             - EventThread shut down for session: 0x100003791620007
24-11-27.11:47:02.025 [main            ] INFO  WelcomeLogoApplicationListener - 

 :: Dubbo Spring Boot (v3.0.9) : https://github.com/apache/dubbo-spring-boot-project
 :: Dubbo (v3.0.9) : https://github.com/apache/dubbo
 :: Discuss group : dev@dubbo.apache.org

24-11-27.11:47:02.075 [background-preinit] INFO  Version                - HV000001: Hibernate Validator 6.2.5.Final
24-11-27.11:47:02.084 [main            ] INFO  Application            - Starting Application using Java 1.8.0_321 on 4657001021 with PID 15524 (E:\code\java\idea\big-market\big-market-app\target\classes started by 14783 in E:\code\java\idea\big-market)
24-11-27.11:47:02.084 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-11-27.11:47:03.820 [main            ] INFO  FrameworkModel         -  [DUBBO] Reset global default framework from null to Dubbo Framework[1], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:03.820 [main            ] INFO  FrameworkModel         -  [DUBBO] Dubbo Framework[1] is created, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:03.854 [main            ] INFO  ApplicationModel       -  [DUBBO] Dubbo Application[1.0](unknown) is created, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:03.856 [main            ] INFO  ScopeModel             -  [DUBBO] Dubbo Module[1.0.0] is created, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:03.888 [main            ] INFO  AbstractConfigManager  -  [DUBBO] Config settings: {dubbo.config.mode=STRICT, dubbo.config.ignore-duplicated-interface=false}, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:03.888 [main            ] INFO  AbstractConfigManager  -  [DUBBO] Config settings: {dubbo.config.mode=STRICT, dubbo.config.ignore-duplicated-interface=false}, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:03.947 [main            ] INFO  FrameworkModel         -  [DUBBO] Reset global default application from null to Dubbo Application[1.1](unknown), dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:03.947 [main            ] INFO  ApplicationModel       -  [DUBBO] Dubbo Application[1.1](unknown) is created, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:03.947 [main            ] INFO  ScopeModel             -  [DUBBO] Dubbo Module[1.1.0] is created, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:03.954 [main            ] INFO  AbstractConfigManager  -  [DUBBO] Config settings: {dubbo.config.mode=STRICT, dubbo.config.ignore-duplicated-interface=false}, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:03.954 [main            ] INFO  AbstractConfigManager  -  [DUBBO] Config settings: {dubbo.config.mode=STRICT, dubbo.config.ignore-duplicated-interface=false}, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:03.967 [main            ] INFO  DubboSpringInitializer -  [DUBBO] Use default application: Dubbo Application[1.1](unknown), dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:03.967 [main            ] INFO  ScopeModel             -  [DUBBO] Dubbo Module[1.1.1] is created, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:03.971 [main            ] INFO  AbstractConfigManager  -  [DUBBO] Config settings: {dubbo.config.mode=STRICT, dubbo.config.ignore-duplicated-interface=false}, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:03.976 [main            ] INFO  DubboSpringInitializer -  [DUBBO] Use default module model of target application: Dubbo Module[1.1.1], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:03.976 [main            ] INFO  DubboSpringInitializer -  [DUBBO] Bind Dubbo Module[1.1.1] to spring container: org.springframework.beans.factory.support.DefaultListableBeanFactory@2788d0fe, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:04.332 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-27.11:47:04.375 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-27.11:47:04.427 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 37 ms. Found 0 Redis repository interfaces.
24-11-27.11:47:04.727 [main            ] INFO  ServiceAnnotationPostProcessor -  [DUBBO] BeanNameGenerator bean can't be found in BeanFactory with name [org.springframework.context.annotation.internalConfigurationBeanNameGenerator], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:04.727 [main            ] INFO  ServiceAnnotationPostProcessor -  [DUBBO] BeanNameGenerator will be a instance of org.springframework.context.annotation.AnnotationBeanNameGenerator , it maybe a potential problem on bean name generation., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:04.739 [main            ] INFO  ServiceAnnotationPostProcessor -  [DUBBO] Found 2 classes annotated by Dubbo @Service under package [cn.wenzhuo4657.BigMarket]: [cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController, cn.wenzhuo4657.BigMarket.trigger.http.RaffleStrategyController], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:04.749 [main            ] INFO  ServiceAnnotationPostProcessor -  [DUBBO] Register ServiceBean[ServiceBean:cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService:1.0]: Root bean: class [org.apache.dubbo.config.spring.ServiceBean]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:04.749 [main            ] INFO  ServiceAnnotationPostProcessor -  [DUBBO] Register ServiceBean[ServiceBean:cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService:1.0]: Root bean: class [org.apache.dubbo.config.spring.ServiceBean]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:04.750 [main            ] INFO  ServiceAnnotationPostProcessor -  [DUBBO] BeanNameGenerator bean can't be found in BeanFactory with name [org.springframework.context.annotation.internalConfigurationBeanNameGenerator], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:04.750 [main            ] INFO  ServiceAnnotationPostProcessor -  [DUBBO] BeanNameGenerator will be a instance of org.springframework.context.annotation.AnnotationBeanNameGenerator , it maybe a potential problem on bean name generation., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:04.751 [main            ] WARN  ServiceAnnotationPostProcessor -  [DUBBO] No class annotated by Dubbo @Service was found under package [cn.wenzhuo4657.trigger.api], ignore re-scanned classes: 0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:04.754 [main            ] INFO  ConfigurationClassPostProcessor - Cannot enhance @Configuration bean definition 'org.apache.dubbo.spring.boot.autoconfigure.DubboRelaxedBinding2AutoConfiguration' since its singleton instance has been created too early. The typical cause is a non-static @Bean method with a BeanDefinitionRegistryPostProcessor return type: Consider declaring such methods as 'static'.
24-11-27.11:47:04.754 [main            ] INFO  ConfigurationClassPostProcessor - Cannot enhance @Configuration bean definition 'org.apache.dubbo.spring.boot.autoconfigure.DubboAutoConfiguration' since its singleton instance has been created too early. The typical cause is a non-static @Bean method with a BeanDefinitionRegistryPostProcessor return type: Consider declaring such methods as 'static'.
24-11-27.11:47:04.847 [main            ] INFO  GenericScope           - BeanFactory id=d499ceed-279a-3d77-817f-a65b97419307
24-11-27.11:47:05.536 [main            ] INFO  ReferenceAnnotationBeanPostProcessor - class org.apache.dubbo.config.spring.beans.factory.annotation.ReferenceAnnotationBeanPostProcessor was destroying!
24-11-27.11:47:05.886 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'zooKeeperClientConfig' of type [cn.wenzhuo4657.BigMarket.config.ZooKeeperClientConfig$$EnhancerBySpringCGLIB$$3885d7a3] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-11-27.11:47:05.898 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-11-27.11:47:05.901 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-11-27.11:47:05.905 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$585/2065453085] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-11-27.11:47:05.912 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-11-27.11:47:05.922 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'zookeeper.sdk.config-cn.wenzhuo4657.BigMarket.config.ZookeeperClientConfigProperties' of type [cn.wenzhuo4657.BigMarket.config.ZookeeperClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-11-27.11:47:05.981 [main            ] INFO  CuratorFrameworkImpl   - Starting
24-11-27.11:47:05.988 [main            ] INFO  ZooKeeper              - Client environment:zookeeper.version=3.6.0--b4c89dc7f6083829e18fae6e446907ae0b1f22d7, built on 02/25/2020 14:38 GMT
24-11-27.11:47:05.988 [main            ] INFO  ZooKeeper              - Client environment:host.name=4657001021.mshome.net
24-11-27.11:47:05.988 [main            ] INFO  ZooKeeper              - Client environment:java.version=1.8.0_321
24-11-27.11:47:05.988 [main            ] INFO  ZooKeeper              - Client environment:java.vendor=Oracle Corporation
24-11-27.11:47:05.988 [main            ] INFO  ZooKeeper              - Client environment:java.home=C:\Program Files\Java\jdk1.8.0_321\jre
24-11-27.11:47:05.988 [main            ] INFO  ZooKeeper              - Client environment:java.class.path=C:\Program Files\Java\jdk1.8.0_321\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\access-bridge-64.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\cldrdata.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\jaccess.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\jfxrt.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\nashorn.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\sunpkcs11.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\zipfs.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\jce.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\jfr.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\jfxswt.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\resources.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\rt.jar;E:\code\java\idea\big-market\big-market-app\target\classes;D:\maven\local-maven\com\xuxueli\xxl-job-core\2.4.1\xxl-job-core-2.4.1.jar;D:\maven\local-maven\io\netty\netty-codec-http\4.1.92.Final\netty-codec-http-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-common\4.1.92.Final\netty-common-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-buffer\4.1.92.Final\netty-buffer-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport\4.1.92.Final\netty-transport-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec\4.1.92.Final\netty-codec-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-handler\4.1.92.Final\netty-handler-4.1.92.Final.jar;D:\maven\local-maven\com\google\code\gson\gson\2.9.1\gson-2.9.1.jar;D:\maven\local-maven\org\apache\groovy\groovy\4.0.21\groovy-4.0.21.jar;D:\maven\local-maven\org\slf4j\slf4j-api\1.7.36\slf4j-api-1.7.36.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-starter-zookeeper-discovery\3.1.4\spring-cloud-starter-zookeeper-discovery-3.1.4.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-starter-zookeeper\3.1.4\spring-cloud-starter-zookeeper-3.1.4.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-starter\3.1.7\spring-cloud-starter-3.1.7.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-context\3.1.7\spring-cloud-context-3.1.7.jar;D:\maven\local-maven\org\springframework\security\spring-security-crypto\5.7.8\spring-security-crypto-5.7.8.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-commons\3.1.7\spring-cloud-commons-3.1.7.jar;D:\maven\local-maven\org\springframework\security\spring-security-rsa\1.0.11.RELEASE\spring-security-rsa-1.0.11.RELEASE.jar;D:\maven\local-maven\org\bouncycastle\bcpkix-jdk15on\1.69\bcpkix-jdk15on-1.69.jar;D:\maven\local-maven\org\bouncycastle\bcprov-jdk15on\1.69\bcprov-jdk15on-1.69.jar;D:\maven\local-maven\org\bouncycastle\bcutil-jdk15on\1.69\bcutil-jdk15on-1.69.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-zookeeper-core\3.1.4\spring-cloud-zookeeper-core-3.1.4.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-validation\2.7.12\spring-boot-starter-validation-2.7.12.jar;D:\maven\local-maven\org\hibernate\validator\hibernate-validator\6.2.5.Final\hibernate-validator-6.2.5.Final.jar;D:\maven\local-maven\org\jboss\logging\jboss-logging\3.4.3.Final\jboss-logging-3.4.3.Final.jar;D:\maven\local-maven\com\fasterxml\classmate\1.5.1\classmate-1.5.1.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-zookeeper-discovery\3.1.4\spring-cloud-zookeeper-discovery-3.1.4.jar;D:\maven\local-maven\org\apache\curator\curator-x-discovery\5.1.0\curator-x-discovery-5.1.0.jar;D:\maven\local-maven\org\apache\curator\curator-recipes\5.1.0\curator-recipes-5.1.0.jar;D:\maven\local-maven\org\apache\curator\curator-framework\5.1.0\curator-framework-5.1.0.jar;D:\maven\local-maven\org\apache\curator\curator-client\5.1.0\curator-client-5.1.0.jar;D:\maven\local-maven\org\apache\zookeeper\zookeeper\3.6.0\zookeeper-3.6.0.jar;D:\maven\local-maven\org\apache\zookeeper\zookeeper-jute\3.6.0\zookeeper-jute-3.6.0.jar;D:\maven\local-maven\org\apache\yetus\audience-annotations\0.5.0\audience-annotations-0.5.0.jar;D:\maven\local-maven\io\netty\netty-transport-native-epoll\4.1.92.Final\netty-transport-native-epoll-4.1.92.Final.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-starter-loadbalancer\3.1.7\spring-cloud-starter-loadbalancer-3.1.7.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-loadbalancer\3.1.7\spring-cloud-loadbalancer-3.1.7.jar;D:\maven\local-maven\io\projectreactor\addons\reactor-extra\3.4.10\reactor-extra-3.4.10.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-cache\2.7.12\spring-boot-starter-cache-2.7.12.jar;D:\maven\local-maven\org\springframework\spring-context-support\5.3.27\spring-context-support-5.3.27.jar;D:\maven\local-maven\com\stoyanr\evictor\1.0.0\evictor-1.0.0.jar;D:\maven\local-maven\org\apache\dubbo\dubbo\3.0.9\dubbo-3.0.9.jar;D:\maven\local-maven\org\springframework\spring-context\5.3.27\spring-context-5.3.27.jar;D:\maven\local-maven\org\springframework\spring-aop\5.3.27\spring-aop-5.3.27.jar;D:\maven\local-maven\org\springframework\spring-beans\5.3.27\spring-beans-5.3.27.jar;D:\maven\local-maven\org\springframework\spring-expression\5.3.27\spring-expression-5.3.27.jar;D:\maven\local-maven\com\alibaba\spring\spring-context-support\1.0.8\spring-context-support-1.0.8.jar;D:\maven\local-maven\org\javassist\javassist\3.28.0-GA\javassist-3.28.0-GA.jar;D:\maven\local-maven\io\netty\netty-all\4.1.92.Final\netty-all-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-dns\4.1.92.Final\netty-codec-dns-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-haproxy\4.1.92.Final\netty-codec-haproxy-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-http2\4.1.92.Final\netty-codec-http2-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-memcache\4.1.92.Final\netty-codec-memcache-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-mqtt\4.1.92.Final\netty-codec-mqtt-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-redis\4.1.92.Final\netty-codec-redis-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-smtp\4.1.92.Final\netty-codec-smtp-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-socks\4.1.92.Final\netty-codec-socks-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-stomp\4.1.92.Final\netty-codec-stomp-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-xml\4.1.92.Final\netty-codec-xml-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport-native-unix-common\4.1.92.Final\netty-transport-native-unix-common-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-handler-proxy\4.1.92.Final\netty-handler-proxy-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-handler-ssl-ocsp\4.1.92.Final\netty-handler-ssl-ocsp-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-resolver\4.1.92.Final\netty-resolver-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-resolver-dns\4.1.92.Final\netty-resolver-dns-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport-rxtx\4.1.92.Final\netty-transport-rxtx-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport-sctp\4.1.92.Final\netty-transport-sctp-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport-udt\4.1.92.Final\netty-transport-udt-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport-classes-epoll\4.1.92.Final\netty-transport-classes-epoll-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport-classes-kqueue\4.1.92.Final\netty-transport-classes-kqueue-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-resolver-dns-classes-macos\4.1.92.Final\netty-resolver-dns-classes-macos-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport-native-epoll\4.1.92.Final\netty-transport-native-epoll-4.1.92.Final-linux-x86_64.jar;D:\maven\local-maven\io\netty\netty-transport-native-epoll\4.1.92.Final\netty-transport-native-epoll-4.1.92.Final-linux-aarch_64.jar;D:\maven\local-maven\io\netty\netty-transport-native-kqueue\4.1.92.Final\netty-transport-native-kqueue-4.1.92.Final-osx-x86_64.jar;D:\maven\local-maven\io\netty\netty-transport-native-kqueue\4.1.92.Final\netty-transport-native-kqueue-4.1.92.Final-osx-aarch_64.jar;D:\maven\local-maven\io\netty\netty-resolver-dns-native-macos\4.1.92.Final\netty-resolver-dns-native-macos-4.1.92.Final-osx-x86_64.jar;D:\maven\local-maven\io\netty\netty-resolver-dns-native-macos\4.1.92.Final\netty-resolver-dns-native-macos-4.1.92.Final-osx-aarch_64.jar;D:\maven\local-maven\org\yaml\snakeyaml\1.30\snakeyaml-1.30.jar;D:\maven\local-maven\org\apache\dubbo\dubbo-spring-boot-starter\3.0.9\dubbo-spring-boot-starter-3.0.9.jar;D:\maven\local-maven\org\apache\dubbo\dubbo-spring-boot-autoconfigure\3.0.9\dubbo-spring-boot-autoconfigure-3.0.9.jar;D:\maven\local-maven\org\apache\dubbo\dubbo-spring-boot-autoconfigure-compatible\3.0.9\dubbo-spring-boot-autoconfigure-compatible-3.0.9.jar;D:\maven\local-maven\com\alibaba\nacos\nacos-client\2.1.0\nacos-client-2.1.0.jar;D:\maven\local-maven\com\alibaba\nacos\nacos-auth-plugin\2.1.0\nacos-auth-plugin-2.1.0.jar;D:\maven\local-maven\com\alibaba\nacos\nacos-encryption-plugin\2.1.0\nacos-encryption-plugin-2.1.0.jar;D:\maven\local-maven\com\fasterxml\jackson\core\jackson-core\2.13.5\jackson-core-2.13.5.jar;D:\maven\local-maven\com\fasterxml\jackson\core\jackson-databind\2.13.5\jackson-databind-2.13.5.jar;D:\maven\local-maven\com\fasterxml\jackson\core\jackson-annotations\2.13.5\jackson-annotations-2.13.5.jar;D:\maven\local-maven\org\apache\httpcomponents\httpasyncclient\4.1.5\httpasyncclient-4.1.5.jar;D:\maven\local-maven\org\apache\httpcomponents\httpcore\4.4.16\httpcore-4.4.16.jar;D:\maven\local-maven\org\apache\httpcomponents\httpcore-nio\4.4.16\httpcore-nio-4.4.16.jar;D:\maven\local-maven\org\apache\httpcomponents\httpclient\4.5.14\httpclient-4.5.14.jar;D:\maven\local-maven\io\prometheus\simpleclient\0.15.0\simpleclient-0.15.0.jar;D:\maven\local-maven\io\prometheus\simpleclient_tracer_otel\0.15.0\simpleclient_tracer_otel-0.15.0.jar;D:\maven\local-maven\io\prometheus\simpleclient_tracer_common\0.15.0\simpleclient_tracer_common-0.15.0.jar;D:\maven\local-maven\io\prometheus\simpleclient_tracer_otel_agent\0.15.0\simpleclient_tracer_otel_agent-0.15.0.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-web\2.7.12\spring-boot-starter-web-2.7.12.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter\2.7.12\spring-boot-starter-2.7.12.jar;D:\maven\local-maven\org\springframework\boot\spring-boot\2.7.12\spring-boot-2.7.12.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-logging\2.7.12\spring-boot-starter-logging-2.7.12.jar;D:\maven\local-maven\ch\qos\logback\logback-classic\1.2.12\logback-classic-1.2.12.jar;D:\maven\local-maven\ch\qos\logback\logback-core\1.2.12\logback-core-1.2.12.jar;D:\maven\local-maven\org\apache\logging\log4j\log4j-to-slf4j\2.17.2\log4j-to-slf4j-2.17.2.jar;D:\maven\local-maven\org\apache\logging\log4j\log4j-api\2.17.2\log4j-api-2.17.2.jar;D:\maven\local-maven\org\slf4j\jul-to-slf4j\1.7.36\jul-to-slf4j-1.7.36.jar;D:\maven\local-maven\jakarta\annotation\jakarta.annotation-api\1.3.5\jakarta.annotation-api-1.3.5.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-json\2.7.12\spring-boot-starter-json-2.7.12.jar;D:\maven\local-maven\com\fasterxml\jackson\datatype\jackson-datatype-jdk8\2.13.5\jackson-datatype-jdk8-2.13.5.jar;D:\maven\local-maven\com\fasterxml\jackson\datatype\jackson-datatype-jsr310\2.13.5\jackson-datatype-jsr310-2.13.5.jar;D:\maven\local-maven\com\fasterxml\jackson\module\jackson-module-parameter-names\2.13.5\jackson-module-parameter-names-2.13.5.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-tomcat\2.7.12\spring-boot-starter-tomcat-2.7.12.jar;D:\maven\local-maven\org\apache\tomcat\embed\tomcat-embed-el\9.0.75\tomcat-embed-el-9.0.75.jar;D:\maven\local-maven\org\apache\tomcat\embed\tomcat-embed-websocket\9.0.75\tomcat-embed-websocket-9.0.75.jar;D:\maven\local-maven\org\springframework\spring-web\5.3.27\spring-web-5.3.27.jar;D:\maven\local-maven\org\springframework\spring-webmvc\5.3.27\spring-webmvc-5.3.27.jar;D:\maven\local-maven\net\bytebuddy\byte-buddy\1.12.23\byte-buddy-1.12.23.jar;D:\maven\local-maven\org\objenesis\objenesis\3.2\objenesis-3.2.jar;D:\maven\local-maven\org\springframework\spring-core\5.3.27\spring-core-5.3.27.jar;D:\maven\local-maven\org\springframework\spring-jcl\5.3.27\spring-jcl-5.3.27.jar;D:\maven\local-maven\org\apache\tomcat\embed\tomcat-embed-core\9.0.75\tomcat-embed-core-9.0.75.jar;D:\maven\local-maven\org\apache\tomcat\tomcat-annotations-api\9.0.75\tomcat-annotations-api-9.0.75.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-configuration-processor\2.7.12\spring-boot-configuration-processor-2.7.12.jar;D:\maven\local-maven\com\baomidou\mybatis-plus-boot-starter\3.3.1\mybatis-plus-boot-starter-3.3.1.jar;D:\maven\local-maven\com\baomidou\mybatis-plus\3.3.1\mybatis-plus-3.3.1.jar;D:\maven\local-maven\com\baomidou\mybatis-plus-extension\3.3.1\mybatis-plus-extension-3.3.1.jar;D:\maven\local-maven\com\baomidou\mybatis-plus-core\3.3.1\mybatis-plus-core-3.3.1.jar;D:\maven\local-maven\com\baomidou\mybatis-plus-annotation\3.3.1\mybatis-plus-annotation-3.3.1.jar;D:\maven\local-maven\com\github\jsqlparser\jsqlparser\3.1\jsqlparser-3.1.jar;D:\maven\local-maven\org\mybatis\mybatis-spring\2.0.3\mybatis-spring-2.0.3.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-autoconfigure\2.7.12\spring-boot-autoconfigure-2.7.12.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-jdbc\2.7.12\spring-boot-starter-jdbc-2.7.12.jar;D:\maven\local-maven\com\zaxxer\HikariCP\4.0.3\HikariCP-4.0.3.jar;D:\maven\local-maven\org\springframework\spring-jdbc\5.3.27\spring-jdbc-5.3.27.jar;D:\maven\local-maven\mysql\mysql-connector-java\8.0.22\mysql-connector-java-8.0.22.jar;D:\maven\local-maven\com\google\protobuf\protobuf-java\3.11.4\protobuf-java-3.11.4.jar;D:\maven\local-maven\com\alibaba\fastjson\2.0.28\fastjson-2.0.28.jar;D:\maven\local-maven\com\alibaba\fastjson2\fastjson2-extension\2.0.28\fastjson2-extension-2.0.28.jar;D:\maven\local-maven\com\alibaba\fastjson2\fastjson2\2.0.28\fastjson2-2.0.28.jar;D:\maven\local-maven\org\apache\commons\commons-lang3\3.9\commons-lang3-3.9.jar;D:\maven\local-maven\org\projectlombok\lombok\1.18.26\lombok-1.18.26.jar;D:\maven\local-maven\com\google\guava\guava\32.1.3-jre\guava-32.1.3-jre.jar;D:\maven\local-maven\com\google\guava\failureaccess\1.0.1\failureaccess-1.0.1.jar;D:\maven\local-maven\com\google\guava\listenablefuture\9999.0-empty-to-avoid-conflict-with-guava\listenablefuture-9999.0-empty-to-avoid-conflict-with-guava.jar;D:\maven\local-maven\com\google\code\findbugs\jsr305\3.0.2\jsr305-3.0.2.jar;D:\maven\local-maven\org\checkerframework\checker-qual\3.37.0\checker-qual-3.37.0.jar;D:\maven\local-maven\com\google\errorprone\error_prone_annotations\2.21.1\error_prone_annotations-2.21.1.jar;D:\maven\local-maven\com\google\j2objc\j2objc-annotations\2.8\j2objc-annotations-2.8.jar;D:\maven\local-maven\io\jsonwebtoken\jjwt\0.9.1\jjwt-0.9.1.jar;D:\maven\local-maven\com\auth0\java-jwt\4.4.0\java-jwt-4.4.0.jar;D:\maven\local-maven\commons-codec\commons-codec\1.15\commons-codec-1.15.jar;D:\maven\local-maven\com\squareup\retrofit2\converter-gson\2.9.0\converter-gson-2.9.0.jar;D:\maven\local-maven\com\squareup\retrofit2\retrofit\2.9.0\retrofit-2.9.0.jar;D:\maven\local-maven\com\squareup\okhttp3\okhttp\4.9.3\okhttp-4.9.3.jar;D:\maven\local-maven\com\squareup\okio\okio\2.8.0\okio-2.8.0.jar;D:\maven\local-maven\org\jetbrains\kotlin\kotlin-stdlib-common\1.6.21\kotlin-stdlib-common-1.6.21.jar;D:\maven\local-maven\org\jetbrains\kotlin\kotlin-stdlib\1.6.21\kotlin-stdlib-1.6.21.jar;D:\maven\local-maven\org\jetbrains\annotations\13.0\annotations-13.0.jar;E:\code\java\idea\big-market\big-market-trigger\target\classes;D:\maven\local-maven\com\netflix\hystrix\hystrix-javanica\1.5.18\hystrix-javanica-1.5.18.jar;D:\maven\local-maven\org\aspectj\aspectjrt\1.9.7\aspectjrt-1.9.7.jar;D:\maven\local-maven\org\ow2\asm\asm\5.0.4\asm-5.0.4.jar;D:\maven\local-maven\com\netflix\hystrix\hystrix-core\1.5.18\hystrix-core-1.5.18.jar;D:\maven\local-maven\com\netflix\archaius\archaius-core\0.4.1\archaius-core-0.4.1.jar;D:\maven\local-maven\commons-configuration\commons-configuration\1.8\commons-configuration-1.8.jar;D:\maven\local-maven\io\reactivex\rxjava\1.3.8\rxjava-1.3.8.jar;D:\maven\local-maven\org\hdrhistogram\HdrHistogram\2.1.9\HdrHistogram-2.1.9.jar;D:\maven\local-maven\org\aspectj\aspectjweaver\1.9.7\aspectjweaver-1.9.7.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-amqp\3.2.0\spring-boot-starter-amqp-3.2.0.jar;D:\maven\local-maven\org\springframework\spring-messaging\5.3.27\spring-messaging-5.3.27.jar;D:\maven\local-maven\org\springframework\amqp\spring-rabbit\2.4.12\spring-rabbit-2.4.12.jar;D:\maven\local-maven\org\springframework\amqp\spring-amqp\2.4.12\spring-amqp-2.4.12.jar;D:\maven\local-maven\org\springframework\retry\spring-retry\1.3.4\spring-retry-1.3.4.jar;D:\maven\local-maven\com\rabbitmq\amqp-client\5.14.2\amqp-client-5.14.2.jar;E:\code\java\idea\big-market\big-market-api\target\classes;D:\maven\local-maven\jakarta\validation\jakarta.validation-api\2.0.2\jakarta.validation-api-2.0.2.jar;D:\maven\local-maven\cn\bugstack\middleware\db-router-spring-boot-starter\1.0.2\db-router-spring-boot-starter-1.0.2.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-aop\2.7.12\spring-boot-starter-aop-2.7.12.jar;D:\maven\local-maven\org\mybatis\spring\boot\mybatis-spring-boot-starter\2.1.4\mybatis-spring-boot-starter-2.1.4.jar;D:\maven\local-maven\org\mybatis\spring\boot\mybatis-spring-boot-autoconfigure\2.1.4\mybatis-spring-boot-autoconfigure-2.1.4.jar;D:\maven\local-maven\org\mybatis\mybatis\3.5.6\mybatis-3.5.6.jar;D:\maven\local-maven\commons-beanutils\commons-beanutils\1.9.4\commons-beanutils-1.9.4.jar;D:\maven\local-maven\commons-logging\commons-logging\1.2\commons-logging-1.2.jar;D:\maven\local-maven\commons-collections\commons-collections\3.2.2\commons-collections-3.2.2.jar;D:\maven\local-maven\commons-lang\commons-lang\2.6\commons-lang-2.6.jar;D:\maven\local-maven\org\springframework\spring-tx\5.3.27\spring-tx-5.3.27.jar;E:\code\java\idea\big-market\big-market-types\target\classes;D:\maven\local-maven\com\thoughtworks\xstream\xstream\1.4.10\xstream-1.4.10.jar;D:\maven\local-maven\xmlpull\xmlpull\1.1.3.1\xmlpull-1.1.3.1.jar;D:\maven\local-maven\xpp3\xpp3_min\1.1.4c\xpp3_min-1.1.4c.jar;D:\maven\local-maven\dom4j\dom4j\1.6.1\dom4j-1.6.1.jar;D:\maven\local-maven\xml-apis\xml-apis\1.0.b2\xml-apis-1.0.b2.jar;E:\code\java\idea\big-market\big-market-domain\target\classes;D:\maven\local-maven\org\springframework\boot\spring-boot-actuator-autoconfigure\2.7.12\spring-boot-actuator-autoconfigure-2.7.12.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-actuator\2.7.12\spring-boot-actuator-2.7.12.jar;E:\code\java\idea\big-market\big-market-infrastructure\target\classes;D:\maven\local-maven\org\redisson\redisson-spring-boot-starter\3.23.4\redisson-spring-boot-starter-3.23.4.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-actuator\2.7.12\spring-boot-starter-actuator-2.7.12.jar;D:\maven\local-maven\io\micrometer\micrometer-core\1.9.11\micrometer-core-1.9.11.jar;D:\maven\local-maven\org\latencyutils\LatencyUtils\2.0.3\LatencyUtils-2.0.3.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-data-redis\2.7.12\spring-boot-starter-data-redis-2.7.12.jar;D:\maven\local-maven\org\springframework\data\spring-data-redis\2.7.12\spring-data-redis-2.7.12.jar;D:\maven\local-maven\org\springframework\data\spring-data-keyvalue\2.7.12\spring-data-keyvalue-2.7.12.jar;D:\maven\local-maven\org\springframework\data\spring-data-commons\2.7.12\spring-data-commons-2.7.12.jar;D:\maven\local-maven\org\springframework\spring-oxm\5.3.27\spring-oxm-5.3.27.jar;D:\maven\local-maven\org\redisson\redisson\3.23.4\redisson-3.23.4.jar;D:\maven\local-maven\javax\cache\cache-api\1.1.1\cache-api-1.1.1.jar;D:\maven\local-maven\io\projectreactor\reactor-core\3.4.29\reactor-core-3.4.29.jar;D:\maven\local-maven\org\reactivestreams\reactive-streams\1.0.4\reactive-streams-1.0.4.jar;D:\maven\local-maven\io\reactivex\rxjava3\rxjava\3.1.6\rxjava-3.1.6.jar;D:\maven\local-maven\org\jboss\marshalling\jboss-marshalling\2.0.11.Final\jboss-marshalling-2.0.11.Final.jar;D:\maven\local-maven\org\jboss\marshalling\jboss-marshalling-river\2.0.11.Final\jboss-marshalling-river-2.0.11.Final.jar;D:\maven\local-maven\com\esotericsoftware\kryo\5.5.0\kryo-5.5.0.jar;D:\maven\local-maven\com\esotericsoftware\reflectasm\1.11.9\reflectasm-1.11.9.jar;D:\maven\local-maven\com\esotericsoftware\minlog\1.3.1\minlog-1.3.1.jar;D:\maven\local-maven\com\fasterxml\jackson\dataformat\jackson-dataformat-yaml\2.13.5\jackson-dataformat-yaml-2.13.5.jar;D:\maven\local-maven\org\jodd\jodd-bean\5.1.6\jodd-bean-5.1.6.jar;D:\maven\local-maven\org\jodd\jodd-core\5.1.6\jodd-core-5.1.6.jar;D:\maven\local-maven\org\redisson\redisson-spring-data-31\3.23.4\redisson-spring-data-31-3.23.4.jar;D:\Program Files (x86)\IntelliJ IDEA 2023.1.7\lib\idea_rt.jar;C:\Users\14783\AppData\Local\JetBrains\IntelliJIdea2023.1\captureAgent\debugger-agent.jar
24-11-27.11:47:05.988 [main            ] INFO  ZooKeeper              - Client environment:java.library.path=C:\Program Files\Java\jdk1.8.0_321\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;D:\Program Files (x86)\Ruby33-x64\bin;C:\Program Files (x86)\VMware\VMware Workstation\bin\;C:\Program Files (x86)\Common Files\Oracle\Java\java8path;C:\Program Files (x86)\Common Files\Oracle\Java\javapath;C:\Program Files\Java\jdk1.8.0_321\bin;E:\software\mysql\mysql8.0\mysql-8.0.39-winx64\bin;C:\Windows\system32;E:\software\mysql\mysql5.7\mysql-5.7.30-winx64\bin;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Windows\System32\OpenSSH\;C:\Program Files\dotnet\;D:\maven\apache-maven-3.9.9\bin;E:\software\Git\cmd;E:\software\redis-windows;E:\software\nvm\nvm;E:\software\nvm\nodejs;D:\gradle\gradle-8.10.2\bin;E:\software\giff\git-cliff-2.6.1\bin;D:\Program Files (x86)\Git LFS;C:\Program Files (x86)\Windows Kits\10\Windows Performance Toolkit\;C:\Program Files (x86)\Windows Kits\10\Microsoft Application Virtualization\Sequencer\;C:\Program Files\Docker\Docker\resources\bin;C:\Windows\system32;C:\Program Files (x86)\VMware\VMware Workstation\bin\;C:\Program Files (x86)\Common Files\Oracle\Java\java8path;C:\Program Files (x86)\Common Files\Oracle\Java\javapath;C:\Program Files\Java\jdk1.8.0_321\bin;E:\software\mysql\mysql8.0\mysql-8.0.39-winx64\bin;E:\software\mysql\mysql5.7\mysql-5.7.30-winx64\bin;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Windows\System32\OpenSSH\;C:\Program Files\dotnet\;D:\maven\apache-maven-3.9.9\bin;E:\software\Git\cmd;E:\software\redis-windows;E:\software\nvm\nvm;E:\software\nvm\nodejs;D:\gradle\gradle-8.10.2\bin;E:\software\giff\git-cliff-2.6.1\bin;C:\Program Files (x86)\VMware\VMware Workstation\bin\;C:\Program Files (x86)\Common Files\Oracle\Java\java8path;C:\Program Files (x86)\Common Files\Oracle\Java\javapath;C:\Program Files\Java\jdk1.8.0_321\bin;E:\software\mysql\mysql8.0\mysql-8.0.39-winx64\bin;C:\Windows\system32;E:\software\mysql\mysql5.7\mysql-5.7.30-winx64\bin;C:\Windows;C:\Windows\System32\Wbem;C:\Windo;E:\software\Fiddler;;.
24-11-27.11:47:05.988 [main            ] INFO  ZooKeeper              - Client environment:java.io.tmpdir=C:\Users\14783\AppData\Local\Temp\
24-11-27.11:47:05.988 [main            ] INFO  ZooKeeper              - Client environment:java.compiler=<NA>
24-11-27.11:47:05.988 [main            ] INFO  ZooKeeper              - Client environment:os.name=Windows 11
24-11-27.11:47:05.988 [main            ] INFO  ZooKeeper              - Client environment:os.arch=amd64
24-11-27.11:47:05.988 [main            ] INFO  ZooKeeper              - Client environment:os.version=10.0
24-11-27.11:47:05.988 [main            ] INFO  ZooKeeper              - Client environment:user.name=14783
24-11-27.11:47:05.988 [main            ] INFO  ZooKeeper              - Client environment:user.home=C:\Users\14783
24-11-27.11:47:05.988 [main            ] INFO  ZooKeeper              - Client environment:user.dir=E:\code\java\idea\big-market
24-11-27.11:47:05.988 [main            ] INFO  ZooKeeper              - Client environment:os.memory.free=246MB
24-11-27.11:47:05.989 [main            ] INFO  ZooKeeper              - Client environment:os.memory.max=3609MB
24-11-27.11:47:05.989 [main            ] INFO  ZooKeeper              - Client environment:os.memory.total=418MB
24-11-27.11:47:05.993 [main            ] INFO  ZooKeeper              - Initiating client connection, connectString=117.72.36.124:2181 sessionTimeout=30000 watcher=org.apache.curator.ConnectionState@380fdcf2
24-11-27.11:47:05.996 [main            ] INFO  X509Util               - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
24-11-27.11:47:06.006 [main            ] INFO  ClientCnxnSocket       - jute.maxbuffer value is 1048575 Bytes
24-11-27.11:47:06.010 [main            ] INFO  ClientCnxn             - zookeeper.request.timeout value is 0. feature enabled=false
24-11-27.11:47:06.017 [main            ] INFO  CuratorFrameworkImpl   - Default schema
24-11-27.11:47:06.024 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'zookeeperClient' of type [org.apache.curator.framework.imps.CuratorFrameworkImpl] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-11-27.11:47:17.581 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Opening socket connection to server 117.72.36.124/117.72.36.124:2181.
24-11-27.11:47:17.581 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - SASL config status: Will not attempt to authenticate using SASL (unknown error)
24-11-27.11:47:17.617 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Socket connection established, initiating session, client: /10.224.3.20:64500, server: 117.72.36.124/117.72.36.124:2181
24-11-27.11:47:17.650 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Session establishment complete on server 117.72.36.124/117.72.36.124:2181, session id = 0x100003791620008, negotiated timeout = 30000
24-11-27.11:47:17.655 [main-EventThread] INFO  ConnectionStateManager - State change: CONNECTED
24-11-27.11:47:17.691 [main-EventThread] INFO  EnsembleTracker        - New config event received: {}
24-11-27.11:47:17.691 [main-EventThread] INFO  EnsembleTracker        - New config event received: {}
24-11-27.11:47:18.033 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-11-27.11:47:18.042 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-11-27.11:47:18.042 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-11-27.11:47:18.042 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-11-27.11:47:18.198 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-11-27.11:47:18.198 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 15917 ms
24-11-27.11:47:18.646 [main            ] INFO  DubboConfigBeanInitializer - loading dubbo config beans ...
24-11-27.11:47:18.649 [main            ] INFO  DubboConfigBeanInitializer - dubbo config beans are loaded.
24-11-27.11:47:18.687 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] No value is configured in the registry, the DynamicConfigurationFactory extension[name : nacos] supports as the config center, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:18.688 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] The registry[<dubbo:registry id="nacos-registry" address="nacos://117.72.36.124:8848" protocol="nacos" port="8848" />] will be used as the config center, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:18.692 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] use registry as config-center: <dubbo:config-center highestPriority="false" id="config-center-nacos-117.72.36.124-8848" address="nacos://117.72.36.124:8848" protocol="nacos" port="8848" />, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:18.737 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
24-11-27.11:47:18.737 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
24-11-27.11:47:20.730 [main            ] WARN  ConfigurationUtils     -  [DUBBO] Config center was specified, but no config item found., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:20.730 [main            ] WARN  ConfigurationUtils     -  [DUBBO] Config center was specified, but no config item found., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:20.758 [main            ] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.0] has been initialized!, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:20.761 [main            ] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.1] has been initialized!, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:20.765 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] No value is configured in the registry, the MetadataReportFactory extension[name : nacos] supports as the metadata center, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:20.765 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] The registry[<dubbo:registry id="nacos-registry" address="nacos://117.72.36.124:8848" protocol="nacos" port="8848" />] will be used as the metadata center, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:20.768 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] use registry as metadata-center: <dubbo:metadata-report id="nacos-registry" address="nacos://117.72.36.124:8848" protocol="nacos" port="8848" />, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:20.840 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
24-11-27.11:47:20.840 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
24-11-27.11:47:20.840 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] Dubbo Application[1.1](big-market) has been initialized!, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:20.924 [main            ] INFO  DCCValueBeanFactory    - DCC 节点监听 设置配置 /big-market-dcc/config/rateLimiterSwitch rateLimiterSwitch 172.18.144.1
24-11-27.11:47:21.188 [main            ] INFO  Version                - Redisson 3.23.4
24-11-27.11:47:21.703 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.36.124/117.72.36.124:6379
24-11-27.11:47:22.188 [redisson-netty-2-23] INFO  MasterConnectionPool   - 10 connections initialized for 117.72.36.124/117.72.36.124:6379
24-11-27.11:47:23.746 [main            ] INFO  DCCValueBeanFactory    - DCC 节点监听 设置配置 /big-market-dcc/config/degradeSwitch degradeSwitch 172.18.144.1
24-11-27.11:47:23.794 [main            ] INFO  XxlJobAutoConfig       - >>>>>>>>>>> xxl-job config init.
24-11-27.11:47:26.526 [main            ] WARN  LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
24-11-27.11:47:26.535 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-27.11:47:26.664 [main            ] INFO  XxlJobExecutor         - >>>>>>>>>>> xxl-job register jobhandler success, name:SendMessageTaskJob_DB1, jobHandler:com.xxl.job.core.handler.impl.MethodJobHandler@6230a15a[class cn.wenzhuo4657.BigMarket.trigger.job.SendMessageTaskJob#exec_db01]
24-11-27.11:47:26.664 [main            ] INFO  XxlJobExecutor         - >>>>>>>>>>> xxl-job register jobhandler success, name:UpdateActivitySkuStockJob, jobHandler:com.xxl.job.core.handler.impl.MethodJobHandler@7225f871[class cn.wenzhuo4657.BigMarket.trigger.job.UpdateActivitySkuStockJob#exec]
24-11-27.11:47:26.664 [main            ] INFO  XxlJobExecutor         - >>>>>>>>>>> xxl-job register jobhandler success, name:updateAwardStockJob, jobHandler:com.xxl.job.core.handler.impl.MethodJobHandler@1bff4cb9[class cn.wenzhuo4657.BigMarket.trigger.job.UpdateAwardStockJob#exec]
24-11-27.11:47:26.736 [Thread-72       ] INFO  EmbedServer            - >>>>>>>>>>> xxl-job remoting server start success, nettype = class com.xxl.job.core.server.EmbedServer, port = 9999
24-11-27.11:47:26.802 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-11-27.11:47:26.819 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-11-27.11:47:27.392 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [117.72.36.124:5672]
24-11-27.11:47:27.527 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#6b9b9cb9:0/SimpleConnection@1940bacd [delegate=amqp://admin@117.72.36.124:5672/, localPort= 64709]
24-11-27.11:47:28.242 [main            ] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.1] is starting., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:28.242 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] Dubbo Application[1.1](big-market) is starting., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:28.363 [main            ] WARN  ServiceConfig          -  [DUBBO] Use random available port(20880) for protocol dubbo, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:28.409 [main            ] INFO  ServiceConfig          -  [DUBBO] Export dubbo service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService to local registry url : injvm://127.0.0.1/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&side=provider&timestamp=1732679248359&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:28.409 [main            ] INFO  ServiceConfig          -  [DUBBO] Register dubbo service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService url dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679248359&version=1.0 to registry 117.72.36.124:8848, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:28.412 [main            ] INFO  QosProtocolWrapper     -  [DUBBO] qos won't be started because it is disabled. Please check dubbo.application.qos.enable is configured either in system property, dubbo.properties or XML/spring-boot configuration., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:28.539 [main            ] INFO  AbstractServer         -  [DUBBO] Start NettyServer bind /0.0.0.0:20880, export /172.18.144.1:20880, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:28.575 [main            ] INFO  MetaCacheManager       -  [DUBBO] Successfully loaded mapping cache from file .metadata.nacos117.72.36.124:8848, entries 0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:28.596 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
24-11-27.11:47:28.596 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
24-11-27.11:47:28.804 [main            ] INFO  MappingCacheManager    -  [DUBBO] Successfully loaded mapping cache from file .mapping, entries 0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:28.815 [main            ] INFO  MigrationRuleListener  -  [DUBBO] Listening for migration rules on dataId big-market.migration, group DUBBO_SERVICEDISCOVERY_MIGRATION, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:28.847 [main            ] INFO  ServiceConfig          -  [DUBBO] Register dubbo service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService url dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679248359&version=1.0 to registry 117.72.36.124:8848, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:28.849 [main            ] INFO  QosProtocolWrapper     -  [DUBBO] qos won't be started because it is disabled. Please check dubbo.application.qos.enable is configured either in system property, dubbo.properties or XML/spring-boot configuration., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:28.885 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
24-11-27.11:47:28.885 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
24-11-27.11:47:29.077 [main            ] INFO  NacosRegistry          -  [DUBBO] Register: dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=15524&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679248359&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:29.112 [main            ] INFO  NacosRegistry          -  [DUBBO] Subscribe: provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679248359&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:29.180 [main            ] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679248359&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:29.189 [DubboSaveMetadataReport-thread-1] INFO  NacosMetadataReport    -  [DUBBO] store provider metadata. Identifier : org.apache.dubbo.metadata.report.identifier.MetadataIdentifier@7a647738; definition: FullServiceDefinition{parameters=org.apache.dubbo.common.url.component.URLParam$URLParamMap@163e89d4} ServiceDefinition [canonicalName=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService, codeSource=file:/E:/code/java/idea/big-market/big-market-api/target/classes/, methods=[MethodDefinition [name=querySkuProductListByActivityId, parameterTypes=[java.lang.Long], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=queryUserCreditAccount, parameterTypes=[java.lang.String], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=creditPayExchangeSku, parameterTypes=[cn.wenzhuo4657.BigMarket.tigger.api.dto.SkuProductShopCartRequestDTO], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=calendarSignRebate, parameterTypes=[java.lang.String], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=queryUserActivityAccount, parameterTypes=[cn.wenzhuo4657.BigMarket.tigger.api.dto.UserActivityAccountRequestDTO], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=isCalendarSignRebate, parameterTypes=[java.lang.String], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=draw, parameterTypes=[cn.wenzhuo4657.BigMarket.tigger.api.dto.ActivityDrawRequestDTO], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=armory, parameterTypes=[java.lang.Long], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response]]], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:29.421 [main            ] INFO  ServiceConfig          -  [DUBBO] Successfully registered interface application mapping for service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService:1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:29.433 [main            ] INFO  ServiceConfig          -  [DUBBO] Export dubbo service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService to local registry url : injvm://127.0.0.1/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&side=provider&timestamp=1732679249423&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:29.434 [main            ] INFO  ServiceConfig          -  [DUBBO] Register dubbo service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService url dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679249423&version=1.0 to registry 117.72.36.124:8848, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:29.469 [main            ] INFO  ServiceConfig          -  [DUBBO] Register dubbo service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService url dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679249423&version=1.0 to registry 117.72.36.124:8848, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:29.633 [Dubbo-framework-registry-notification-0-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679248359&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:29.668 [main            ] INFO  NacosRegistry          -  [DUBBO] Register: dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=15524&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679249423&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:29.698 [main            ] INFO  NacosRegistry          -  [DUBBO] Subscribe: provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679249423&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:29.759 [main            ] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679249423&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:29.759 [DubboSaveMetadataReport-thread-1] INFO  NacosMetadataReport    -  [DUBBO] store provider metadata. Identifier : org.apache.dubbo.metadata.report.identifier.MetadataIdentifier@1ea5c032; definition: FullServiceDefinition{parameters=org.apache.dubbo.common.url.component.URLParam$URLParamMap@17a6529d} ServiceDefinition [canonicalName=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService, codeSource=file:/E:/code/java/idea/big-market/big-market-api/target/classes/, methods=[MethodDefinition [name=queryRaffleStrategyRuleWeight, parameterTypes=[cn.wenzhuo4657.BigMarket.tigger.api.dto.RaffleStrategyRuleWeightRequestDTO], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=queryRaffleAwardList, parameterTypes=[cn.wenzhuo4657.BigMarket.tigger.api.dto.RaffleAwardListRequestDTO], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=strategyArmory, parameterTypes=[java.lang.Long], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=randomRaffle, parameterTypes=[cn.wenzhuo4657.BigMarket.tigger.api.dto.RaffleStrategyRequestDTO], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response]]], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:29.791 [main            ] INFO  ServiceConfig          -  [DUBBO] Successfully registered interface application mapping for service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService:1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:29.791 [main            ] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.0] is starting., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:29.791 [main            ] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.0] has started., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:29.791 [main            ] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.1] has started., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:29.793 [main            ] INFO  ConfigurableMetadataServiceExporter -  [DUBBO] Metadata Service Port hasn't been set will use default protocol defined in protocols., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:29.793 [main            ] INFO  ConfigurableMetadataServiceExporter -  [DUBBO] Using dubbo protocol to export metadata service on port 20880, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:29.843 [main            ] INFO  ServiceConfig          -  [DUBBO] Export dubbo service org.apache.dubbo.metadata.MetadataService to local registry url : injvm://127.0.0.1/org.apache.dubbo.metadata.MetadataService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&connections=1&corethreads=2&delay=0&deprecated=false&dubbo=2.0.2&dynamic=true&executes=100&generic=false&getAndListenInstanceMetadata.1.callback=true&getAndListenInstanceMetadata.return=true&getAndListenInstanceMetadata.sent=true&group=big-market&interface=org.apache.dubbo.metadata.MetadataService&methods=getMetadataURL,isMetadataService,getAndListenInstanceMetadata,getExportedURLs,serviceName,getSubscribedURLs,version,getExportedServiceURLs,exportInstanceMetadata,getMetadataInfo,toSortedStrings,getMetadataInfos,getServiceDefinition,getInstanceMetadataChangedListenerMap&pid=15524&qos.enable=false&register=false&release=3.0.9&revision=3.0.9&side=provider&threadpool=cached&threads=100&timestamp=1732679249830&version=1.0.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:29.843 [main            ] INFO  ServiceConfig          -  [DUBBO] Export dubbo service org.apache.dubbo.metadata.MetadataService to url dubbo://172.18.144.1:20880/org.apache.dubbo.metadata.MetadataService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&connections=1&corethreads=2&delay=0&deprecated=false&dubbo=2.0.2&dynamic=true&executes=100&generic=false&getAndListenInstanceMetadata.1.callback=true&getAndListenInstanceMetadata.return=true&getAndListenInstanceMetadata.sent=true&group=big-market&interface=org.apache.dubbo.metadata.MetadataService&methods=getMetadataURL,isMetadataService,getAndListenInstanceMetadata,getExportedURLs,serviceName,getSubscribedURLs,version,getExportedServiceURLs,exportInstanceMetadata,getMetadataInfo,toSortedStrings,getMetadataInfos,getServiceDefinition,getInstanceMetadataChangedListenerMap&pid=15524&qos.enable=false&register=false&release=3.0.9&revision=3.0.9&service-name-mapping=true&side=provider&threadpool=cached&threads=100&timestamp=1732679249830&version=1.0.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:29.908 [main            ] INFO  MigrationRuleListener  -  [DUBBO] Listening for migration rules on dataId big-market.migration, group DUBBO_SERVICEDISCOVERY_MIGRATION, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:29.940 [main            ] INFO  ServiceConfig          -  [DUBBO] Export dubbo service org.apache.dubbo.metadata.MetadataService to url dubbo://172.18.144.1:20880/org.apache.dubbo.metadata.MetadataService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&connections=1&corethreads=2&delay=0&deprecated=false&dubbo=2.0.2&dynamic=true&executes=100&generic=false&getAndListenInstanceMetadata.1.callback=true&getAndListenInstanceMetadata.return=true&getAndListenInstanceMetadata.sent=true&group=big-market&interface=org.apache.dubbo.metadata.MetadataService&methods=getMetadataURL,isMetadataService,getAndListenInstanceMetadata,getExportedURLs,serviceName,getSubscribedURLs,version,getExportedServiceURLs,exportInstanceMetadata,getMetadataInfo,toSortedStrings,getMetadataInfos,getServiceDefinition,getInstanceMetadataChangedListenerMap&pid=15524&qos.enable=false&register=false&release=3.0.9&revision=3.0.9&service-name-mapping=true&side=provider&threadpool=cached&threads=100&timestamp=1732679249830&version=1.0.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:30.109 [main            ] INFO  NacosRegistry          -  [DUBBO] Subscribe: provider://172.18.144.1:20880/org.apache.dubbo.metadata.MetadataService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&connections=1&corethreads=2&delay=0&deprecated=false&dubbo=2.0.2&dynamic=true&executes=100&generic=false&getAndListenInstanceMetadata.1.callback=true&getAndListenInstanceMetadata.return=true&getAndListenInstanceMetadata.sent=true&group=big-market&interface=org.apache.dubbo.metadata.MetadataService&methods=getMetadataURL,isMetadataService,getAndListenInstanceMetadata,getExportedURLs,serviceName,getSubscribedURLs,version,getExportedServiceURLs,exportInstanceMetadata,getMetadataInfo,toSortedStrings,getMetadataInfos,getServiceDefinition,getInstanceMetadataChangedListenerMap&pid=15524&qos.enable=false&register=false&release=3.0.9&revision=3.0.9&service-name-mapping=true&side=provider&threadpool=cached&threads=100&timestamp=1732679249830&version=1.0.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:30.138 [main            ] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/org.apache.dubbo.metadata.MetadataService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&connections=1&corethreads=2&delay=0&deprecated=false&dubbo=2.0.2&dynamic=true&executes=100&generic=false&getAndListenInstanceMetadata.1.callback=true&getAndListenInstanceMetadata.return=true&getAndListenInstanceMetadata.sent=true&group=big-market&interface=org.apache.dubbo.metadata.MetadataService&methods=getMetadataURL,isMetadataService,getAndListenInstanceMetadata,getExportedURLs,serviceName,getSubscribedURLs,version,getExportedServiceURLs,exportInstanceMetadata,getMetadataInfo,toSortedStrings,getMetadataInfos,getServiceDefinition,getInstanceMetadataChangedListenerMap&pid=15524&qos.enable=false&register=false&release=3.0.9&revision=3.0.9&service-name-mapping=true&side=provider&threadpool=cached&threads=100&timestamp=1732679249830&version=1.0.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:30.138 [main            ] INFO  ServiceConfig          -  [DUBBO] Successfully registered interface application mapping for service big-market/org.apache.dubbo.metadata.MetadataService:1.0.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:30.138 [main            ] INFO  ConfigurableMetadataServiceExporter -  [DUBBO] The MetadataService exports urls : [dubbo://172.18.144.1:20880/org.apache.dubbo.metadata.MetadataService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&connections=1&corethreads=2&delay=0&deprecated=false&dubbo=2.0.2&dynamic=true&executes=100&generic=false&getAndListenInstanceMetadata.1.callback=true&getAndListenInstanceMetadata.return=true&getAndListenInstanceMetadata.sent=true&group=big-market&interface=org.apache.dubbo.metadata.MetadataService&methods=getMetadataURL,isMetadataService,getAndListenInstanceMetadata,getExportedURLs,serviceName,getSubscribedURLs,version,getExportedServiceURLs,exportInstanceMetadata,getMetadataInfo,toSortedStrings,getMetadataInfos,getServiceDefinition,getInstanceMetadataChangedListenerMap&pid=15524&qos.enable=false&register=false&release=3.0.9&revision=3.0.9&service-name-mapping=true&side=provider&threadpool=cached&threads=100&timestamp=1732679249830&version=1.0.0], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:30.139 [main            ] INFO  ServiceInstanceMetadataUtils -  [DUBBO] Start registering instance address to registry., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:30.150 [main            ] INFO  MetadataInfo           -  [DUBBO] metadata revision changed: null -> 90f394fe9398a29aa834a5c5fd7c1d1e, app: big-market, services: 2, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:30.183 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] Dubbo Application[1.1](big-market) is ready., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:30.189 [main            ] INFO  Application            - Started Application in 29.013 seconds (JVM running for 30.52)
24-11-27.11:47:30.217 [Dubbo-framework-registry-notification-2-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679249423&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:47:30.719 [RMI TCP Connection(7)-172.18.144.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-27.11:47:31.199 [RMI TCP Connection(9)-172.18.144.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-11-27.11:47:31.199 [RMI TCP Connection(9)-172.18.144.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-11-27.11:47:31.200 [RMI TCP Connection(9)-172.18.144.1] INFO  DispatcherServlet      - Completed initialization in 1 ms
24-11-27.11:47:31.252 [RMI TCP Connection(7)-172.18.144.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-27.11:47:31.298 [RMI TCP Connection(7)-172.18.144.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-27.11:47:31.732 [RMI TCP Connection(7)-172.18.144.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-27.11:47:36.268 [http-nio-8091-exec-3] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.11:47:36.268 [http-nio-8091-exec-1] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.11:47:36.268 [http-nio-8091-exec-4] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.11:47:36.268 [http-nio-8091-exec-2] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.11:47:36.273 [http-nio-8091-exec-5] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:47:36.273 [http-nio-8091-exec-6] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:47:36.296 [http-nio-8091-exec-1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-27.11:47:36.381 [http-nio-8091-exec-6] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:47:36.404 [http-nio-8091-exec-6] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:47:36.436 [http-nio-8091-exec-6] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:47:36.438 [http-nio-8091-exec-5] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:47:36.441 [http-nio-8091-exec-7] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:47:36.444 [http-nio-8091-exec-8] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:47:36.472 [http-nio-8091-exec-8] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:47:36.479 [http-nio-8091-exec-9] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:47:36.507 [http-nio-8091-exec-9] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:47:36.511 [http-nio-8091-exec-10] INFO  RaffleActivityController - 查询sku商品集合开始 activityId:100301
24-11-27.11:47:36.527 [http-nio-8091-exec-7] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:47:36.531 [http-nio-8091-exec-11] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.11:47:36.667 [http-nio-8091-exec-1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-27.11:47:36.767 [http-nio-8091-exec-1] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.11:47:36.773 [http-nio-8091-exec-12] INFO  RaffleActivityController - 查询sku商品集合开始 activityId:100301
24-11-27.11:47:36.806 [http-nio-8091-exec-11] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":104}],"info":"调用成功"}
24-11-27.11:47:36.811 [http-nio-8091-exec-13] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.11:47:36.815 [http-nio-8091-exec-3] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.11:47:36.856 [http-nio-8091-exec-2] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.11:47:36.885 [http-nio-8091-exec-4] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.11:47:36.944 [http-nio-8091-exec-13] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":104}],"info":"调用成功"}
24-11-27.11:47:36.953 [http-nio-8091-exec-10] INFO  RaffleActivityController - 查询sku商品集合完成 activityId:100301 skuProductResponseDTOS:[{"activityCount":{"dayCount":100,"monthCount":100,"totalCount":100},"activityCountId":11101,"productAmount":1.68,"sku":9011,"stockCount":100000,"stockCountSurplus":99886}]
24-11-27.11:47:36.976 [http-nio-8091-exec-12] INFO  RaffleActivityController - 查询sku商品集合完成 activityId:100301 skuProductResponseDTOS:[{"activityCount":{"dayCount":100,"monthCount":100,"totalCount":100},"activityCountId":11101,"productAmount":1.68,"sku":9011,"stockCount":100000,"stockCountSurplus":99886}]
24-11-27.11:47:39.617 [http-nio-8091-exec-14] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.11:51:18.115 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=3m46s759ms73µs300ns).
24-11-27.11:51:18.118 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=3m46s278ms681µs).
24-11-27.11:51:18.118 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=3m41s336ms414µs600ns).
24-11-27.11:51:18.118 [http-nio-8091-exec-14] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:衸𦑆𤺆𪖯𧢴𩢋
24-11-27.11:51:18.118 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Client session timed out, have not heard from server in 226268ms for session id 0x100003791620008
24-11-27.11:51:18.128 [AMQP Connection 117.72.36.124:5672] WARN  ForgivingExceptionHandler - An unexpected connection driver error occurred (Exception message: Connection reset)
24-11-27.11:51:18.133 [http-nio-8091-exec-14] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.11:51:18.135 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Session 0x100003791620008 for sever 117.72.36.124/117.72.36.124:2181, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
org.apache.zookeeper.ClientCnxn$SessionTimeoutException: Client session timed out, have not heard from server in 226268ms for session id 0x100003791620008
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1230)
24-11-27.11:51:18.248 [main-EventThread] INFO  ConnectionStateManager - State change: SUSPENDED
24-11-27.11:51:18.398 [http-nio-8091-exec-14] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:428546969197
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [E:\code\java\idea\big-market\big-market-app\target\classes\mybatis\mapper\UserCreditOrderDao.xml]
### The error may involve cn.wenzhuo4657.BigMarket.infrastructure.persistent.dao.UserCreditOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values(                   ?,?,?,?,?,?,now(),now()               )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy164.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:96)
	at com.sun.proxy.$Proxy196.insert(Unknown Source)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:92)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:84)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$b71add64.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$1083dd1f.saveUserCreditTradeOrder(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.credit.service.adjust.CreditAdjustService.createOrder(CreditAdjustService.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:363)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$95cfa6d9.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor145.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy240.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy239.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:54)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 84 common frames omitted
24-11-27.11:51:18.481 [http-nio-8091-exec-14] INFO  CreditAdjustService    - 增加账户积分额度完成 userId:xiaofuge orderId:428546969197
24-11-27.11:51:18.481 [http-nio-8091-exec-14] INFO  RaffleActivityController - 积分兑换商品，支付订单完成  userId:xiaofuge sku:9011 orderId:428546969197
24-11-27.11:51:19.126 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  SimpleMessageListenerContainer - Restarting Consumer@684001e6: tags=[[amq.ctag-JeRSUQwcDCTYOBeH8SPl_A]], channel=Cached Rabbit Channel: AMQChannel(amqp://admin@117.72.36.124:5672/,1), conn: Proxy@72412c3d Shared Rabbit Connection: SimpleConnection@1940bacd [delegate=amqp://admin@117.72.36.124:5672/, localPort= 64709], acknowledgeMode=AUTO local queue size=0
24-11-27.11:51:19.126 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-1] INFO  SimpleMessageListenerContainer - Restarting Consumer@7d28d525: tags=[[amq.ctag-r7z4Wjxo6nbM96QkiNnjaA]], channel=Cached Rabbit Channel: AMQChannel(amqp://admin@117.72.36.124:5672/,4), conn: Proxy@72412c3d Shared Rabbit Connection: SimpleConnection@1940bacd [delegate=amqp://admin@117.72.36.124:5672/, localPort= 64709], acknowledgeMode=AUTO local queue size=0
24-11-27.11:51:19.126 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SimpleMessageListenerContainer - Restarting Consumer@267093ea: tags=[[amq.ctag-Xz0j1YLOzjbOboCi-kANBg]], channel=Cached Rabbit Channel: AMQChannel(amqp://admin@117.72.36.124:5672/,2), conn: Proxy@72412c3d Shared Rabbit Connection: SimpleConnection@1940bacd [delegate=amqp://admin@117.72.36.124:5672/, localPort= 64709], acknowledgeMode=AUTO local queue size=0
24-11-27.11:51:19.126 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  SimpleMessageListenerContainer - Restarting Consumer@7138e064: tags=[[amq.ctag-veX3n5A6UZ9CgkzVhJFNcw]], channel=Cached Rabbit Channel: AMQChannel(amqp://admin@117.72.36.124:5672/,3), conn: Proxy@72412c3d Shared Rabbit Connection: SimpleConnection@1940bacd [delegate=amqp://admin@117.72.36.124:5672/, localPort= 64709], acknowledgeMode=AUTO local queue size=0
24-11-27.11:51:19.132 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  CachingConnectionFactory - Attempting to connect to: [117.72.36.124:5672]
24-11-27.11:51:19.167 [http-nio-8091-exec-20] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:51:19.168 [http-nio-8091-exec-21] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:51:19.168 [http-nio-8091-exec-22] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:51:19.168 [http-nio-8091-exec-23] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.11:51:19.221 [http-nio-8091-exec-21] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:51:19.228 [http-nio-8091-exec-22] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:51:19.244 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#6b9b9cb9:1/SimpleConnection@4bc0d6a [delegate=amqp://admin@117.72.36.124:5672/, localPort= 65028]
24-11-27.11:51:19.278 [http-nio-8091-exec-20] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:51:19.319 [http-nio-8091-exec-23] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":104}],"info":"调用成功"}
24-11-27.11:51:20.393 [Dubbo-framework-registry-notification-0-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679248359&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:51:20.393 [Dubbo-framework-registry-notification-2-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679249423&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:51:20.966 [http-nio-8091-exec-24] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.11:51:43.230 [http-nio-8091-exec-24] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:衸𦑆𤺆𪖯𧢴𩢋
24-11-27.11:51:43.230 [http-nio-8091-exec-24] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.11:51:43.426 [http-nio-8091-exec-24] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:927602580183
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [E:\code\java\idea\big-market\big-market-app\target\classes\mybatis\mapper\UserCreditOrderDao.xml]
### The error may involve cn.wenzhuo4657.BigMarket.infrastructure.persistent.dao.UserCreditOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values(                   ?,?,?,?,?,?,now(),now()               )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy164.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:96)
	at com.sun.proxy.$Proxy196.insert(Unknown Source)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:92)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:84)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$b71add64.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$1083dd1f.saveUserCreditTradeOrder(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.credit.service.adjust.CreditAdjustService.createOrder(CreditAdjustService.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:363)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$95cfa6d9.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor145.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy240.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy239.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:54)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 84 common frames omitted
24-11-27.11:51:43.508 [http-nio-8091-exec-24] INFO  CreditAdjustService    - 增加账户积分额度完成 userId:xiaofuge orderId:927602580183
24-11-27.11:51:43.509 [http-nio-8091-exec-24] INFO  RaffleActivityController - 积分兑换商品，支付订单完成  userId:xiaofuge sku:9011 orderId:927602580183
24-11-27.11:51:43.772 [Dubbo-framework-registry-notification-0-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679248359&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:51:43.873 [Dubbo-framework-registry-notification-2-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679249423&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:51:44.187 [http-nio-8091-exec-26] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:51:44.187 [http-nio-8091-exec-27] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:51:44.188 [http-nio-8091-exec-28] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.11:51:44.188 [http-nio-8091-exec-25] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:51:44.242 [http-nio-8091-exec-26] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:51:44.244 [http-nio-8091-exec-27] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:51:44.301 [http-nio-8091-exec-25] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:51:44.332 [http-nio-8091-exec-28] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":104}],"info":"调用成功"}
24-11-27.11:51:45.060 [http-nio-8091-exec-29] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.11:51:47.170 [http-nio-8091-exec-29] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:衸𦑆𤺆𪖯𧢴𩢋
24-11-27.11:51:47.170 [http-nio-8091-exec-29] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.11:51:47.332 [http-nio-8091-exec-29] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:440750844980
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [E:\code\java\idea\big-market\big-market-app\target\classes\mybatis\mapper\UserCreditOrderDao.xml]
### The error may involve cn.wenzhuo4657.BigMarket.infrastructure.persistent.dao.UserCreditOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values(                   ?,?,?,?,?,?,now(),now()               )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy164.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:96)
	at com.sun.proxy.$Proxy196.insert(Unknown Source)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:92)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:84)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$b71add64.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$1083dd1f.saveUserCreditTradeOrder(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.credit.service.adjust.CreditAdjustService.createOrder(CreditAdjustService.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:363)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$95cfa6d9.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor145.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy240.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy239.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:54)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 84 common frames omitted
24-11-27.11:51:47.417 [http-nio-8091-exec-29] INFO  CreditAdjustService    - 增加账户积分额度完成 userId:xiaofuge orderId:440750844980
24-11-27.11:51:47.417 [http-nio-8091-exec-29] INFO  RaffleActivityController - 积分兑换商品，支付订单完成  userId:xiaofuge sku:9011 orderId:440750844980
24-11-27.11:51:48.249 [Curator-ConnectionStateManager-0] WARN  ConnectionStateManager - Session timeout has elapsed while SUSPENDED. Injecting a session expiration. Elapsed ms: 30001. Adjusted session timeout ms: 30000
24-11-27.11:51:48.255 [Curator-ConnectionStateManager-0] INFO  ZooKeeperTestable      - injectSessionExpiration() called
24-11-27.11:51:48.256 [main-EventThread] WARN  ConnectionState        - Session expired event received
24-11-27.11:51:48.256 [main-EventThread] INFO  ZooKeeper              - Initiating client connection, connectString=117.72.36.124:2181 sessionTimeout=30000 watcher=org.apache.curator.ConnectionState@380fdcf2
24-11-27.11:51:48.262 [main-EventThread] INFO  ClientCnxnSocket       - jute.maxbuffer value is 1048575 Bytes
24-11-27.11:51:48.262 [main-EventThread] INFO  ClientCnxn             - zookeeper.request.timeout value is 0. feature enabled=false
24-11-27.11:51:48.263 [main-EventThread] INFO  ConnectionStateManager - State change: LOST
24-11-27.11:51:48.263 [main-EventThread] INFO  ClientCnxn             - EventThread shut down for session: 0x100003791620008
24-11-27.11:51:48.462 [http-nio-8091-exec-31] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:51:48.462 [http-nio-8091-exec-32] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:51:48.462 [http-nio-8091-exec-33] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.11:51:48.462 [http-nio-8091-exec-30] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:51:48.532 [http-nio-8091-exec-32] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:51:48.532 [http-nio-8091-exec-31] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:51:48.590 [http-nio-8091-exec-30] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:51:48.618 [http-nio-8091-exec-33] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":104},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":104}],"info":"调用成功"}
24-11-27.11:51:50.292 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Opening socket connection to server 117.72.36.124/117.72.36.124:2181.
24-11-27.11:51:50.292 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - SASL config status: Will not attempt to authenticate using SASL (unknown error)
24-11-27.11:51:54.042 [http-nio-8091-exec-34] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.11:55:25.277 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=3m37s151ms697µs600ns).
24-11-27.11:55:25.277 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=3m37s151ms667µs800ns).
24-11-27.11:55:25.277 [AMQP Connection 117.72.36.124:5672] WARN  ForgivingExceptionHandler - An unexpected connection driver error occurred (Exception message: Connection reset)
24-11-27.11:55:25.278 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=3m37s152ms55µs300ns).
24-11-27.11:55:25.279 [http-nio-8091-exec-34] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:衸𦑆𤺆𪖯𧢴𩢋
24-11-27.11:55:25.279 [http-nio-8091-exec-34] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.11:55:25.279 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Opening socket connection to server 117.72.36.124/117.72.36.124:2181.
24-11-27.11:55:25.280 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - SASL config status: Will not attempt to authenticate using SASL (unknown error)
24-11-27.11:55:25.285 [http-nio-8091-exec-41] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:55:25.285 [http-nio-8091-exec-39] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:55:25.285 [http-nio-8091-exec-40] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:55:25.288 [http-nio-8091-exec-35] INFO  RateLimiterAOP         - aop attr xiaofuge
24-11-27.11:55:25.291 [http-nio-8091-exec-35] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
24-11-27.11:55:25.398 [http-nio-8091-exec-39] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":594,"monthCount":660,"monthCountSurplus":594,"totalCount":660,"totalCountSurplus":556}
24-11-27.11:55:25.440 [http-nio-8091-exec-35] INFO  AbstractRaffleActivityPartake - 创建参与活动订单 userId:xiaofuge activityId:100301 userRaffleOrderEntity:null
24-11-27.11:55:25.863 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Socket connection established, initiating session, client: /10.224.3.20:65394, server: 117.72.36.124/117.72.36.124:2181
24-11-27.11:55:25.965 [http-nio-8091-exec-35] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:474282479863
24-11-27.11:55:26.043 [http-nio-8091-exec-34] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:505490170328
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [E:\code\java\idea\big-market\big-market-app\target\classes\mybatis\mapper\UserCreditOrderDao.xml]
### The error may involve cn.wenzhuo4657.BigMarket.infrastructure.persistent.dao.UserCreditOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values(                   ?,?,?,?,?,?,now(),now()               )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy164.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:96)
	at com.sun.proxy.$Proxy196.insert(Unknown Source)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:92)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:84)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$b71add64.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$1083dd1f.saveUserCreditTradeOrder(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.credit.service.adjust.CreditAdjustService.createOrder(CreditAdjustService.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:363)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$95cfa6d9.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '衸?????' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor145.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy240.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy239.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:54)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 84 common frames omitted
24-11-27.11:55:26.105 [http-nio-8091-exec-35] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId:xiaofuge strategyId:100006 ruleModel:rule_blacklist
24-11-27.11:55:26.126 [http-nio-8091-exec-34] INFO  CreditAdjustService    - 增加账户积分额度完成 userId:xiaofuge orderId:505490170328
24-11-27.11:55:26.126 [http-nio-8091-exec-34] INFO  RaffleActivityController - 积分兑换商品，支付订单完成  userId:xiaofuge sku:9011 orderId:505490170328
24-11-27.11:55:26.151 [http-nio-8091-exec-35] INFO  BackListLogicChain     - 抽奖责任链-黑名单放行 userId:xiaofuge strategyId:100006 ruleModel:rule_blacklist
24-11-27.11:55:26.222 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Session establishment complete on server 117.72.36.124/117.72.36.124:2181, session id = 0x100003791620009, negotiated timeout = 30000
24-11-27.11:55:26.223 [main-EventThread] INFO  ConnectionStateManager - State change: RECONNECTED
24-11-27.11:55:26.225 [http-nio-8091-exec-41] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:55:26.231 [http-nio-8091-exec-40] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:55:26.294 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Restarting Consumer@23d54e2a: tags=[[amq.ctag-uAaLV5gdpGlU6XwCbEMrKg]], channel=Cached Rabbit Channel: AMQChannel(amqp://admin@117.72.36.124:5672/,4), conn: Proxy@72412c3d Shared Rabbit Connection: SimpleConnection@4bc0d6a [delegate=amqp://admin@117.72.36.124:5672/, localPort= 65028], acknowledgeMode=AUTO local queue size=0
24-11-27.11:55:26.294 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Restarting Consumer@51ae101d: tags=[[amq.ctag-GdCIVS7WMA3QJ_WeNxqx-w]], channel=Cached Rabbit Channel: AMQChannel(amqp://admin@117.72.36.124:5672/,3), conn: Proxy@72412c3d Shared Rabbit Connection: SimpleConnection@4bc0d6a [delegate=amqp://admin@117.72.36.124:5672/, localPort= 65028], acknowledgeMode=AUTO local queue size=0
24-11-27.11:55:26.294 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Restarting Consumer@3c00e665: tags=[[amq.ctag-P3B7VHchCOkTtMBXBFUT9w]], channel=Cached Rabbit Channel: AMQChannel(amqp://admin@117.72.36.124:5672/,2), conn: Proxy@72412c3d Shared Rabbit Connection: SimpleConnection@4bc0d6a [delegate=amqp://admin@117.72.36.124:5672/, localPort= 65028], acknowledgeMode=AUTO local queue size=0
24-11-27.11:55:26.294 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Restarting Consumer@5b48fff4: tags=[[amq.ctag-5ZGt6sILQ0PaOE3zzm0htA]], channel=Cached Rabbit Channel: AMQChannel(amqp://admin@117.72.36.124:5672/,1), conn: Proxy@72412c3d Shared Rabbit Connection: SimpleConnection@4bc0d6a [delegate=amqp://admin@117.72.36.124:5672/, localPort= 65028], acknowledgeMode=AUTO local queue size=0
24-11-27.11:55:26.296 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-3] INFO  CachingConnectionFactory - Attempting to connect to: [117.72.36.124:5672]
24-11-27.11:55:26.407 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-3] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#6b9b9cb9:2/SimpleConnection@3dd7d0ed [delegate=amqp://admin@117.72.36.124:5672/, localPort= 65407]
24-11-27.11:55:26.494 [http-nio-8091-exec-35] ERROR RaffleActivityController - 活动抽奖失败 userId:xiaofuge activityId:100301
java.lang.NullPointerException: null
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.StrategyRepository.getRateRange(StrategyRepository.java:98)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.StrategyRepository$$FastClassBySpringCGLIB$$43dd791e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.StrategyRepository$$EnhancerBySpringCGLIB$$2ac5d48d.getRateRange(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.strategy.service.armory.StrategyArmoryDispatch.getRandomAwardId(StrategyArmoryDispatch.java:122)
	at cn.wenzhuo4657.BigMarket.domain.strategy.service.rule.chain.impl.DefaultLogicChain.logic(DefaultLogicChain.java:40)
	at cn.wenzhuo4657.BigMarket.domain.strategy.service.rule.chain.impl.BackListLogicChain.logic(BackListLogicChain.java:56)
	at cn.wenzhuo4657.BigMarket.domain.strategy.service.raffle.DefaultRaffleStrategy.raffleLogicChain(DefaultRaffleStrategy.java:46)
	at cn.wenzhuo4657.BigMarket.domain.strategy.service.AbstractRaffleStrategy.performRaffle(AbstractRaffleStrategy.java:45)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:127)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at cn.wenzhuo4657.BigMarket.aop.RateLimiterAOP.doRouter(RateLimiterAOP.java:97)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:634)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:624)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$95cfa6d9.draw(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
24-11-27.11:55:26.564 [main-EventThread] INFO  EnsembleTracker        - New config event received: {}
24-11-27.11:55:27.538 [Dubbo-framework-registry-notification-0-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679248359&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:55:27.538 [Dubbo-framework-registry-notification-2-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679249423&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:55:28.900 [Dubbo-framework-registry-notification-0-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679248359&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:55:28.904 [Dubbo-framework-registry-notification-2-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679249423&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:55:32.710 [http-nio-8091-exec-43] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:55:32.710 [http-nio-8091-exec-44] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:55:32.710 [http-nio-8091-exec-45] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.11:55:32.710 [http-nio-8091-exec-42] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:55:32.763 [http-nio-8091-exec-43] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:55:32.822 [http-nio-8091-exec-42] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.11:55:33.117 [http-nio-8091-exec-44] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:55:33.440 [http-nio-8091-exec-45] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.11:55:36.456 [http-nio-8091-exec-46] INFO  RateLimiterAOP         - aop attr xiaofuge
24-11-27.11:55:36.456 [http-nio-8091-exec-46] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
24-11-27.11:55:36.539 [http-nio-8091-exec-46] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:474282479863
24-11-27.11:55:36.539 [http-nio-8091-exec-46] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId:xiaofuge strategyId:100006 ruleModel:rule_blacklist
24-11-27.11:55:36.596 [http-nio-8091-exec-46] INFO  BackListLogicChain     - 抽奖责任链-黑名单放行 userId:xiaofuge strategyId:100006 ruleModel:rule_blacklist
24-11-27.11:55:36.623 [http-nio-8091-exec-46] ERROR RaffleActivityController - 活动抽奖失败 userId:xiaofuge activityId:100301
java.lang.NullPointerException: null
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.StrategyRepository.getRateRange(StrategyRepository.java:98)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.StrategyRepository$$FastClassBySpringCGLIB$$43dd791e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.StrategyRepository$$EnhancerBySpringCGLIB$$2ac5d48d.getRateRange(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.strategy.service.armory.StrategyArmoryDispatch.getRandomAwardId(StrategyArmoryDispatch.java:122)
	at cn.wenzhuo4657.BigMarket.domain.strategy.service.rule.chain.impl.DefaultLogicChain.logic(DefaultLogicChain.java:40)
	at cn.wenzhuo4657.BigMarket.domain.strategy.service.rule.chain.impl.BackListLogicChain.logic(BackListLogicChain.java:56)
	at cn.wenzhuo4657.BigMarket.domain.strategy.service.raffle.DefaultRaffleStrategy.raffleLogicChain(DefaultRaffleStrategy.java:46)
	at cn.wenzhuo4657.BigMarket.domain.strategy.service.AbstractRaffleStrategy.performRaffle(AbstractRaffleStrategy.java:45)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:127)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at cn.wenzhuo4657.BigMarket.aop.RateLimiterAOP.doRouter(RateLimiterAOP.java:97)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:634)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:624)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$95cfa6d9.draw(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
24-11-27.11:56:19.862 [http-nio-8091-exec-48] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:56:19.862 [http-nio-8091-exec-49] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:56:19.862 [http-nio-8091-exec-47] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:56:19.863 [http-nio-8091-exec-50] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.11:56:19.917 [http-nio-8091-exec-48] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:56:19.919 [http-nio-8091-exec-49] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:56:19.972 [http-nio-8091-exec-47] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.11:56:20.002 [http-nio-8091-exec-50] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.11:56:23.696 [http-nio-8091-exec-5] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.11:56:23.696 [http-nio-8091-exec-9] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.11:56:23.696 [http-nio-8091-exec-8] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.11:56:23.696 [http-nio-8091-exec-6] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.11:56:23.713 [http-nio-8091-exec-1] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:56:23.713 [http-nio-8091-exec-7] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:56:23.769 [http-nio-8091-exec-1] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:56:23.772 [http-nio-8091-exec-11] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:56:23.802 [http-nio-8091-exec-11] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:56:23.805 [http-nio-8091-exec-3] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.11:56:23.827 [http-nio-8091-exec-7] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.11:56:23.830 [http-nio-8091-exec-2] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.11:56:23.858 [http-nio-8091-exec-2] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.11:56:23.862 [http-nio-8091-exec-4] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.11:56:23.888 [http-nio-8091-exec-3] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.11:56:23.889 [http-nio-8091-exec-4] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.11:56:23.893 [http-nio-8091-exec-13] INFO  RaffleActivityController - 查询sku商品集合开始 activityId:100301
24-11-27.11:56:23.893 [http-nio-8091-exec-10] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.11:56:23.916 [http-nio-8091-exec-8] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.11:56:23.916 [http-nio-8091-exec-6] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.11:56:23.920 [http-nio-8091-exec-12] INFO  RaffleActivityController - 查询sku商品集合开始 activityId:100301
24-11-27.11:56:23.920 [http-nio-8091-exec-15] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.11:56:23.943 [http-nio-8091-exec-5] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.11:56:23.949 [http-nio-8091-exec-9] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.11:56:23.952 [http-nio-8091-exec-13] INFO  RaffleActivityController - 查询sku商品集合完成 activityId:100301 skuProductResponseDTOS:[{"activityCount":{"dayCount":100,"monthCount":100,"totalCount":100},"activityCountId":11101,"productAmount":1.68,"sku":9011,"stockCount":100000,"stockCountSurplus":99886}]
24-11-27.11:56:23.981 [http-nio-8091-exec-10] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.11:56:23.981 [http-nio-8091-exec-12] INFO  RaffleActivityController - 查询sku商品集合完成 activityId:100301 skuProductResponseDTOS:[{"activityCount":{"dayCount":100,"monthCount":100,"totalCount":100},"activityCountId":11101,"productAmount":1.68,"sku":9011,"stockCount":100000,"stockCountSurplus":99886}]
24-11-27.11:56:24.004 [http-nio-8091-exec-15] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.11:57:28.586 [Dubbo-framework-cache-refreshing-scheduler-thread-1] INFO  AbstractCacheManager$CacheRefreshTask -  [DUBBO] Dumping meta caches, latest entries 0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.11:57:28.820 [Dubbo-framework-cache-refreshing-scheduler-thread-1] INFO  AbstractCacheManager$CacheRefreshTask -  [DUBBO] Dumping mapping caches, latest entries 0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:03:39.762 [http-nio-8091-exec-22] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.12:03:47.366 [http-nio-8091-exec-22] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期、状态、库存(sku)】校验开始。sku:9011 activityId:100301
24-11-27.12:03:47.367 [http-nio-8091-exec-22] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【有效期、状态、库存(sku)】开始。sku:9011 activityId:100301
24-11-27.12:03:47.432 [http-nio-8091-exec-22] ERROR RaffleActivityController - 积分兑换商品失败 userId:xiaofuge sku:9011
cn.wenzhuo4657.BigMarket.types.exception.AppException: null
	at cn.wenzhuo4657.BigMarket.domain.activity.service.quota.rule.impl.ActivitySkuStockActionChain.action(ActivitySkuStockActionChain.java:43)
	at cn.wenzhuo4657.BigMarket.domain.activity.service.quota.rule.impl.ActivityBaseActionChain.action(ActivityBaseActionChain.java:37)
	at cn.wenzhuo4657.BigMarket.domain.activity.service.quota.AbstractRaffleActivityQuota.createSkuRechargeOrder(AbstractRaffleActivityQuota.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:357)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$95cfa6d9.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
24-11-27.12:03:56.389 [http-nio-8091-exec-20] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.12:04:00.693 [http-nio-8091-exec-20] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期、状态、库存(sku)】校验开始。sku:9011 activityId:100301
24-11-27.12:04:00.693 [http-nio-8091-exec-20] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【有效期、状态、库存(sku)】开始。sku:9011 activityId:100301
24-11-27.12:04:00.749 [http-nio-8091-exec-20] ERROR RaffleActivityController - 积分兑换商品失败 userId:xiaofuge sku:9011
cn.wenzhuo4657.BigMarket.types.exception.AppException: null
	at cn.wenzhuo4657.BigMarket.domain.activity.service.quota.rule.impl.ActivitySkuStockActionChain.action(ActivitySkuStockActionChain.java:43)
	at cn.wenzhuo4657.BigMarket.domain.activity.service.quota.rule.impl.ActivityBaseActionChain.action(ActivityBaseActionChain.java:37)
	at cn.wenzhuo4657.BigMarket.domain.activity.service.quota.AbstractRaffleActivityQuota.createSkuRechargeOrder(AbstractRaffleActivityQuota.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:357)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$95cfa6d9.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
24-11-27.12:04:25.014 [http-nio-8091-exec-23] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.12:04:46.373 [http-nio-8091-exec-23] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期、状态、库存(sku)】校验开始。sku:9011 activityId:100301
24-11-27.12:04:46.373 [http-nio-8091-exec-23] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【有效期、状态、库存(sku)】开始。sku:9011 activityId:100301
24-11-27.12:05:07.272 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Client session timed out, have not heard from server in 27403ms for session id 0x100003791620009
24-11-27.12:05:07.274 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Session 0x100003791620009 for sever 117.72.36.124/117.72.36.124:2181, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
org.apache.zookeeper.ClientCnxn$SessionTimeoutException: Client session timed out, have not heard from server in 27403ms for session id 0x100003791620009
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1230)
24-11-27.12:05:07.281 [http-nio-8091-exec-23] ERROR RaffleActivityController - 积分兑换商品失败 userId:xiaofuge sku:9011
cn.wenzhuo4657.BigMarket.types.exception.AppException: null
	at cn.wenzhuo4657.BigMarket.domain.activity.service.quota.rule.impl.ActivitySkuStockActionChain.action(ActivitySkuStockActionChain.java:43)
	at cn.wenzhuo4657.BigMarket.domain.activity.service.quota.rule.impl.ActivityBaseActionChain.action(ActivityBaseActionChain.java:37)
	at cn.wenzhuo4657.BigMarket.domain.activity.service.quota.AbstractRaffleActivityQuota.createSkuRechargeOrder(AbstractRaffleActivityQuota.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:357)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$95cfa6d9.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
24-11-27.12:05:08.215 [main-EventThread] INFO  ConnectionStateManager - State change: SUSPENDED
24-11-27.12:05:21.953 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Opening socket connection to server 117.72.36.124/117.72.36.124:2181.
24-11-27.12:05:21.953 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - SASL config status: Will not attempt to authenticate using SASL (unknown error)
24-11-27.12:05:21.982 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Socket connection established, initiating session, client: /10.224.3.20:49759, server: 117.72.36.124/117.72.36.124:2181
24-11-27.12:05:22.016 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Unable to reconnect to ZooKeeper service, session 0x100003791620009 has expired
24-11-27.12:05:22.016 [main-EventThread] WARN  ConnectionState        - Session expired event received
24-11-27.12:05:22.016 [main-EventThread] INFO  ZooKeeper              - Initiating client connection, connectString=117.72.36.124:2181 sessionTimeout=30000 watcher=org.apache.curator.ConnectionState@380fdcf2
24-11-27.12:05:22.017 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Session 0x100003791620009 for sever 117.72.36.124/117.72.36.124:2181, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
org.apache.zookeeper.ClientCnxn$SessionExpiredException: Unable to reconnect to ZooKeeper service, session 0x100003791620009 has expired
	at org.apache.zookeeper.ClientCnxn$SendThread.onConnected(ClientCnxn.java:1406)
	at org.apache.zookeeper.ClientCnxnSocket.readConnectResult(ClientCnxnSocket.java:154)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:84)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:348)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
24-11-27.12:05:22.017 [main-EventThread] INFO  ClientCnxnSocket       - jute.maxbuffer value is 1048575 Bytes
24-11-27.12:05:22.017 [main-EventThread] INFO  ClientCnxn             - zookeeper.request.timeout value is 0. feature enabled=false
24-11-27.12:05:22.017 [main-EventThread] INFO  ConnectionStateManager - State change: LOST
24-11-27.12:05:22.017 [main-EventThread] INFO  ClientCnxn             - EventThread shut down for session: 0x100003791620009
24-11-27.12:05:33.561 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Opening socket connection to server 117.72.36.124/117.72.36.124:2181.
24-11-27.12:05:33.561 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - SASL config status: Will not attempt to authenticate using SASL (unknown error)
24-11-27.12:05:33.596 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Socket connection established, initiating session, client: /10.224.3.20:49915, server: 117.72.36.124/117.72.36.124:2181
24-11-27.12:05:33.630 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Session establishment complete on server 117.72.36.124/117.72.36.124:2181, session id = 0x10000379162000a, negotiated timeout = 30000
24-11-27.12:05:33.630 [main-EventThread] INFO  ConnectionStateManager - State change: RECONNECTED
24-11-27.12:05:33.664 [main-EventThread] INFO  EnsembleTracker        - New config event received: {}
24-11-27.12:06:26.848 [http-nio-8091-exec-26] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.12:06:30.850 [http-nio-8091-exec-26] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期、状态、库存(sku)】校验开始。sku:9011 activityId:100301
24-11-27.12:06:33.687 [http-nio-8091-exec-26] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【有效期、状态、库存(sku)】开始。sku:9011 activityId:100301
24-11-27.12:07:03.465 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Client session timed out, have not heard from server in 28962ms for session id 0x10000379162000a
24-11-27.12:07:03.465 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=56s182ms499µs100ns).
24-11-27.12:07:03.465 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=56s182ms489µs500ns).
24-11-27.12:07:03.465 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Session 0x10000379162000a for sever 117.72.36.124/117.72.36.124:2181, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
org.apache.zookeeper.ClientCnxn$SessionTimeoutException: Client session timed out, have not heard from server in 28962ms for session id 0x10000379162000a
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1230)
24-11-27.12:07:03.465 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=56s182ms495µs200ns).
24-11-27.12:07:03.471 [http-nio-8091-exec-26] ERROR RaffleActivityController - 积分兑换商品失败 userId:xiaofuge sku:9011
cn.wenzhuo4657.BigMarket.types.exception.AppException: null
	at cn.wenzhuo4657.BigMarket.domain.activity.service.quota.rule.impl.ActivitySkuStockActionChain.action(ActivitySkuStockActionChain.java:43)
	at cn.wenzhuo4657.BigMarket.domain.activity.service.quota.rule.impl.ActivityBaseActionChain.action(ActivityBaseActionChain.java:37)
	at cn.wenzhuo4657.BigMarket.domain.activity.service.quota.AbstractRaffleActivityQuota.createSkuRechargeOrder(AbstractRaffleActivityQuota.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:357)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$95cfa6d9.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
24-11-27.12:07:03.571 [main-EventThread] INFO  ConnectionStateManager - State change: SUSPENDED
24-11-27.12:07:15.998 [http-nio-8091-exec-27] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.12:07:18.223 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Opening socket connection to server 117.72.36.124/117.72.36.124:2181.
24-11-27.12:07:18.223 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - SASL config status: Will not attempt to authenticate using SASL (unknown error)
24-11-27.12:07:19.304 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Socket connection established, initiating session, client: /10.224.3.20:49994, server: 117.72.36.124/117.72.36.124:2181
24-11-27.12:07:19.333 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Unable to reconnect to ZooKeeper service, session 0x10000379162000a has expired
24-11-27.12:07:19.333 [main-EventThread] WARN  ConnectionState        - Session expired event received
24-11-27.12:07:19.333 [main-EventThread] INFO  ZooKeeper              - Initiating client connection, connectString=117.72.36.124:2181 sessionTimeout=30000 watcher=org.apache.curator.ConnectionState@380fdcf2
24-11-27.12:07:19.333 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Session 0x10000379162000a for sever 117.72.36.124/117.72.36.124:2181, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
org.apache.zookeeper.ClientCnxn$SessionExpiredException: Unable to reconnect to ZooKeeper service, session 0x10000379162000a has expired
	at org.apache.zookeeper.ClientCnxn$SendThread.onConnected(ClientCnxn.java:1406)
	at org.apache.zookeeper.ClientCnxnSocket.readConnectResult(ClientCnxnSocket.java:154)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:84)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:348)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
24-11-27.12:07:19.334 [main-EventThread] INFO  ClientCnxnSocket       - jute.maxbuffer value is 1048575 Bytes
24-11-27.12:07:19.334 [main-EventThread] INFO  ClientCnxn             - zookeeper.request.timeout value is 0. feature enabled=false
24-11-27.12:07:19.334 [main-EventThread] INFO  ConnectionStateManager - State change: LOST
24-11-27.12:07:19.334 [main-EventThread] INFO  ClientCnxn             - EventThread shut down for session: 0x10000379162000a
24-11-27.12:07:19.474 [http-nio-8091-exec-27] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期、状态、库存(sku)】校验开始。sku:9011 activityId:100301
24-11-27.12:07:21.153 [http-nio-8091-exec-27] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【有效期、状态、库存(sku)】开始。sku:9011 activityId:100301
24-11-27.12:07:45.986 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Opening socket connection to server 117.72.36.124/117.72.36.124:2181.
24-11-27.12:07:45.986 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - SASL config status: Will not attempt to authenticate using SASL (unknown error)
24-11-27.12:08:02.461 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Socket connection established, initiating session, client: /10.224.3.20:50070, server: 117.72.36.124/117.72.36.124:2181
24-11-27.12:08:02.495 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Session establishment complete on server 117.72.36.124/117.72.36.124:2181, session id = 0x10000379162000b, negotiated timeout = 30000
24-11-27.12:08:02.495 [main-EventThread] INFO  ConnectionStateManager - State change: RECONNECTED
24-11-27.12:09:38.458 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Client session timed out, have not heard from server in 95961ms for session id 0x10000379162000b
24-11-27.12:09:38.463 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m52s477ms913µs700ns).
24-11-27.12:09:38.463 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m52s477ms852µs700ns).
24-11-27.12:09:38.458 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m52s471ms768µs100ns).
24-11-27.12:09:38.474 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Session 0x10000379162000b for sever 117.72.36.124/117.72.36.124:2181, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
org.apache.zookeeper.ClientCnxn$SessionTimeoutException: Client session timed out, have not heard from server in 95961ms for session id 0x10000379162000b
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1230)
24-11-27.12:10:24.228 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=45s765ms55µs200ns).
24-11-27.12:10:24.228 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=45s771ms225µs900ns).
24-11-27.12:10:24.228 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=45s764ms959µs100ns).
24-11-27.12:10:24.234 [main-EventThread] INFO  ConnectionStateManager - State change: SUSPENDED
24-11-27.12:10:24.257 [http-nio-8091-exec-27] ERROR RaffleActivityController - 积分兑换商品失败 userId:xiaofuge sku:9011
cn.wenzhuo4657.BigMarket.types.exception.AppException: null
	at cn.wenzhuo4657.BigMarket.domain.activity.service.quota.rule.impl.ActivitySkuStockActionChain.action(ActivitySkuStockActionChain.java:43)
	at cn.wenzhuo4657.BigMarket.domain.activity.service.quota.rule.impl.ActivityBaseActionChain.action(ActivityBaseActionChain.java:37)
	at cn.wenzhuo4657.BigMarket.domain.activity.service.quota.AbstractRaffleActivityQuota.createSkuRechargeOrder(AbstractRaffleActivityQuota.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:357)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$95cfa6d9.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
24-11-27.12:10:24.476 [Dubbo-framework-registry-notification-2-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679249423&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:10:24.476 [Dubbo-framework-registry-notification-0-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679248359&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:10:27.806 [Dubbo-framework-registry-notification-0-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679248359&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:10:27.809 [Dubbo-framework-registry-notification-2-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679249423&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:10:29.899 [http-nio-8091-exec-25] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.12:10:33.733 [Curator-Framework-0] ERROR CuratorFrameworkImpl   - Background operation retry gave up
org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss
	at org.apache.zookeeper.KeeperException.create(KeeperException.java:102)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.checkBackgroundRetry(CuratorFrameworkImpl.java:851)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.performBackgroundOperation(CuratorFrameworkImpl.java:999)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.backgroundOperationsLoop(CuratorFrameworkImpl.java:952)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.access$300(CuratorFrameworkImpl.java:66)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl$4.call(CuratorFrameworkImpl.java:342)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
24-11-27.12:10:33.734 [Curator-Framework-0] ERROR CuratorFrameworkImpl   - Background retry gave up
org.apache.curator.CuratorConnectionLossException: KeeperErrorCode = ConnectionLoss
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.performBackgroundOperation(CuratorFrameworkImpl.java:981)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.backgroundOperationsLoop(CuratorFrameworkImpl.java:952)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.access$300(CuratorFrameworkImpl.java:66)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl$4.call(CuratorFrameworkImpl.java:342)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
24-11-27.12:10:33.906 [http-nio-8091-exec-25] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期、状态、库存(sku)】校验开始。sku:9011 activityId:100301
24-11-27.12:10:34.126 [http-nio-8091-exec-25] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【有效期、状态、库存(sku)】开始。sku:9011 activityId:100301
24-11-27.12:10:35.238 [http-nio-8091-exec-25] ERROR RaffleActivityController - 积分兑换商品失败 userId:xiaofuge sku:9011
cn.wenzhuo4657.BigMarket.types.exception.AppException: null
	at cn.wenzhuo4657.BigMarket.domain.activity.service.quota.rule.impl.ActivitySkuStockActionChain.action(ActivitySkuStockActionChain.java:43)
	at cn.wenzhuo4657.BigMarket.domain.activity.service.quota.rule.impl.ActivityBaseActionChain.action(ActivityBaseActionChain.java:37)
	at cn.wenzhuo4657.BigMarket.domain.activity.service.quota.AbstractRaffleActivityQuota.createSkuRechargeOrder(AbstractRaffleActivityQuota.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:357)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$95cfa6d9.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
24-11-27.12:10:39.878 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Opening socket connection to server 117.72.36.124/117.72.36.124:2181.
24-11-27.12:10:39.878 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - SASL config status: Will not attempt to authenticate using SASL (unknown error)
24-11-27.12:10:39.906 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Socket connection established, initiating session, client: /10.224.3.20:50510, server: 117.72.36.124/117.72.36.124:2181
24-11-27.12:10:39.933 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Unable to reconnect to ZooKeeper service, session 0x10000379162000b has expired
24-11-27.12:10:39.933 [main-EventThread] WARN  ConnectionState        - Session expired event received
24-11-27.12:10:39.933 [main-EventThread] INFO  ZooKeeper              - Initiating client connection, connectString=117.72.36.124:2181 sessionTimeout=30000 watcher=org.apache.curator.ConnectionState@380fdcf2
24-11-27.12:10:39.933 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Session 0x10000379162000b for sever 117.72.36.124/117.72.36.124:2181, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
org.apache.zookeeper.ClientCnxn$SessionExpiredException: Unable to reconnect to ZooKeeper service, session 0x10000379162000b has expired
	at org.apache.zookeeper.ClientCnxn$SendThread.onConnected(ClientCnxn.java:1406)
	at org.apache.zookeeper.ClientCnxnSocket.readConnectResult(ClientCnxnSocket.java:154)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:84)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:348)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
24-11-27.12:10:39.933 [main-EventThread] INFO  ClientCnxnSocket       - jute.maxbuffer value is 1048575 Bytes
24-11-27.12:10:39.934 [main-EventThread] INFO  ClientCnxn             - zookeeper.request.timeout value is 0. feature enabled=false
24-11-27.12:10:39.934 [main-EventThread] INFO  ConnectionStateManager - State change: LOST
24-11-27.12:10:39.934 [main-EventThread] INFO  ClientCnxn             - EventThread shut down for session: 0x10000379162000b
24-11-27.12:10:45.549 [http-nio-8091-exec-28] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.12:10:48.791 [http-nio-8091-exec-28] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期、状态、库存(sku)】校验开始。sku:9011 activityId:100301
24-11-27.12:10:51.557 [http-nio-8091-exec-28] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【有效期、状态、库存(sku)】开始。sku:9011 activityId:100301
24-11-27.12:10:52.112 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Opening socket connection to server 117.72.36.124/117.72.36.124:2181.
24-11-27.12:10:52.114 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - SASL config status: Will not attempt to authenticate using SASL (unknown error)
24-11-27.12:10:53.554 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Socket connection established, initiating session, client: /10.224.3.20:50517, server: 117.72.36.124/117.72.36.124:2181
24-11-27.12:10:58.145 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Session establishment complete on server 117.72.36.124/117.72.36.124:2181, session id = 0x10000379162000c, negotiated timeout = 30000
24-11-27.12:10:58.146 [main-EventThread] INFO  ConnectionStateManager - State change: RECONNECTED
24-11-27.12:11:57.557 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Client session timed out, have not heard from server in 56096ms for session id 0x10000379162000c
24-11-27.12:11:57.557 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=59s413ms255µs100ns).
24-11-27.12:11:57.557 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=59s413ms332µs700ns).
24-11-27.12:11:57.557 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=59s413ms255µs200ns).
24-11-27.12:11:57.558 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Session 0x10000379162000c for sever 117.72.36.124/117.72.36.124:2181, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
org.apache.zookeeper.ClientCnxn$SessionTimeoutException: Client session timed out, have not heard from server in 56096ms for session id 0x10000379162000c
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1230)
24-11-27.12:11:57.586 [http-nio-8091-exec-28] ERROR RaffleActivityController - 积分兑换商品失败 userId:xiaofuge sku:9011
cn.wenzhuo4657.BigMarket.types.exception.AppException: null
	at cn.wenzhuo4657.BigMarket.domain.activity.service.quota.rule.impl.ActivitySkuStockActionChain.action(ActivitySkuStockActionChain.java:43)
	at cn.wenzhuo4657.BigMarket.domain.activity.service.quota.rule.impl.ActivityBaseActionChain.action(ActivityBaseActionChain.java:37)
	at cn.wenzhuo4657.BigMarket.domain.activity.service.quota.AbstractRaffleActivityQuota.createSkuRechargeOrder(AbstractRaffleActivityQuota.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:357)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$95cfa6d9.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
24-11-27.12:11:57.671 [main-EventThread] INFO  ConnectionStateManager - State change: SUSPENDED
24-11-27.12:11:59.813 [Dubbo-framework-registry-notification-2-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679249423&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:11:59.908 [Dubbo-framework-registry-notification-0-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679248359&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:12:00.901 [http-nio-8091-exec-29] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.12:12:08.575 [Dubbo-framework-registry-notification-0-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679248359&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:12:08.575 [Dubbo-framework-registry-notification-2-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679249423&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:12:08.740 [http-nio-8091-exec-29] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期、状态、库存(sku)】校验开始。sku:9011 activityId:100301
24-11-27.12:12:10.625 [http-nio-8091-exec-29] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【有效期、状态、库存(sku)】开始。sku:9011 activityId:100301
24-11-27.12:12:33.511 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Opening socket connection to server 117.72.36.124/117.72.36.124:2181.
24-11-27.12:12:33.512 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - SASL config status: Will not attempt to authenticate using SASL (unknown error)
24-11-27.12:12:33.513 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Client session timed out, have not heard from server in 35842ms for session id 0x10000379162000c
24-11-27.12:12:33.513 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Session 0x10000379162000c for sever 117.72.36.124/117.72.36.124:2181, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
org.apache.zookeeper.ClientCnxn$SessionTimeoutException: Client session timed out, have not heard from server in 35842ms for session id 0x10000379162000c
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1230)
24-11-27.12:13:53.009 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m19s497ms940µs400ns).
24-11-27.12:13:53.009 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m19s497ms928µs600ns).
24-11-27.12:13:53.009 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m19s497ms939µs).
24-11-27.12:13:53.014 [Curator-ConnectionStateManager-0] ERROR ServiceDiscoveryImpl   - Could not re-register instances after reconnection
org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /services/application/36ef3091-4df7-4f12-87de-79235c2ef73c
	at org.apache.zookeeper.KeeperException.create(KeeperException.java:102)
	at org.apache.zookeeper.KeeperException.create(KeeperException.java:54)
	at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:1836)
	at org.apache.curator.framework.imps.CreateBuilderImpl$16.call(CreateBuilderImpl.java:1131)
	at org.apache.curator.framework.imps.CreateBuilderImpl$16.call(CreateBuilderImpl.java:1113)
	at org.apache.curator.RetryLoop.callWithRetry(RetryLoop.java:93)
	at org.apache.curator.framework.imps.CreateBuilderImpl.pathInForeground(CreateBuilderImpl.java:1110)
	at org.apache.curator.framework.imps.CreateBuilderImpl.protectedPathInForeground(CreateBuilderImpl.java:593)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:583)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:48)
	at org.apache.curator.x.discovery.details.ServiceDiscoveryImpl.internalRegisterService(ServiceDiscoveryImpl.java:237)
	at org.apache.curator.x.discovery.details.ServiceDiscoveryImpl.reRegisterServices(ServiceDiscoveryImpl.java:456)
	at org.apache.curator.x.discovery.details.ServiceDiscoveryImpl.access$100(ServiceDiscoveryImpl.java:59)
	at org.apache.curator.x.discovery.details.ServiceDiscoveryImpl$1.stateChanged(ServiceDiscoveryImpl.java:79)
	at org.apache.curator.framework.state.ConnectionStateManager.lambda$processEvents$0(ConnectionStateManager.java:279)
	at org.apache.curator.framework.listen.MappingListenerManager.lambda$forEach$0(MappingListenerManager.java:92)
	at org.apache.curator.framework.listen.MappingListenerManager.forEach(MappingListenerManager.java:89)
	at org.apache.curator.framework.listen.StandardListenerManager.forEach(StandardListenerManager.java:89)
	at org.apache.curator.framework.state.ConnectionStateManager.processEvents(ConnectionStateManager.java:279)
	at org.apache.curator.framework.state.ConnectionStateManager.access$000(ConnectionStateManager.java:43)
	at org.apache.curator.framework.state.ConnectionStateManager$1.call(ConnectionStateManager.java:132)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
24-11-27.12:13:53.038 [http-nio-8091-exec-29] ERROR RaffleActivityController - 积分兑换商品失败 userId:xiaofuge sku:9011
cn.wenzhuo4657.BigMarket.types.exception.AppException: null
	at cn.wenzhuo4657.BigMarket.domain.activity.service.quota.rule.impl.ActivitySkuStockActionChain.action(ActivitySkuStockActionChain.java:43)
	at cn.wenzhuo4657.BigMarket.domain.activity.service.quota.rule.impl.ActivityBaseActionChain.action(ActivityBaseActionChain.java:37)
	at cn.wenzhuo4657.BigMarket.domain.activity.service.quota.AbstractRaffleActivityQuota.createSkuRechargeOrder(AbstractRaffleActivityQuota.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:357)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$95cfa6d9.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
24-11-27.12:14:06.438 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Opening socket connection to server 117.72.36.124/117.72.36.124:2181.
24-11-27.12:14:06.438 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - SASL config status: Will not attempt to authenticate using SASL (unknown error)
24-11-27.12:14:06.465 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Socket connection established, initiating session, client: /10.224.3.20:50724, server: 117.72.36.124/117.72.36.124:2181
24-11-27.12:14:06.493 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Unable to reconnect to ZooKeeper service, session 0x10000379162000c has expired
24-11-27.12:14:06.493 [main-EventThread] WARN  ConnectionState        - Session expired event received
24-11-27.12:14:06.494 [main-EventThread] INFO  ZooKeeper              - Initiating client connection, connectString=117.72.36.124:2181 sessionTimeout=30000 watcher=org.apache.curator.ConnectionState@380fdcf2
24-11-27.12:14:06.494 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Session 0x10000379162000c for sever 117.72.36.124/117.72.36.124:2181, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
org.apache.zookeeper.ClientCnxn$SessionExpiredException: Unable to reconnect to ZooKeeper service, session 0x10000379162000c has expired
	at org.apache.zookeeper.ClientCnxn$SendThread.onConnected(ClientCnxn.java:1406)
	at org.apache.zookeeper.ClientCnxnSocket.readConnectResult(ClientCnxnSocket.java:154)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:84)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:348)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
24-11-27.12:14:06.495 [main-EventThread] INFO  ClientCnxnSocket       - jute.maxbuffer value is 1048575 Bytes
24-11-27.12:14:06.495 [main-EventThread] INFO  ClientCnxn             - zookeeper.request.timeout value is 0. feature enabled=false
24-11-27.12:14:06.495 [main-EventThread] INFO  ConnectionStateManager - State change: LOST
24-11-27.12:14:06.495 [main-EventThread] INFO  ClientCnxn             - EventThread shut down for session: 0x10000379162000c
24-11-27.12:14:16.856 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Opening socket connection to server 117.72.36.124/117.72.36.124:2181.
24-11-27.12:14:16.856 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - SASL config status: Will not attempt to authenticate using SASL (unknown error)
24-11-27.12:14:16.883 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Socket connection established, initiating session, client: /10.224.3.20:50734, server: 117.72.36.124/117.72.36.124:2181
24-11-27.12:14:16.912 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Session establishment complete on server 117.72.36.124/117.72.36.124:2181, session id = 0x10000379162000d, negotiated timeout = 30000
24-11-27.12:14:16.912 [main-EventThread] INFO  ConnectionStateManager - State change: RECONNECTED
24-11-27.12:14:16.939 [main-EventThread] INFO  EnsembleTracker        - New config event received: {}
24-11-27.12:14:16.969 [main-EventThread] INFO  EnsembleTracker        - New config event received: {}
24-11-27.12:14:35.843 [http-nio-8091-exec-30] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:14:35.843 [http-nio-8091-exec-31] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:14:35.852 [http-nio-8091-exec-33] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:14:35.903 [http-nio-8091-exec-30] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:14:35.903 [http-nio-8091-exec-31] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.12:14:35.991 [http-nio-8091-exec-33] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:14:36.042 [http-nio-8091-exec-36] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:14:36.042 [http-nio-8091-exec-38] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:14:36.042 [http-nio-8091-exec-37] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:14:36.071 [http-nio-8091-exec-36] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:14:36.071 [http-nio-8091-exec-38] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.12:14:36.153 [http-nio-8091-exec-37] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:14:36.252 [http-nio-8091-exec-34] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:14:36.252 [http-nio-8091-exec-41] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:14:36.253 [http-nio-8091-exec-39] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:14:36.279 [http-nio-8091-exec-41] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:14:36.280 [http-nio-8091-exec-34] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.12:14:36.333 [http-nio-8091-exec-39] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:14:46.102 [http-nio-8091-exec-35] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:14:46.102 [http-nio-8091-exec-43] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:14:46.102 [http-nio-8091-exec-40] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:14:46.157 [http-nio-8091-exec-35] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.12:14:46.167 [http-nio-8091-exec-43] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:14:46.223 [http-nio-8091-exec-40] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:14:46.728 [http-nio-8091-exec-44] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:14:46.729 [http-nio-8091-exec-45] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:14:46.729 [http-nio-8091-exec-42] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:14:46.785 [http-nio-8091-exec-45] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:14:46.785 [http-nio-8091-exec-44] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:87.53
24-11-27.12:14:46.844 [http-nio-8091-exec-42] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:14:47.772 [http-nio-8091-exec-48] INFO  RaffleActivityController - 活动装配，数据预热，开始 activityId:100301
24-11-27.12:14:48.753 [http-nio-8091-exec-48] INFO  RaffleActivityController - 活动装配，数据预热，完成 activityId:100301
24-11-27.12:15:44.569 [http-nio-8091-exec-47] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.12:15:44.736 [http-nio-8091-exec-47] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期、状态、库存(sku)】校验开始。sku:9011 activityId:100301
24-11-27.12:15:51.763 [http-nio-8091-exec-47] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【有效期、状态、库存(sku)】开始。sku:9011 activityId:100301
24-11-27.12:16:01.096 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Client session timed out, have not heard from server in 23944ms for session id 0x10000379162000d
24-11-27.12:16:01.097 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Session 0x10000379162000d for sever 117.72.36.124/117.72.36.124:2181, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
org.apache.zookeeper.ClientCnxn$SessionTimeoutException: Client session timed out, have not heard from server in 23944ms for session id 0x10000379162000d
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1230)
24-11-27.12:16:15.860 [main-EventThread] INFO  ConnectionStateManager - State change: SUSPENDED
24-11-27.12:16:25.280 [http-nio-8091-exec-47] ERROR RaffleActivityController - 积分兑换商品失败 userId:xiaofuge sku:9011
cn.wenzhuo4657.BigMarket.types.exception.AppException: null
	at cn.wenzhuo4657.BigMarket.domain.activity.service.quota.rule.impl.ActivitySkuStockActionChain.action(ActivitySkuStockActionChain.java:43)
	at cn.wenzhuo4657.BigMarket.domain.activity.service.quota.rule.impl.ActivityBaseActionChain.action(ActivityBaseActionChain.java:37)
	at cn.wenzhuo4657.BigMarket.domain.activity.service.quota.AbstractRaffleActivityQuota.createSkuRechargeOrder(AbstractRaffleActivityQuota.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:357)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$95cfa6d9.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
24-11-27.12:16:30.237 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Opening socket connection to server 117.72.36.124/117.72.36.124:2181.
24-11-27.12:16:30.237 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - SASL config status: Will not attempt to authenticate using SASL (unknown error)
24-11-27.12:16:30.266 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Socket connection established, initiating session, client: /10.224.3.20:50916, server: 117.72.36.124/117.72.36.124:2181
24-11-27.12:16:30.294 [main-EventThread] WARN  ConnectionState        - Session expired event received
24-11-27.12:16:30.294 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Unable to reconnect to ZooKeeper service, session 0x10000379162000d has expired
24-11-27.12:16:30.294 [main-EventThread] INFO  ZooKeeper              - Initiating client connection, connectString=117.72.36.124:2181 sessionTimeout=30000 watcher=org.apache.curator.ConnectionState@380fdcf2
24-11-27.12:16:30.294 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Session 0x10000379162000d for sever 117.72.36.124/117.72.36.124:2181, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
org.apache.zookeeper.ClientCnxn$SessionExpiredException: Unable to reconnect to ZooKeeper service, session 0x10000379162000d has expired
	at org.apache.zookeeper.ClientCnxn$SendThread.onConnected(ClientCnxn.java:1406)
	at org.apache.zookeeper.ClientCnxnSocket.readConnectResult(ClientCnxnSocket.java:154)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:84)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:348)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
24-11-27.12:16:30.294 [main-EventThread] INFO  ClientCnxnSocket       - jute.maxbuffer value is 1048575 Bytes
24-11-27.12:16:30.294 [main-EventThread] INFO  ClientCnxn             - zookeeper.request.timeout value is 0. feature enabled=false
24-11-27.12:16:30.296 [main-EventThread] INFO  ConnectionStateManager - State change: LOST
24-11-27.12:16:30.296 [main-EventThread] INFO  ClientCnxn             - EventThread shut down for session: 0x10000379162000d
24-11-27.12:16:40.604 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Opening socket connection to server 117.72.36.124/117.72.36.124:2181.
24-11-27.12:16:40.604 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - SASL config status: Will not attempt to authenticate using SASL (unknown error)
24-11-27.12:16:40.633 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Socket connection established, initiating session, client: /10.224.3.20:50935, server: 117.72.36.124/117.72.36.124:2181
24-11-27.12:16:40.660 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Session establishment complete on server 117.72.36.124/117.72.36.124:2181, session id = 0x10000379162000e, negotiated timeout = 30000
24-11-27.12:16:40.660 [main-EventThread] INFO  ConnectionStateManager - State change: RECONNECTED
24-11-27.12:16:40.687 [main-EventThread] INFO  EnsembleTracker        - New config event received: {}
24-11-27.12:17:19.166 [http-nio-8091-exec-11] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.12:17:19.356 [http-nio-8091-exec-11] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期、状态、库存(sku)】校验开始。sku:9011 activityId:100301
24-11-27.12:17:21.925 [http-nio-8091-exec-11] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【有效期、状态、库存(sku)】开始。sku:9011 activityId:100301
24-11-27.12:17:37.958 [http-nio-8091-exec-11] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【有效期、状态、库存(sku)】成功。sku:9011 activityId:100301
24-11-27.12:17:42.188 [http-nio-8091-exec-11] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:丯𑄩𫆙𪐾泟𤽀獼
24-11-27.12:17:42.188 [http-nio-8091-exec-11] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.12:17:42.520 [http-nio-8091-exec-11] INFO  CreditAdjustService    - 增加账户积分额度完成 userId:xiaofuge orderId:826137621669
24-11-27.12:17:42.520 [http-nio-8091-exec-11] INFO  RaffleActivityController - 积分兑换商品，支付订单完成  userId:xiaofuge sku:9011 orderId:826137621669
24-11-27.12:17:43.471 [http-nio-8091-exec-7] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:17:43.471 [http-nio-8091-exec-3] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:17:43.471 [http-nio-8091-exec-2] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:17:43.474 [http-nio-8091-exec-8] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.12:17:43.530 [http-nio-8091-exec-2] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:89.21
24-11-27.12:17:43.531 [http-nio-8091-exec-3] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:17:43.583 [http-nio-8091-exec-7] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:17:43.612 [http-nio-8091-exec-8] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.12:17:54.661 [http-nio-8091-exec-12] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.12:17:54.661 [http-nio-8091-exec-15] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.12:17:54.661 [http-nio-8091-exec-18] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.12:17:54.661 [http-nio-8091-exec-10] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.12:17:54.679 [http-nio-8091-exec-19] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:17:54.680 [http-nio-8091-exec-14] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:17:54.737 [http-nio-8091-exec-14] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:89.21
24-11-27.12:17:54.741 [http-nio-8091-exec-21] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:17:54.771 [http-nio-8091-exec-21] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:17:54.774 [http-nio-8091-exec-17] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:17:54.794 [http-nio-8091-exec-19] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:17:54.798 [http-nio-8091-exec-16] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:17:54.802 [http-nio-8091-exec-12] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.12:17:54.803 [http-nio-8091-exec-15] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.12:17:54.803 [http-nio-8091-exec-18] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.12:17:54.805 [http-nio-8091-exec-10] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.12:17:54.805 [http-nio-8091-exec-22] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:17:54.806 [http-nio-8091-exec-20] INFO  RaffleActivityController - 查询sku商品集合开始 activityId:100301
24-11-27.12:17:54.808 [http-nio-8091-exec-23] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.12:17:54.809 [http-nio-8091-exec-24] INFO  RaffleActivityController - 查询sku商品集合开始 activityId:100301
24-11-27.12:17:54.827 [http-nio-8091-exec-16] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:89.21
24-11-27.12:17:54.833 [http-nio-8091-exec-26] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.12:17:54.834 [http-nio-8091-exec-22] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:17:54.862 [http-nio-8091-exec-17] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:17:54.866 [http-nio-8091-exec-20] INFO  RaffleActivityController - 查询sku商品集合完成 activityId:100301 skuProductResponseDTOS:[{"activityCount":{"dayCount":100,"monthCount":100,"totalCount":100},"activityCountId":11101,"productAmount":1.68,"sku":9011,"stockCount":100000,"stockCountSurplus":99886}]
24-11-27.12:17:54.867 [http-nio-8091-exec-24] INFO  RaffleActivityController - 查询sku商品集合完成 activityId:100301 skuProductResponseDTOS:[{"activityCount":{"dayCount":100,"monthCount":100,"totalCount":100},"activityCountId":11101,"productAmount":1.68,"sku":9011,"stockCount":100000,"stockCountSurplus":99886}]
24-11-27.12:17:54.894 [http-nio-8091-exec-23] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.12:17:54.920 [http-nio-8091-exec-26] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.12:17:59.201 [http-nio-8091-exec-27] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.12:18:03.067 [http-nio-8091-exec-27] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:丯𑄩𫆙𪐾泟𤽀獼
24-11-27.12:18:03.067 [http-nio-8091-exec-27] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.12:18:03.270 [http-nio-8091-exec-27] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:700566053816
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [E:\code\java\idea\big-market\big-market-app\target\classes\mybatis\mapper\UserCreditOrderDao.xml]
### The error may involve cn.wenzhuo4657.BigMarket.infrastructure.persistent.dao.UserCreditOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values(                   ?,?,?,?,?,?,now(),now()               )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy164.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:96)
	at com.sun.proxy.$Proxy196.insert(Unknown Source)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:92)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:84)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$b71add64.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$1083dd1f.saveUserCreditTradeOrder(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.credit.service.adjust.CreditAdjustService.createOrder(CreditAdjustService.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:363)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$95cfa6d9.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor145.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy240.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.GeneratedMethodAccessor313.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy239.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:54)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 84 common frames omitted
24-11-27.12:18:03.352 [http-nio-8091-exec-27] INFO  CreditAdjustService    - 增加账户积分额度完成 userId:xiaofuge orderId:700566053816
24-11-27.12:18:03.352 [http-nio-8091-exec-27] INFO  RaffleActivityController - 积分兑换商品，支付订单完成  userId:xiaofuge sku:9011 orderId:700566053816
24-11-27.12:18:04.460 [http-nio-8091-exec-28] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:18:04.460 [http-nio-8091-exec-32] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:18:04.460 [http-nio-8091-exec-29] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.12:18:04.460 [http-nio-8091-exec-25] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:18:04.521 [http-nio-8091-exec-32] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:18:04.521 [http-nio-8091-exec-28] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:89.21
24-11-27.12:18:04.578 [http-nio-8091-exec-25] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:18:04.607 [http-nio-8091-exec-29] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.12:20:01.134 [http-nio-8091-exec-41] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.12:20:01.190 [http-nio-8091-exec-41] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:丯𑄩𫆙𪐾泟𤽀獼
24-11-27.12:20:01.190 [http-nio-8091-exec-41] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.12:20:05.230 [http-nio-8091-exec-41] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:044359738344
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [E:\code\java\idea\big-market\big-market-app\target\classes\mybatis\mapper\UserCreditOrderDao.xml]
### The error may involve cn.wenzhuo4657.BigMarket.infrastructure.persistent.dao.UserCreditOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values(                   ?,?,?,?,?,?,now(),now()               )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy164.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:96)
	at com.sun.proxy.$Proxy196.insert(Unknown Source)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:92)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:84)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$b71add64.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$1083dd1f.saveUserCreditTradeOrder(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.credit.service.adjust.CreditAdjustService.createOrder(CreditAdjustService.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:363)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$95cfa6d9.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor145.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy240.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.GeneratedMethodAccessor313.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy239.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:54)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 84 common frames omitted
24-11-27.12:20:05.313 [http-nio-8091-exec-41] INFO  CreditAdjustService    - 增加账户积分额度完成 userId:xiaofuge orderId:044359738344
24-11-27.12:20:05.313 [http-nio-8091-exec-41] INFO  RaffleActivityController - 积分兑换商品，支付订单完成  userId:xiaofuge sku:9011 orderId:044359738344
24-11-27.12:20:06.468 [http-nio-8091-exec-34] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:20:06.469 [http-nio-8091-exec-35] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:20:06.469 [http-nio-8091-exec-39] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:20:06.469 [http-nio-8091-exec-43] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.12:20:06.525 [http-nio-8091-exec-35] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:20:06.525 [http-nio-8091-exec-39] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:89.21
24-11-27.12:20:06.583 [http-nio-8091-exec-34] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:20:06.609 [http-nio-8091-exec-43] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.12:20:18.077 [http-nio-8091-exec-40] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.12:20:18.134 [http-nio-8091-exec-40] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:丯𑄩𫆙𪐾泟𤽀獼
24-11-27.12:20:18.134 [http-nio-8091-exec-40] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.12:22:57.393 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=2m49s406ms656µs300ns).
24-11-27.12:22:57.393 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=2m49s406ms723µs500ns).
24-11-27.12:22:57.393 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=2m49s406ms714µs200ns).
24-11-27.12:22:57.393 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Client session timed out, have not heard from server in 159294ms for session id 0x10000379162000e
24-11-27.12:22:57.395 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Session 0x10000379162000e for sever 117.72.36.124/117.72.36.124:2181, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
org.apache.zookeeper.ClientCnxn$SessionTimeoutException: Client session timed out, have not heard from server in 159294ms for session id 0x10000379162000e
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1230)
24-11-27.12:22:57.397 [AMQP Connection 117.72.36.124:5672] WARN  ForgivingExceptionHandler - An unexpected connection driver error occurred (Exception message: Connection reset)
24-11-27.12:22:57.399 [http-nio-8091-exec-48] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.12:22:57.399 [http-nio-8091-exec-46] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.12:22:57.455 [http-nio-8091-exec-46] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:丯𑄩𫆙𪐾泟𤽀獼
24-11-27.12:24:06.009 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m8s615ms973µs300ns).
24-11-27.12:24:06.009 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m8s615ms214µs800ns).
24-11-27.12:24:06.009 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m8s616ms91µs800ns).
24-11-27.12:24:06.009 [main-EventThread] INFO  ConnectionStateManager - State change: SUSPENDED
24-11-27.12:24:06.010 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-3] INFO  SimpleMessageListenerContainer - Restarting Consumer@2d3176be: tags=[[amq.ctag-_xpG-rSJydDqArm5oXg30A]], channel=Cached Rabbit Channel: AMQChannel(amqp://admin@117.72.36.124:5672/,4), conn: Proxy@72412c3d Shared Rabbit Connection: SimpleConnection@3dd7d0ed [delegate=amqp://admin@117.72.36.124:5672/, localPort= 65407], acknowledgeMode=AUTO local queue size=0
24-11-27.12:24:06.010 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-3] INFO  SimpleMessageListenerContainer - Restarting Consumer@58382690: tags=[[amq.ctag-cOzKRxcV-mIShszklZY6IA]], channel=Cached Rabbit Channel: AMQChannel(amqp://admin@117.72.36.124:5672/,3), conn: Proxy@72412c3d Shared Rabbit Connection: SimpleConnection@3dd7d0ed [delegate=amqp://admin@117.72.36.124:5672/, localPort= 65407], acknowledgeMode=AUTO local queue size=0
24-11-27.12:24:06.010 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-3] INFO  SimpleMessageListenerContainer - Restarting Consumer@7c752b7e: tags=[[amq.ctag-dlQtMYJmwanViBQzGsu1FA]], channel=Cached Rabbit Channel: AMQChannel(amqp://admin@117.72.36.124:5672/,2), conn: Proxy@72412c3d Shared Rabbit Connection: SimpleConnection@3dd7d0ed [delegate=amqp://admin@117.72.36.124:5672/, localPort= 65407], acknowledgeMode=AUTO local queue size=0
24-11-27.12:24:06.010 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-3] INFO  SimpleMessageListenerContainer - Restarting Consumer@a07806: tags=[[amq.ctag-cCS2FFgq6I1yuScU-5aZhA]], channel=Cached Rabbit Channel: AMQChannel(amqp://admin@117.72.36.124:5672/,1), conn: Proxy@72412c3d Shared Rabbit Connection: SimpleConnection@3dd7d0ed [delegate=amqp://admin@117.72.36.124:5672/, localPort= 65407], acknowledgeMode=AUTO local queue size=0
24-11-27.12:24:06.013 [http-nio-8091-exec-48] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:丯𑄩𫆙𪐾泟𤽀獼
24-11-27.12:24:06.015 [http-nio-8091-exec-46] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.12:24:07.829 [http-nio-8091-exec-48] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.12:24:07.830 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-4] INFO  CachingConnectionFactory - Attempting to connect to: [117.72.36.124:5672]
24-11-27.12:24:08.610 [http-nio-8091-exec-40] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:701428752102
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [E:\code\java\idea\big-market\big-market-app\target\classes\mybatis\mapper\UserCreditOrderDao.xml]
### The error may involve cn.wenzhuo4657.BigMarket.infrastructure.persistent.dao.UserCreditOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values(                   ?,?,?,?,?,?,now(),now()               )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy164.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:96)
	at com.sun.proxy.$Proxy196.insert(Unknown Source)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:92)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:84)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$b71add64.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$1083dd1f.saveUserCreditTradeOrder(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.credit.service.adjust.CreditAdjustService.createOrder(CreditAdjustService.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:363)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$95cfa6d9.creditPayExchangeSku(<generated>)
	at sun.reflect.GeneratedMethodAccessor350.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor145.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy240.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.GeneratedMethodAccessor313.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy239.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:54)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 83 common frames omitted
24-11-27.12:24:08.663 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-4] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#6b9b9cb9:3/SimpleConnection@7846dd24 [delegate=amqp://admin@117.72.36.124:5672/, localPort= 51326]
24-11-27.12:24:08.705 [http-nio-8091-exec-40] ERROR RaffleActivityController - 积分兑换商品失败 userId:xiaofuge sku:9011
java.lang.IllegalMonitorStateException: attempt to unlock lock, not locked by current thread by node id: 92988e43-c0c7-4125-b5de-53dff2597735 thread-id: 189
	at org.redisson.RedissonBaseLock.lambda$unlockAsync0$2(RedissonBaseLock.java:290)
	at java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:836)
	at java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:811)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.command.CommandBatchService.lambda$executeAsync$7(CommandBatchService.java:362)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:774)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.command.CommandBatchService.lambda$execute$9(CommandBatchService.java:471)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:774)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.command.RedisCommonBatchExecutor.handleResult(RedisCommonBatchExecutor.java:164)
	at org.redisson.command.RedisExecutor.checkAttemptPromise(RedisExecutor.java:553)
	at org.redisson.command.RedisExecutor.lambda$execute$5(RedisExecutor.java:195)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:774)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.client.handler.CommandDecoder.decodeCommandBatch(CommandDecoder.java:326)
	at org.redisson.client.handler.CommandDecoder.decodeCommand(CommandDecoder.java:217)
	at org.redisson.client.handler.CommandDecoder.decode(CommandDecoder.java:144)
	at org.redisson.client.handler.CommandDecoder.decode(CommandDecoder.java:120)
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:529)
	at io.netty.handler.codec.ReplayingDecoder.callDecode(ReplayingDecoder.java:366)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:750)
24-11-27.12:24:08.708 [http-nio-8091-exec-46] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:464907502014
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [E:\code\java\idea\big-market\big-market-app\target\classes\mybatis\mapper\UserCreditOrderDao.xml]
### The error may involve cn.wenzhuo4657.BigMarket.infrastructure.persistent.dao.UserCreditOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values(                   ?,?,?,?,?,?,now(),now()               )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy164.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:96)
	at com.sun.proxy.$Proxy196.insert(Unknown Source)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:92)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:84)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$b71add64.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$1083dd1f.saveUserCreditTradeOrder(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.credit.service.adjust.CreditAdjustService.createOrder(CreditAdjustService.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:363)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$95cfa6d9.creditPayExchangeSku(<generated>)
	at sun.reflect.GeneratedMethodAccessor350.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor145.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy240.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.GeneratedMethodAccessor313.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy239.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:54)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 83 common frames omitted
24-11-27.12:24:08.790 [http-nio-8091-exec-46] INFO  CreditAdjustService    - 增加账户积分额度完成 userId:xiaofuge orderId:464907502014
24-11-27.12:24:08.791 [http-nio-8091-exec-46] INFO  RaffleActivityController - 积分兑换商品，支付订单完成  userId:xiaofuge sku:9011 orderId:464907502014
24-11-27.12:24:08.792 [Dubbo-framework-registry-notification-2-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679249423&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:24:08.792 [Dubbo-framework-registry-notification-0-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679248359&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:24:09.017 [http-nio-8091-exec-48] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:802750853026
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [E:\code\java\idea\big-market\big-market-app\target\classes\mybatis\mapper\UserCreditOrderDao.xml]
### The error may involve cn.wenzhuo4657.BigMarket.infrastructure.persistent.dao.UserCreditOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values(                   ?,?,?,?,?,?,now(),now()               )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy164.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:96)
	at com.sun.proxy.$Proxy196.insert(Unknown Source)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:92)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:84)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$b71add64.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$1083dd1f.saveUserCreditTradeOrder(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.credit.service.adjust.CreditAdjustService.createOrder(CreditAdjustService.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:363)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$95cfa6d9.creditPayExchangeSku(<generated>)
	at sun.reflect.GeneratedMethodAccessor350.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor145.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy240.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.GeneratedMethodAccessor313.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy239.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:54)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 83 common frames omitted
24-11-27.12:24:09.102 [http-nio-8091-exec-48] INFO  CreditAdjustService    - 增加账户积分额度完成 userId:xiaofuge orderId:802750853026
24-11-27.12:24:09.103 [http-nio-8091-exec-48] INFO  RaffleActivityController - 积分兑换商品，支付订单完成  userId:xiaofuge sku:9011 orderId:802750853026
24-11-27.12:24:09.642 [Dubbo-framework-registry-notification-0-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679248359&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:24:09.643 [Dubbo-framework-registry-notification-2-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=15524&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679249423&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:24:15.864 [http-nio-8091-exec-50] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:24:15.864 [http-nio-8091-exec-49] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:24:15.865 [http-nio-8091-exec-1] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:24:15.865 [http-nio-8091-exec-47] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.12:24:15.921 [http-nio-8091-exec-50] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:89.21
24-11-27.12:24:15.921 [http-nio-8091-exec-1] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:24:15.975 [http-nio-8091-exec-49] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:24:16.003 [http-nio-8091-exec-47] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.12:24:16.434 [http-nio-8091-exec-11] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.12:24:25.084 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Opening socket connection to server 117.72.36.124/117.72.36.124:2181.
24-11-27.12:24:25.084 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - SASL config status: Will not attempt to authenticate using SASL (unknown error)
24-11-27.12:24:25.112 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Socket connection established, initiating session, client: /10.224.3.20:51351, server: 117.72.36.124/117.72.36.124:2181
24-11-27.12:24:26.797 [main-EventThread] WARN  ConnectionState        - Session expired event received
24-11-27.12:24:26.797 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Unable to reconnect to ZooKeeper service, session 0x10000379162000e has expired
24-11-27.12:24:26.798 [main-EventThread] INFO  ZooKeeper              - Initiating client connection, connectString=117.72.36.124:2181 sessionTimeout=30000 watcher=org.apache.curator.ConnectionState@380fdcf2
24-11-27.12:24:26.798 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Session 0x10000379162000e for sever 117.72.36.124/117.72.36.124:2181, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
org.apache.zookeeper.ClientCnxn$SessionExpiredException: Unable to reconnect to ZooKeeper service, session 0x10000379162000e has expired
	at org.apache.zookeeper.ClientCnxn$SendThread.onConnected(ClientCnxn.java:1406)
	at org.apache.zookeeper.ClientCnxnSocket.readConnectResult(ClientCnxnSocket.java:154)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:84)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:348)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
24-11-27.12:24:27.503 [main-EventThread] INFO  ClientCnxnSocket       - jute.maxbuffer value is 1048575 Bytes
24-11-27.12:24:27.505 [main-EventThread] INFO  ClientCnxn             - zookeeper.request.timeout value is 0. feature enabled=false
24-11-27.12:24:27.970 [main-EventThread] INFO  ConnectionStateManager - State change: LOST
24-11-27.12:24:27.970 [main-EventThread] INFO  ClientCnxn             - EventThread shut down for session: 0x10000379162000e
24-11-27.12:26:47.969 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=2m41s960ms519µs600ns).
24-11-27.12:26:47.969 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=2m41s959ms617µs300ns).
24-11-27.12:26:47.969 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=2m41s959ms733µs500ns).
24-11-27.12:26:47.969 [http-nio-8091-exec-11] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:丯𑄩𫆙𪐾泟𤽀獼
24-11-27.12:26:49.993 [http-nio-8091-exec-11] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.12:26:50.773 [http-nio-8091-exec-11] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:527600694055
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [E:\code\java\idea\big-market\big-market-app\target\classes\mybatis\mapper\UserCreditOrderDao.xml]
### The error may involve cn.wenzhuo4657.BigMarket.infrastructure.persistent.dao.UserCreditOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values(                   ?,?,?,?,?,?,now(),now()               )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy164.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:96)
	at com.sun.proxy.$Proxy196.insert(Unknown Source)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:92)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:84)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$b71add64.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$1083dd1f.saveUserCreditTradeOrder(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.credit.service.adjust.CreditAdjustService.createOrder(CreditAdjustService.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:363)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$95cfa6d9.creditPayExchangeSku(<generated>)
	at sun.reflect.GeneratedMethodAccessor350.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '丯???泟?獼' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor145.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy240.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.GeneratedMethodAccessor313.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy239.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:54)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 83 common frames omitted
24-11-27.12:26:50.855 [http-nio-8091-exec-11] INFO  CreditAdjustService    - 增加账户积分额度完成 userId:xiaofuge orderId:527600694055
24-11-27.12:26:50.855 [http-nio-8091-exec-11] INFO  RaffleActivityController - 积分兑换商品，支付订单完成  userId:xiaofuge sku:9011 orderId:527600694055
24-11-27.12:26:51.459 [http-nio-8091-exec-7] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:26:51.459 [http-nio-8091-exec-8] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:26:51.459 [http-nio-8091-exec-6] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:26:51.462 [http-nio-8091-exec-5] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.12:26:51.514 [http-nio-8091-exec-6] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:26:51.530 [http-nio-8091-exec-8] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:89.21
24-11-27.12:26:51.575 [http-nio-8091-exec-7] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:26:51.614 [http-nio-8091-exec-5] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.12:26:54.790 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Opening socket connection to server 117.72.36.124/117.72.36.124:2181.
24-11-27.12:26:54.790 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - SASL config status: Will not attempt to authenticate using SASL (unknown error)
24-11-27.12:26:54.816 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Socket connection established, initiating session, client: /10.224.3.20:51499, server: 117.72.36.124/117.72.36.124:2181
24-11-27.12:26:54.845 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Session establishment complete on server 117.72.36.124/117.72.36.124:2181, session id = 0x10000379162000f, negotiated timeout = 30000
24-11-27.12:26:54.845 [main-EventThread] INFO  ConnectionStateManager - State change: RECONNECTED
24-11-27.12:26:54.872 [main-EventThread] INFO  EnsembleTracker        - New config event received: {}
24-11-27.12:27:04.982 [http-nio-8091-exec-9] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.12:27:19.392 [http-nio-8091-exec-9] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期、状态、库存(sku)】校验开始。sku:9011 activityId:100301
24-11-27.12:27:21.463 [http-nio-8091-exec-9] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【有效期、状态、库存(sku)】开始。sku:9011 activityId:100301
24-11-27.12:27:40.106 [http-nio-8091-exec-9] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【有效期、状态、库存(sku)】成功。sku:9011 activityId:100301
24-11-27.12:28:05.941 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Client session timed out, have not heard from server in 22217ms for session id 0x10000379162000f
24-11-27.12:28:05.941 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Session 0x10000379162000f for sever 117.72.36.124/117.72.36.124:2181, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
org.apache.zookeeper.ClientCnxn$SessionTimeoutException: Client session timed out, have not heard from server in 22217ms for session id 0x10000379162000f
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1230)
24-11-27.12:29:07.481 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m18s401ms322µs).
24-11-27.12:29:07.481 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m18s401ms416µs).
24-11-27.12:29:07.481 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m18s401ms398µs500ns).
24-11-27.12:29:07.483 [main-EventThread] INFO  ConnectionStateManager - State change: SUSPENDED
24-11-27.12:29:07.662 [http-nio-8091-exec-9] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:朗𤢇𝂻残𪕪갴괐
24-11-27.12:29:48.522 [Curator-ConnectionStateManager-0] WARN  ConnectionStateManager - Session timeout has elapsed while SUSPENDED. Injecting a session expiration. Elapsed ms: 41039. Adjusted session timeout ms: 30000
24-11-27.12:29:48.522 [Curator-ConnectionStateManager-0] INFO  ZooKeeperTestable      - injectSessionExpiration() called
24-11-27.12:29:48.524 [main-EventThread] WARN  ConnectionState        - Session expired event received
24-11-27.12:29:48.524 [main-EventThread] INFO  ZooKeeper              - Initiating client connection, connectString=117.72.36.124:2181 sessionTimeout=30000 watcher=org.apache.curator.ConnectionState@380fdcf2
24-11-27.12:29:49.580 [http-nio-8091-exec-9] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.12:29:49.580 [main-EventThread] INFO  ClientCnxnSocket       - jute.maxbuffer value is 1048575 Bytes
24-11-27.12:29:49.974 [main-EventThread] INFO  ClientCnxn             - zookeeper.request.timeout value is 0. feature enabled=false
24-11-27.12:29:49.974 [main-EventThread] INFO  ConnectionStateManager - State change: LOST
24-11-27.12:29:49.974 [main-EventThread] INFO  ClientCnxn             - EventThread shut down for session: 0x10000379162000f
24-11-27.12:29:50.324 [http-nio-8091-exec-9] INFO  CreditAdjustService    - 增加账户积分额度完成 userId:xiaofuge orderId:053031338811
24-11-27.12:29:50.324 [http-nio-8091-exec-9] INFO  RaffleActivityController - 积分兑换商品，支付订单完成  userId:xiaofuge sku:9011 orderId:053031338811
24-11-27.12:29:51.463 [http-nio-8091-exec-19] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:29:51.463 [http-nio-8091-exec-15] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:29:51.463 [http-nio-8091-exec-12] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:29:51.463 [http-nio-8091-exec-18] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.12:29:51.521 [http-nio-8091-exec-15] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:29:51.521 [http-nio-8091-exec-12] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:90.89
24-11-27.12:29:51.577 [http-nio-8091-exec-19] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:29:51.599 [http-nio-8091-exec-18] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.12:29:54.935 [http-nio-8091-exec-16] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:29:54.935 [http-nio-8091-exec-22] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:29:54.935 [http-nio-8091-exec-10] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:29:54.997 [http-nio-8091-exec-16] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:90.89
24-11-27.12:29:54.997 [http-nio-8091-exec-22] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:29:55.088 [http-nio-8091-exec-10] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:29:55.473 [http-nio-8091-exec-20] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:29:55.473 [http-nio-8091-exec-24] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:29:55.473 [http-nio-8091-exec-17] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:29:55.501 [http-nio-8091-exec-24] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:29:55.501 [http-nio-8091-exec-20] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:90.89
24-11-27.12:29:55.563 [http-nio-8091-exec-17] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:29:55.869 [http-nio-8091-exec-27] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:29:55.869 [http-nio-8091-exec-26] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:29:55.869 [http-nio-8091-exec-23] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:29:55.897 [http-nio-8091-exec-27] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:29:55.898 [http-nio-8091-exec-26] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:90.89
24-11-27.12:29:55.954 [http-nio-8091-exec-23] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:29:57.835 [http-nio-8091-exec-28] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.12:29:57.835 [http-nio-8091-exec-32] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.12:29:57.839 [http-nio-8091-exec-29] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.12:29:57.839 [http-nio-8091-exec-25] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.12:29:57.867 [http-nio-8091-exec-30] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:29:57.868 [http-nio-8091-exec-31] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:29:57.924 [http-nio-8091-exec-31] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:90.89
24-11-27.12:29:57.929 [http-nio-8091-exec-37] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:29:57.954 [http-nio-8091-exec-25] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.12:29:57.959 [http-nio-8091-exec-33] INFO  RaffleActivityController - 查询sku商品集合开始 activityId:100301
24-11-27.12:29:57.974 [http-nio-8091-exec-32] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.12:29:57.977 [http-nio-8091-exec-28] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.12:29:57.978 [http-nio-8091-exec-38] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.12:29:57.978 [http-nio-8091-exec-30] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:29:57.980 [http-nio-8091-exec-36] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:29:57.982 [http-nio-8091-exec-41] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:29:57.982 [http-nio-8091-exec-29] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.12:29:57.986 [http-nio-8091-exec-39] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:29:57.991 [http-nio-8091-exec-37] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:29:57.995 [http-nio-8091-exec-35] INFO  RaffleActivityController - 查询sku商品集合开始 activityId:100301
24-11-27.12:29:58.009 [http-nio-8091-exec-41] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:90.89
24-11-27.12:29:58.012 [http-nio-8091-exec-34] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.12:29:58.014 [http-nio-8091-exec-33] INFO  RaffleActivityController - 查询sku商品集合完成 activityId:100301 skuProductResponseDTOS:[{"activityCount":{"dayCount":100,"monthCount":100,"totalCount":100},"activityCountId":11101,"productAmount":1.68,"sku":9011,"stockCount":100000,"stockCountSurplus":99886}]
24-11-27.12:29:58.019 [http-nio-8091-exec-39] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:29:58.052 [http-nio-8091-exec-35] INFO  RaffleActivityController - 查询sku商品集合完成 activityId:100301 skuProductResponseDTOS:[{"activityCount":{"dayCount":100,"monthCount":100,"totalCount":100},"activityCountId":11101,"productAmount":1.68,"sku":9011,"stockCount":100000,"stockCountSurplus":99886}]
24-11-27.12:29:58.063 [http-nio-8091-exec-38] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.12:29:58.066 [http-nio-8091-exec-36] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:29:58.095 [http-nio-8091-exec-34] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.12:30:00.114 [http-nio-8091-exec-42] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.12:30:00.114 [http-nio-8091-exec-44] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.12:30:00.114 [http-nio-8091-exec-43] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.12:30:00.114 [http-nio-8091-exec-45] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.12:30:00.129 [http-nio-8091-exec-46] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:30:00.129 [http-nio-8091-exec-40] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:30:00.184 [http-nio-8091-exec-46] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:90.89
24-11-27.12:30:00.187 [http-nio-8091-exec-48] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:30:00.216 [http-nio-8091-exec-48] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:30:00.219 [http-nio-8091-exec-1] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:30:00.248 [http-nio-8091-exec-40] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:30:00.249 [http-nio-8091-exec-45] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.12:30:00.251 [http-nio-8091-exec-50] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:30:00.251 [http-nio-8091-exec-49] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:30:00.258 [http-nio-8091-exec-43] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.12:30:00.258 [http-nio-8091-exec-42] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.12:30:00.258 [http-nio-8091-exec-44] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.12:30:00.260 [http-nio-8091-exec-47] INFO  RaffleActivityController - 查询sku商品集合开始 activityId:100301
24-11-27.12:30:00.262 [http-nio-8091-exec-4] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.12:30:00.263 [http-nio-8091-exec-2] INFO  RaffleActivityController - 查询sku商品集合开始 activityId:100301
24-11-27.12:30:00.278 [http-nio-8091-exec-49] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:30:00.280 [http-nio-8091-exec-50] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:90.89
24-11-27.12:30:00.282 [http-nio-8091-exec-3] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.12:30:00.304 [http-nio-8091-exec-1] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:30:00.316 [http-nio-8091-exec-47] INFO  RaffleActivityController - 查询sku商品集合完成 activityId:100301 skuProductResponseDTOS:[{"activityCount":{"dayCount":100,"monthCount":100,"totalCount":100},"activityCountId":11101,"productAmount":1.68,"sku":9011,"stockCount":100000,"stockCountSurplus":99886}]
24-11-27.12:30:00.317 [http-nio-8091-exec-2] INFO  RaffleActivityController - 查询sku商品集合完成 activityId:100301 skuProductResponseDTOS:[{"activityCount":{"dayCount":100,"monthCount":100,"totalCount":100},"activityCountId":11101,"productAmount":1.68,"sku":9011,"stockCount":100000,"stockCountSurplus":99886}]
24-11-27.12:30:00.345 [http-nio-8091-exec-4] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.12:30:00.371 [http-nio-8091-exec-3] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.12:30:01.607 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Opening socket connection to server 117.72.36.124/117.72.36.124:2181.
24-11-27.12:30:01.607 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Opening socket connection to server 117.72.36.124/117.72.36.124:2181.
24-11-27.12:30:01.607 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - SASL config status: Will not attempt to authenticate using SASL (unknown error)
24-11-27.12:30:01.607 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - SASL config status: Will not attempt to authenticate using SASL (unknown error)
24-11-27.12:30:01.608 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Client session timed out, have not heard from server in 54126ms for session id 0x10000379162000f
24-11-27.12:30:01.608 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Session 0x10000379162000f for sever 117.72.36.124/117.72.36.124:2181, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
org.apache.zookeeper.ClientCnxn$SessionTimeoutException: Client session timed out, have not heard from server in 54126ms for session id 0x10000379162000f
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1230)
24-11-27.12:30:01.634 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Socket connection established, initiating session, client: /10.224.3.20:51983, server: 117.72.36.124/117.72.36.124:2181
24-11-27.12:30:01.662 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Session establishment complete on server 117.72.36.124/117.72.36.124:2181, session id = 0x100003791620010, negotiated timeout = 30000
24-11-27.12:30:01.662 [main-EventThread] INFO  ConnectionStateManager - State change: RECONNECTED
24-11-27.12:30:01.689 [main-EventThread] INFO  EnsembleTracker        - New config event received: {}
24-11-27.12:30:01.791 [http-nio-8091-exec-11] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.12:32:12.757 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Client session timed out, have not heard from server in 126217ms for session id 0x100003791620010
24-11-27.12:32:12.757 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=2m24s235ms879µs600ns).
24-11-27.12:32:12.757 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=2m24s235ms976µs).
24-11-27.12:32:12.757 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Session 0x100003791620010 for sever 117.72.36.124/117.72.36.124:2181, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
org.apache.zookeeper.ClientCnxn$SessionTimeoutException: Client session timed out, have not heard from server in 126217ms for session id 0x100003791620010
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1230)
24-11-27.12:32:12.757 [AMQP Connection 117.72.36.124:5672] WARN  ForgivingExceptionHandler - An unexpected connection driver error occurred (Exception message: Connection reset)
24-11-27.12:32:12.757 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=2m24s236ms28µs300ns).
24-11-27.12:32:12.820 [http-nio-8091-exec-11] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:朗𤢇𝂻残𪕪갴괐
24-11-27.12:32:12.820 [http-nio-8091-exec-11] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.12:32:12.861 [Thread-38       ] WARN  HttpClientBeanHolder   - [HttpClientBeanHolder] Start destroying common HttpClient
24-11-27.12:32:12.861 [DubboShutdownHook] INFO  DubboShutdownHook      -  [DUBBO] Run shutdown hook now., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:32:12.861 [Thread-44       ] WARN  NotifyCenter           - [NotifyCenter] Start destroying Publisher
24-11-27.12:32:12.861 [Thread-44       ] WARN  NotifyCenter           - [NotifyCenter] Destruction of the end
24-11-27.12:32:12.861 [DubboShutdownHook] INFO  FrameworkModel         -  [DUBBO] Reset global default application from Dubbo Application[1.1](big-market) to null, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:32:12.861 [DubboShutdownHook] INFO  DefaultApplicationDeployer -  [DUBBO] Dubbo Application[1.1](big-market) is stopping., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:32:12.861 [Thread-38       ] WARN  HttpClientBeanHolder   - [HttpClientBeanHolder] Destruction of the end
24-11-27.12:32:12.863 [main-EventThread] INFO  ConnectionStateManager - State change: SUSPENDED
24-11-27.12:32:12.863 [DubboShutdownHook] INFO  RegistryManager        -  [DUBBO] Close all registries [nacos://117.72.36.124:8848/org.apache.dubbo.registry.RegistryService?REGISTRY_CLUSTER=nacos-registry&application=big-market&application.version=1.0&dubbo=2.0.2&interface=org.apache.dubbo.registry.RegistryService&pid=15524&qos.enable=false&release=3.0.9, nacos://117.72.36.124:8848/org.apache.dubbo.registry.RegistryService?REGISTRY_CLUSTER=nacos-registry&application=big-market&application.version=1.0&dubbo=2.0.2&interface=org.apache.dubbo.registry.RegistryService&pid=15524&qos.enable=false&release=3.0.9], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:32:12.863 [DubboShutdownHook] INFO  NacosRegistry          -  [DUBBO] Destroy registry:nacos://117.72.36.124:8848/org.apache.dubbo.registry.RegistryService?REGISTRY_CLUSTER=nacos-registry&application=big-market&application.version=1.0&dubbo=2.0.2&interface=org.apache.dubbo.registry.RegistryService&pid=15524&qos.enable=false&release=3.0.9, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:32:12.863 [DubboShutdownHook] INFO  NacosRegistry          -  [DUBBO] Unregister: dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,querySkuProductListByActivityId,creditPayExchangeSku,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=15524&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732679248359&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:32:12.865 [SpringApplicationShutdownHook] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.1] is stopping., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:32:12.866 [SpringApplicationShutdownHook] WARN  RegistryManager        -  [DUBBO] All registry instances have been destroyed, failed to fetch any instance. Usually, this means no need to try to do unnecessary redundant resource clearance, all registries has been taken care of., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:32:12.867 [SpringApplicationShutdownHook] WARN  RegistryManager        -  [DUBBO] All registry instances have been destroyed, failed to fetch any instance. Usually, this means no need to try to do unnecessary redundant resource clearance, all registries has been taken care of., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:32:12.867 [SpringApplicationShutdownHook] WARN  RegistryManager        -  [DUBBO] All registry instances have been destroyed, failed to fetch any instance. Usually, this means no need to try to do unnecessary redundant resource clearance, all registries has been taken care of., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:32:12.867 [SpringApplicationShutdownHook] WARN  RegistryManager        -  [DUBBO] All registry instances have been destroyed, failed to fetch any instance. Usually, this means no need to try to do unnecessary redundant resource clearance, all registries has been taken care of., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:32:12.868 [SpringApplicationShutdownHook] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.1] has stopped., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:32:12.868 [SpringApplicationShutdownHook] INFO  DubboSpringInitializer -  [DUBBO] Unbind Dubbo Module[1.1.1] from spring container: org.springframework.beans.factory.support.DefaultListableBeanFactory@2788d0fe, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:32:12.871 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-5] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-27.12:32:12.871 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-5] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-27.12:32:12.871 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-5] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-27.12:32:12.871 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-5] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-27.12:32:12.871 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-5] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-27.12:32:12.871 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-5] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-27.12:32:12.871 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-5] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-27.12:32:12.871 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-5] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-27.12:33:29.761 [main            ] INFO  WelcomeLogoApplicationListener - 

 :: Dubbo Spring Boot (v3.0.9) : https://github.com/apache/dubbo-spring-boot-project
 :: Dubbo (v3.0.9) : https://github.com/apache/dubbo
 :: Discuss group : dev@dubbo.apache.org

24-11-27.12:33:29.805 [background-preinit] INFO  Version                - HV000001: Hibernate Validator 6.2.5.Final
24-11-27.12:33:29.809 [main            ] INFO  Application            - Starting Application using Java 1.8.0_321 on 4657001021 with PID 17416 (E:\code\java\idea\big-market\big-market-app\target\classes started by 14783 in E:\code\java\idea\big-market)
24-11-27.12:33:29.809 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-11-27.12:33:31.265 [main            ] INFO  FrameworkModel         -  [DUBBO] Reset global default framework from null to Dubbo Framework[1], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:31.265 [main            ] INFO  FrameworkModel         -  [DUBBO] Dubbo Framework[1] is created, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:31.305 [main            ] INFO  ApplicationModel       -  [DUBBO] Dubbo Application[1.0](unknown) is created, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:31.305 [main            ] INFO  ScopeModel             -  [DUBBO] Dubbo Module[1.0.0] is created, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:31.334 [main            ] INFO  AbstractConfigManager  -  [DUBBO] Config settings: {dubbo.config.mode=STRICT, dubbo.config.ignore-duplicated-interface=false}, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:31.334 [main            ] INFO  AbstractConfigManager  -  [DUBBO] Config settings: {dubbo.config.mode=STRICT, dubbo.config.ignore-duplicated-interface=false}, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:31.388 [main            ] INFO  FrameworkModel         -  [DUBBO] Reset global default application from null to Dubbo Application[1.1](unknown), dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:31.388 [main            ] INFO  ApplicationModel       -  [DUBBO] Dubbo Application[1.1](unknown) is created, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:31.389 [main            ] INFO  ScopeModel             -  [DUBBO] Dubbo Module[1.1.0] is created, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:31.395 [main            ] INFO  AbstractConfigManager  -  [DUBBO] Config settings: {dubbo.config.mode=STRICT, dubbo.config.ignore-duplicated-interface=false}, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:31.395 [main            ] INFO  AbstractConfigManager  -  [DUBBO] Config settings: {dubbo.config.mode=STRICT, dubbo.config.ignore-duplicated-interface=false}, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:31.406 [main            ] INFO  DubboSpringInitializer -  [DUBBO] Use default application: Dubbo Application[1.1](unknown), dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:31.406 [main            ] INFO  ScopeModel             -  [DUBBO] Dubbo Module[1.1.1] is created, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:31.409 [main            ] INFO  AbstractConfigManager  -  [DUBBO] Config settings: {dubbo.config.mode=STRICT, dubbo.config.ignore-duplicated-interface=false}, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:31.413 [main            ] INFO  DubboSpringInitializer -  [DUBBO] Use default module model of target application: Dubbo Module[1.1.1], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:31.413 [main            ] INFO  DubboSpringInitializer -  [DUBBO] Bind Dubbo Module[1.1.1] to spring container: org.springframework.beans.factory.support.DefaultListableBeanFactory@792bbc74, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:31.695 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-27.12:33:31.697 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-27.12:33:31.746 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 35 ms. Found 0 Redis repository interfaces.
24-11-27.12:33:31.956 [main            ] INFO  ServiceAnnotationPostProcessor -  [DUBBO] BeanNameGenerator bean can't be found in BeanFactory with name [org.springframework.context.annotation.internalConfigurationBeanNameGenerator], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:31.956 [main            ] INFO  ServiceAnnotationPostProcessor -  [DUBBO] BeanNameGenerator will be a instance of org.springframework.context.annotation.AnnotationBeanNameGenerator , it maybe a potential problem on bean name generation., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:31.967 [main            ] INFO  ServiceAnnotationPostProcessor -  [DUBBO] Found 2 classes annotated by Dubbo @Service under package [cn.wenzhuo4657.BigMarket]: [cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController, cn.wenzhuo4657.BigMarket.trigger.http.RaffleStrategyController], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:31.976 [main            ] INFO  ServiceAnnotationPostProcessor -  [DUBBO] Register ServiceBean[ServiceBean:cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService:1.0]: Root bean: class [org.apache.dubbo.config.spring.ServiceBean]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:31.976 [main            ] INFO  ServiceAnnotationPostProcessor -  [DUBBO] Register ServiceBean[ServiceBean:cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService:1.0]: Root bean: class [org.apache.dubbo.config.spring.ServiceBean]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:31.977 [main            ] INFO  ServiceAnnotationPostProcessor -  [DUBBO] BeanNameGenerator bean can't be found in BeanFactory with name [org.springframework.context.annotation.internalConfigurationBeanNameGenerator], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:31.977 [main            ] INFO  ServiceAnnotationPostProcessor -  [DUBBO] BeanNameGenerator will be a instance of org.springframework.context.annotation.AnnotationBeanNameGenerator , it maybe a potential problem on bean name generation., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:31.977 [main            ] WARN  ServiceAnnotationPostProcessor -  [DUBBO] No class annotated by Dubbo @Service was found under package [cn.wenzhuo4657.trigger.api], ignore re-scanned classes: 0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:31.980 [main            ] INFO  ConfigurationClassPostProcessor - Cannot enhance @Configuration bean definition 'org.apache.dubbo.spring.boot.autoconfigure.DubboRelaxedBinding2AutoConfiguration' since its singleton instance has been created too early. The typical cause is a non-static @Bean method with a BeanDefinitionRegistryPostProcessor return type: Consider declaring such methods as 'static'.
24-11-27.12:33:31.980 [main            ] INFO  ConfigurationClassPostProcessor - Cannot enhance @Configuration bean definition 'org.apache.dubbo.spring.boot.autoconfigure.DubboAutoConfiguration' since its singleton instance has been created too early. The typical cause is a non-static @Bean method with a BeanDefinitionRegistryPostProcessor return type: Consider declaring such methods as 'static'.
24-11-27.12:33:32.037 [main            ] INFO  GenericScope           - BeanFactory id=d499ceed-279a-3d77-817f-a65b97419307
24-11-27.12:33:32.577 [main            ] INFO  ReferenceAnnotationBeanPostProcessor - class org.apache.dubbo.config.spring.beans.factory.annotation.ReferenceAnnotationBeanPostProcessor was destroying!
24-11-27.12:33:32.885 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'zooKeeperClientConfig' of type [cn.wenzhuo4657.BigMarket.config.ZooKeeperClientConfig$$EnhancerBySpringCGLIB$$e417e89b] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-11-27.12:33:32.900 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-11-27.12:33:32.904 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-11-27.12:33:32.907 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$585/146875684] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-11-27.12:33:32.911 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-11-27.12:33:32.918 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'zookeeper.sdk.config-cn.wenzhuo4657.BigMarket.config.ZookeeperClientConfigProperties' of type [cn.wenzhuo4657.BigMarket.config.ZookeeperClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-11-27.12:33:32.957 [main            ] INFO  CuratorFrameworkImpl   - Starting
24-11-27.12:33:32.962 [main            ] INFO  ZooKeeper              - Client environment:zookeeper.version=3.6.0--b4c89dc7f6083829e18fae6e446907ae0b1f22d7, built on 02/25/2020 14:38 GMT
24-11-27.12:33:32.962 [main            ] INFO  ZooKeeper              - Client environment:host.name=4657001021.mshome.net
24-11-27.12:33:32.962 [main            ] INFO  ZooKeeper              - Client environment:java.version=1.8.0_321
24-11-27.12:33:32.962 [main            ] INFO  ZooKeeper              - Client environment:java.vendor=Oracle Corporation
24-11-27.12:33:32.962 [main            ] INFO  ZooKeeper              - Client environment:java.home=C:\Program Files\Java\jdk1.8.0_321\jre
24-11-27.12:33:32.962 [main            ] INFO  ZooKeeper              - Client environment:java.class.path=C:\Program Files\Java\jdk1.8.0_321\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\access-bridge-64.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\cldrdata.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\jaccess.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\jfxrt.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\nashorn.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\sunpkcs11.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\zipfs.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\jce.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\jfr.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\jfxswt.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\resources.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\rt.jar;E:\code\java\idea\big-market\big-market-app\target\classes;D:\maven\local-maven\com\xuxueli\xxl-job-core\2.4.1\xxl-job-core-2.4.1.jar;D:\maven\local-maven\io\netty\netty-codec-http\4.1.92.Final\netty-codec-http-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-common\4.1.92.Final\netty-common-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-buffer\4.1.92.Final\netty-buffer-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport\4.1.92.Final\netty-transport-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec\4.1.92.Final\netty-codec-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-handler\4.1.92.Final\netty-handler-4.1.92.Final.jar;D:\maven\local-maven\com\google\code\gson\gson\2.9.1\gson-2.9.1.jar;D:\maven\local-maven\org\apache\groovy\groovy\4.0.21\groovy-4.0.21.jar;D:\maven\local-maven\org\slf4j\slf4j-api\1.7.36\slf4j-api-1.7.36.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-starter-zookeeper-discovery\3.1.4\spring-cloud-starter-zookeeper-discovery-3.1.4.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-starter-zookeeper\3.1.4\spring-cloud-starter-zookeeper-3.1.4.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-starter\3.1.7\spring-cloud-starter-3.1.7.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-context\3.1.7\spring-cloud-context-3.1.7.jar;D:\maven\local-maven\org\springframework\security\spring-security-crypto\5.7.8\spring-security-crypto-5.7.8.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-commons\3.1.7\spring-cloud-commons-3.1.7.jar;D:\maven\local-maven\org\springframework\security\spring-security-rsa\1.0.11.RELEASE\spring-security-rsa-1.0.11.RELEASE.jar;D:\maven\local-maven\org\bouncycastle\bcpkix-jdk15on\1.69\bcpkix-jdk15on-1.69.jar;D:\maven\local-maven\org\bouncycastle\bcprov-jdk15on\1.69\bcprov-jdk15on-1.69.jar;D:\maven\local-maven\org\bouncycastle\bcutil-jdk15on\1.69\bcutil-jdk15on-1.69.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-zookeeper-core\3.1.4\spring-cloud-zookeeper-core-3.1.4.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-validation\2.7.12\spring-boot-starter-validation-2.7.12.jar;D:\maven\local-maven\org\hibernate\validator\hibernate-validator\6.2.5.Final\hibernate-validator-6.2.5.Final.jar;D:\maven\local-maven\org\jboss\logging\jboss-logging\3.4.3.Final\jboss-logging-3.4.3.Final.jar;D:\maven\local-maven\com\fasterxml\classmate\1.5.1\classmate-1.5.1.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-zookeeper-discovery\3.1.4\spring-cloud-zookeeper-discovery-3.1.4.jar;D:\maven\local-maven\org\apache\curator\curator-x-discovery\5.1.0\curator-x-discovery-5.1.0.jar;D:\maven\local-maven\org\apache\curator\curator-recipes\5.1.0\curator-recipes-5.1.0.jar;D:\maven\local-maven\org\apache\curator\curator-framework\5.1.0\curator-framework-5.1.0.jar;D:\maven\local-maven\org\apache\curator\curator-client\5.1.0\curator-client-5.1.0.jar;D:\maven\local-maven\org\apache\zookeeper\zookeeper\3.6.0\zookeeper-3.6.0.jar;D:\maven\local-maven\org\apache\zookeeper\zookeeper-jute\3.6.0\zookeeper-jute-3.6.0.jar;D:\maven\local-maven\org\apache\yetus\audience-annotations\0.5.0\audience-annotations-0.5.0.jar;D:\maven\local-maven\io\netty\netty-transport-native-epoll\4.1.92.Final\netty-transport-native-epoll-4.1.92.Final.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-starter-loadbalancer\3.1.7\spring-cloud-starter-loadbalancer-3.1.7.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-loadbalancer\3.1.7\spring-cloud-loadbalancer-3.1.7.jar;D:\maven\local-maven\io\projectreactor\addons\reactor-extra\3.4.10\reactor-extra-3.4.10.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-cache\2.7.12\spring-boot-starter-cache-2.7.12.jar;D:\maven\local-maven\org\springframework\spring-context-support\5.3.27\spring-context-support-5.3.27.jar;D:\maven\local-maven\com\stoyanr\evictor\1.0.0\evictor-1.0.0.jar;D:\maven\local-maven\org\apache\dubbo\dubbo\3.0.9\dubbo-3.0.9.jar;D:\maven\local-maven\org\springframework\spring-context\5.3.27\spring-context-5.3.27.jar;D:\maven\local-maven\org\springframework\spring-aop\5.3.27\spring-aop-5.3.27.jar;D:\maven\local-maven\org\springframework\spring-beans\5.3.27\spring-beans-5.3.27.jar;D:\maven\local-maven\org\springframework\spring-expression\5.3.27\spring-expression-5.3.27.jar;D:\maven\local-maven\com\alibaba\spring\spring-context-support\1.0.8\spring-context-support-1.0.8.jar;D:\maven\local-maven\org\javassist\javassist\3.28.0-GA\javassist-3.28.0-GA.jar;D:\maven\local-maven\io\netty\netty-all\4.1.92.Final\netty-all-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-dns\4.1.92.Final\netty-codec-dns-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-haproxy\4.1.92.Final\netty-codec-haproxy-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-http2\4.1.92.Final\netty-codec-http2-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-memcache\4.1.92.Final\netty-codec-memcache-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-mqtt\4.1.92.Final\netty-codec-mqtt-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-redis\4.1.92.Final\netty-codec-redis-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-smtp\4.1.92.Final\netty-codec-smtp-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-socks\4.1.92.Final\netty-codec-socks-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-stomp\4.1.92.Final\netty-codec-stomp-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-xml\4.1.92.Final\netty-codec-xml-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport-native-unix-common\4.1.92.Final\netty-transport-native-unix-common-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-handler-proxy\4.1.92.Final\netty-handler-proxy-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-handler-ssl-ocsp\4.1.92.Final\netty-handler-ssl-ocsp-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-resolver\4.1.92.Final\netty-resolver-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-resolver-dns\4.1.92.Final\netty-resolver-dns-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport-rxtx\4.1.92.Final\netty-transport-rxtx-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport-sctp\4.1.92.Final\netty-transport-sctp-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport-udt\4.1.92.Final\netty-transport-udt-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport-classes-epoll\4.1.92.Final\netty-transport-classes-epoll-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport-classes-kqueue\4.1.92.Final\netty-transport-classes-kqueue-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-resolver-dns-classes-macos\4.1.92.Final\netty-resolver-dns-classes-macos-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport-native-epoll\4.1.92.Final\netty-transport-native-epoll-4.1.92.Final-linux-x86_64.jar;D:\maven\local-maven\io\netty\netty-transport-native-epoll\4.1.92.Final\netty-transport-native-epoll-4.1.92.Final-linux-aarch_64.jar;D:\maven\local-maven\io\netty\netty-transport-native-kqueue\4.1.92.Final\netty-transport-native-kqueue-4.1.92.Final-osx-x86_64.jar;D:\maven\local-maven\io\netty\netty-transport-native-kqueue\4.1.92.Final\netty-transport-native-kqueue-4.1.92.Final-osx-aarch_64.jar;D:\maven\local-maven\io\netty\netty-resolver-dns-native-macos\4.1.92.Final\netty-resolver-dns-native-macos-4.1.92.Final-osx-x86_64.jar;D:\maven\local-maven\io\netty\netty-resolver-dns-native-macos\4.1.92.Final\netty-resolver-dns-native-macos-4.1.92.Final-osx-aarch_64.jar;D:\maven\local-maven\org\yaml\snakeyaml\1.30\snakeyaml-1.30.jar;D:\maven\local-maven\org\apache\dubbo\dubbo-spring-boot-starter\3.0.9\dubbo-spring-boot-starter-3.0.9.jar;D:\maven\local-maven\org\apache\dubbo\dubbo-spring-boot-autoconfigure\3.0.9\dubbo-spring-boot-autoconfigure-3.0.9.jar;D:\maven\local-maven\org\apache\dubbo\dubbo-spring-boot-autoconfigure-compatible\3.0.9\dubbo-spring-boot-autoconfigure-compatible-3.0.9.jar;D:\maven\local-maven\com\alibaba\nacos\nacos-client\2.1.0\nacos-client-2.1.0.jar;D:\maven\local-maven\com\alibaba\nacos\nacos-auth-plugin\2.1.0\nacos-auth-plugin-2.1.0.jar;D:\maven\local-maven\com\alibaba\nacos\nacos-encryption-plugin\2.1.0\nacos-encryption-plugin-2.1.0.jar;D:\maven\local-maven\com\fasterxml\jackson\core\jackson-core\2.13.5\jackson-core-2.13.5.jar;D:\maven\local-maven\com\fasterxml\jackson\core\jackson-databind\2.13.5\jackson-databind-2.13.5.jar;D:\maven\local-maven\com\fasterxml\jackson\core\jackson-annotations\2.13.5\jackson-annotations-2.13.5.jar;D:\maven\local-maven\org\apache\httpcomponents\httpasyncclient\4.1.5\httpasyncclient-4.1.5.jar;D:\maven\local-maven\org\apache\httpcomponents\httpcore\4.4.16\httpcore-4.4.16.jar;D:\maven\local-maven\org\apache\httpcomponents\httpcore-nio\4.4.16\httpcore-nio-4.4.16.jar;D:\maven\local-maven\org\apache\httpcomponents\httpclient\4.5.14\httpclient-4.5.14.jar;D:\maven\local-maven\io\prometheus\simpleclient\0.15.0\simpleclient-0.15.0.jar;D:\maven\local-maven\io\prometheus\simpleclient_tracer_otel\0.15.0\simpleclient_tracer_otel-0.15.0.jar;D:\maven\local-maven\io\prometheus\simpleclient_tracer_common\0.15.0\simpleclient_tracer_common-0.15.0.jar;D:\maven\local-maven\io\prometheus\simpleclient_tracer_otel_agent\0.15.0\simpleclient_tracer_otel_agent-0.15.0.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-web\2.7.12\spring-boot-starter-web-2.7.12.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter\2.7.12\spring-boot-starter-2.7.12.jar;D:\maven\local-maven\org\springframework\boot\spring-boot\2.7.12\spring-boot-2.7.12.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-logging\2.7.12\spring-boot-starter-logging-2.7.12.jar;D:\maven\local-maven\ch\qos\logback\logback-classic\1.2.12\logback-classic-1.2.12.jar;D:\maven\local-maven\ch\qos\logback\logback-core\1.2.12\logback-core-1.2.12.jar;D:\maven\local-maven\org\apache\logging\log4j\log4j-to-slf4j\2.17.2\log4j-to-slf4j-2.17.2.jar;D:\maven\local-maven\org\apache\logging\log4j\log4j-api\2.17.2\log4j-api-2.17.2.jar;D:\maven\local-maven\org\slf4j\jul-to-slf4j\1.7.36\jul-to-slf4j-1.7.36.jar;D:\maven\local-maven\jakarta\annotation\jakarta.annotation-api\1.3.5\jakarta.annotation-api-1.3.5.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-json\2.7.12\spring-boot-starter-json-2.7.12.jar;D:\maven\local-maven\com\fasterxml\jackson\datatype\jackson-datatype-jdk8\2.13.5\jackson-datatype-jdk8-2.13.5.jar;D:\maven\local-maven\com\fasterxml\jackson\datatype\jackson-datatype-jsr310\2.13.5\jackson-datatype-jsr310-2.13.5.jar;D:\maven\local-maven\com\fasterxml\jackson\module\jackson-module-parameter-names\2.13.5\jackson-module-parameter-names-2.13.5.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-tomcat\2.7.12\spring-boot-starter-tomcat-2.7.12.jar;D:\maven\local-maven\org\apache\tomcat\embed\tomcat-embed-el\9.0.75\tomcat-embed-el-9.0.75.jar;D:\maven\local-maven\org\apache\tomcat\embed\tomcat-embed-websocket\9.0.75\tomcat-embed-websocket-9.0.75.jar;D:\maven\local-maven\org\springframework\spring-web\5.3.27\spring-web-5.3.27.jar;D:\maven\local-maven\org\springframework\spring-webmvc\5.3.27\spring-webmvc-5.3.27.jar;D:\maven\local-maven\net\bytebuddy\byte-buddy\1.12.23\byte-buddy-1.12.23.jar;D:\maven\local-maven\org\objenesis\objenesis\3.2\objenesis-3.2.jar;D:\maven\local-maven\org\springframework\spring-core\5.3.27\spring-core-5.3.27.jar;D:\maven\local-maven\org\springframework\spring-jcl\5.3.27\spring-jcl-5.3.27.jar;D:\maven\local-maven\org\apache\tomcat\embed\tomcat-embed-core\9.0.75\tomcat-embed-core-9.0.75.jar;D:\maven\local-maven\org\apache\tomcat\tomcat-annotations-api\9.0.75\tomcat-annotations-api-9.0.75.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-configuration-processor\2.7.12\spring-boot-configuration-processor-2.7.12.jar;D:\maven\local-maven\com\baomidou\mybatis-plus-boot-starter\3.3.1\mybatis-plus-boot-starter-3.3.1.jar;D:\maven\local-maven\com\baomidou\mybatis-plus\3.3.1\mybatis-plus-3.3.1.jar;D:\maven\local-maven\com\baomidou\mybatis-plus-extension\3.3.1\mybatis-plus-extension-3.3.1.jar;D:\maven\local-maven\com\baomidou\mybatis-plus-core\3.3.1\mybatis-plus-core-3.3.1.jar;D:\maven\local-maven\com\baomidou\mybatis-plus-annotation\3.3.1\mybatis-plus-annotation-3.3.1.jar;D:\maven\local-maven\com\github\jsqlparser\jsqlparser\3.1\jsqlparser-3.1.jar;D:\maven\local-maven\org\mybatis\mybatis-spring\2.0.3\mybatis-spring-2.0.3.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-autoconfigure\2.7.12\spring-boot-autoconfigure-2.7.12.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-jdbc\2.7.12\spring-boot-starter-jdbc-2.7.12.jar;D:\maven\local-maven\com\zaxxer\HikariCP\4.0.3\HikariCP-4.0.3.jar;D:\maven\local-maven\org\springframework\spring-jdbc\5.3.27\spring-jdbc-5.3.27.jar;D:\maven\local-maven\mysql\mysql-connector-java\8.0.22\mysql-connector-java-8.0.22.jar;D:\maven\local-maven\com\google\protobuf\protobuf-java\3.11.4\protobuf-java-3.11.4.jar;D:\maven\local-maven\com\alibaba\fastjson\2.0.28\fastjson-2.0.28.jar;D:\maven\local-maven\com\alibaba\fastjson2\fastjson2-extension\2.0.28\fastjson2-extension-2.0.28.jar;D:\maven\local-maven\com\alibaba\fastjson2\fastjson2\2.0.28\fastjson2-2.0.28.jar;D:\maven\local-maven\org\apache\commons\commons-lang3\3.9\commons-lang3-3.9.jar;D:\maven\local-maven\org\projectlombok\lombok\1.18.26\lombok-1.18.26.jar;D:\maven\local-maven\com\google\guava\guava\32.1.3-jre\guava-32.1.3-jre.jar;D:\maven\local-maven\com\google\guava\failureaccess\1.0.1\failureaccess-1.0.1.jar;D:\maven\local-maven\com\google\guava\listenablefuture\9999.0-empty-to-avoid-conflict-with-guava\listenablefuture-9999.0-empty-to-avoid-conflict-with-guava.jar;D:\maven\local-maven\com\google\code\findbugs\jsr305\3.0.2\jsr305-3.0.2.jar;D:\maven\local-maven\org\checkerframework\checker-qual\3.37.0\checker-qual-3.37.0.jar;D:\maven\local-maven\com\google\errorprone\error_prone_annotations\2.21.1\error_prone_annotations-2.21.1.jar;D:\maven\local-maven\com\google\j2objc\j2objc-annotations\2.8\j2objc-annotations-2.8.jar;D:\maven\local-maven\io\jsonwebtoken\jjwt\0.9.1\jjwt-0.9.1.jar;D:\maven\local-maven\com\auth0\java-jwt\4.4.0\java-jwt-4.4.0.jar;D:\maven\local-maven\commons-codec\commons-codec\1.15\commons-codec-1.15.jar;D:\maven\local-maven\com\squareup\retrofit2\converter-gson\2.9.0\converter-gson-2.9.0.jar;D:\maven\local-maven\com\squareup\retrofit2\retrofit\2.9.0\retrofit-2.9.0.jar;D:\maven\local-maven\com\squareup\okhttp3\okhttp\4.9.3\okhttp-4.9.3.jar;D:\maven\local-maven\com\squareup\okio\okio\2.8.0\okio-2.8.0.jar;D:\maven\local-maven\org\jetbrains\kotlin\kotlin-stdlib-common\1.6.21\kotlin-stdlib-common-1.6.21.jar;D:\maven\local-maven\org\jetbrains\kotlin\kotlin-stdlib\1.6.21\kotlin-stdlib-1.6.21.jar;D:\maven\local-maven\org\jetbrains\annotations\13.0\annotations-13.0.jar;E:\code\java\idea\big-market\big-market-trigger\target\classes;D:\maven\local-maven\com\netflix\hystrix\hystrix-javanica\1.5.18\hystrix-javanica-1.5.18.jar;D:\maven\local-maven\org\aspectj\aspectjrt\1.9.7\aspectjrt-1.9.7.jar;D:\maven\local-maven\org\ow2\asm\asm\5.0.4\asm-5.0.4.jar;D:\maven\local-maven\com\netflix\hystrix\hystrix-core\1.5.18\hystrix-core-1.5.18.jar;D:\maven\local-maven\com\netflix\archaius\archaius-core\0.4.1\archaius-core-0.4.1.jar;D:\maven\local-maven\commons-configuration\commons-configuration\1.8\commons-configuration-1.8.jar;D:\maven\local-maven\io\reactivex\rxjava\1.3.8\rxjava-1.3.8.jar;D:\maven\local-maven\org\hdrhistogram\HdrHistogram\2.1.9\HdrHistogram-2.1.9.jar;D:\maven\local-maven\org\aspectj\aspectjweaver\1.9.7\aspectjweaver-1.9.7.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-amqp\3.2.0\spring-boot-starter-amqp-3.2.0.jar;D:\maven\local-maven\org\springframework\spring-messaging\5.3.27\spring-messaging-5.3.27.jar;D:\maven\local-maven\org\springframework\amqp\spring-rabbit\2.4.12\spring-rabbit-2.4.12.jar;D:\maven\local-maven\org\springframework\amqp\spring-amqp\2.4.12\spring-amqp-2.4.12.jar;D:\maven\local-maven\org\springframework\retry\spring-retry\1.3.4\spring-retry-1.3.4.jar;D:\maven\local-maven\com\rabbitmq\amqp-client\5.14.2\amqp-client-5.14.2.jar;E:\code\java\idea\big-market\big-market-api\target\classes;D:\maven\local-maven\jakarta\validation\jakarta.validation-api\2.0.2\jakarta.validation-api-2.0.2.jar;D:\maven\local-maven\cn\bugstack\middleware\db-router-spring-boot-starter\1.0.2\db-router-spring-boot-starter-1.0.2.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-aop\2.7.12\spring-boot-starter-aop-2.7.12.jar;D:\maven\local-maven\org\mybatis\spring\boot\mybatis-spring-boot-starter\2.1.4\mybatis-spring-boot-starter-2.1.4.jar;D:\maven\local-maven\org\mybatis\spring\boot\mybatis-spring-boot-autoconfigure\2.1.4\mybatis-spring-boot-autoconfigure-2.1.4.jar;D:\maven\local-maven\org\mybatis\mybatis\3.5.6\mybatis-3.5.6.jar;D:\maven\local-maven\commons-beanutils\commons-beanutils\1.9.4\commons-beanutils-1.9.4.jar;D:\maven\local-maven\commons-logging\commons-logging\1.2\commons-logging-1.2.jar;D:\maven\local-maven\commons-collections\commons-collections\3.2.2\commons-collections-3.2.2.jar;D:\maven\local-maven\commons-lang\commons-lang\2.6\commons-lang-2.6.jar;D:\maven\local-maven\org\springframework\spring-tx\5.3.27\spring-tx-5.3.27.jar;E:\code\java\idea\big-market\big-market-types\target\classes;D:\maven\local-maven\com\thoughtworks\xstream\xstream\1.4.10\xstream-1.4.10.jar;D:\maven\local-maven\xmlpull\xmlpull\1.1.3.1\xmlpull-1.1.3.1.jar;D:\maven\local-maven\xpp3\xpp3_min\1.1.4c\xpp3_min-1.1.4c.jar;D:\maven\local-maven\dom4j\dom4j\1.6.1\dom4j-1.6.1.jar;D:\maven\local-maven\xml-apis\xml-apis\1.0.b2\xml-apis-1.0.b2.jar;E:\code\java\idea\big-market\big-market-domain\target\classes;D:\maven\local-maven\org\springframework\boot\spring-boot-actuator-autoconfigure\2.7.12\spring-boot-actuator-autoconfigure-2.7.12.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-actuator\2.7.12\spring-boot-actuator-2.7.12.jar;E:\code\java\idea\big-market\big-market-infrastructure\target\classes;D:\maven\local-maven\org\redisson\redisson-spring-boot-starter\3.23.4\redisson-spring-boot-starter-3.23.4.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-actuator\2.7.12\spring-boot-starter-actuator-2.7.12.jar;D:\maven\local-maven\io\micrometer\micrometer-core\1.9.11\micrometer-core-1.9.11.jar;D:\maven\local-maven\org\latencyutils\LatencyUtils\2.0.3\LatencyUtils-2.0.3.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-data-redis\2.7.12\spring-boot-starter-data-redis-2.7.12.jar;D:\maven\local-maven\org\springframework\data\spring-data-redis\2.7.12\spring-data-redis-2.7.12.jar;D:\maven\local-maven\org\springframework\data\spring-data-keyvalue\2.7.12\spring-data-keyvalue-2.7.12.jar;D:\maven\local-maven\org\springframework\data\spring-data-commons\2.7.12\spring-data-commons-2.7.12.jar;D:\maven\local-maven\org\springframework\spring-oxm\5.3.27\spring-oxm-5.3.27.jar;D:\maven\local-maven\org\redisson\redisson\3.23.4\redisson-3.23.4.jar;D:\maven\local-maven\javax\cache\cache-api\1.1.1\cache-api-1.1.1.jar;D:\maven\local-maven\io\projectreactor\reactor-core\3.4.29\reactor-core-3.4.29.jar;D:\maven\local-maven\org\reactivestreams\reactive-streams\1.0.4\reactive-streams-1.0.4.jar;D:\maven\local-maven\io\reactivex\rxjava3\rxjava\3.1.6\rxjava-3.1.6.jar;D:\maven\local-maven\org\jboss\marshalling\jboss-marshalling\2.0.11.Final\jboss-marshalling-2.0.11.Final.jar;D:\maven\local-maven\org\jboss\marshalling\jboss-marshalling-river\2.0.11.Final\jboss-marshalling-river-2.0.11.Final.jar;D:\maven\local-maven\com\esotericsoftware\kryo\5.5.0\kryo-5.5.0.jar;D:\maven\local-maven\com\esotericsoftware\reflectasm\1.11.9\reflectasm-1.11.9.jar;D:\maven\local-maven\com\esotericsoftware\minlog\1.3.1\minlog-1.3.1.jar;D:\maven\local-maven\com\fasterxml\jackson\dataformat\jackson-dataformat-yaml\2.13.5\jackson-dataformat-yaml-2.13.5.jar;D:\maven\local-maven\org\jodd\jodd-bean\5.1.6\jodd-bean-5.1.6.jar;D:\maven\local-maven\org\jodd\jodd-core\5.1.6\jodd-core-5.1.6.jar;D:\maven\local-maven\org\redisson\redisson-spring-data-31\3.23.4\redisson-spring-data-31-3.23.4.jar;D:\Program Files (x86)\IntelliJ IDEA 2023.1.7\lib\idea_rt.jar
24-11-27.12:33:32.962 [main            ] INFO  ZooKeeper              - Client environment:java.library.path=C:\Program Files\Java\jdk1.8.0_321\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;D:\Program Files (x86)\Ruby33-x64\bin;C:\Program Files (x86)\VMware\VMware Workstation\bin\;C:\Program Files (x86)\Common Files\Oracle\Java\java8path;C:\Program Files (x86)\Common Files\Oracle\Java\javapath;C:\Program Files\Java\jdk1.8.0_321\bin;E:\software\mysql\mysql8.0\mysql-8.0.39-winx64\bin;C:\Windows\system32;E:\software\mysql\mysql5.7\mysql-5.7.30-winx64\bin;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Windows\System32\OpenSSH\;C:\Program Files\dotnet\;D:\maven\apache-maven-3.9.9\bin;E:\software\Git\cmd;E:\software\redis-windows;E:\software\nvm\nvm;E:\software\nvm\nodejs;D:\gradle\gradle-8.10.2\bin;E:\software\giff\git-cliff-2.6.1\bin;D:\Program Files (x86)\Git LFS;C:\Program Files (x86)\Windows Kits\10\Windows Performance Toolkit\;C:\Program Files (x86)\Windows Kits\10\Microsoft Application Virtualization\Sequencer\;C:\Program Files\Docker\Docker\resources\bin;C:\Windows\system32;C:\Program Files (x86)\VMware\VMware Workstation\bin\;C:\Program Files (x86)\Common Files\Oracle\Java\java8path;C:\Program Files (x86)\Common Files\Oracle\Java\javapath;C:\Program Files\Java\jdk1.8.0_321\bin;E:\software\mysql\mysql8.0\mysql-8.0.39-winx64\bin;E:\software\mysql\mysql5.7\mysql-5.7.30-winx64\bin;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Windows\System32\OpenSSH\;C:\Program Files\dotnet\;D:\maven\apache-maven-3.9.9\bin;E:\software\Git\cmd;E:\software\redis-windows;E:\software\nvm\nvm;E:\software\nvm\nodejs;D:\gradle\gradle-8.10.2\bin;E:\software\giff\git-cliff-2.6.1\bin;C:\Program Files (x86)\VMware\VMware Workstation\bin\;C:\Program Files (x86)\Common Files\Oracle\Java\java8path;C:\Program Files (x86)\Common Files\Oracle\Java\javapath;C:\Program Files\Java\jdk1.8.0_321\bin;E:\software\mysql\mysql8.0\mysql-8.0.39-winx64\bin;C:\Windows\system32;E:\software\mysql\mysql5.7\mysql-5.7.30-winx64\bin;C:\Windows;C:\Windows\System32\Wbem;C:\Windo;E:\software\Fiddler;;.
24-11-27.12:33:32.962 [main            ] INFO  ZooKeeper              - Client environment:java.io.tmpdir=C:\Users\14783\AppData\Local\Temp\
24-11-27.12:33:32.963 [main            ] INFO  ZooKeeper              - Client environment:java.compiler=<NA>
24-11-27.12:33:32.963 [main            ] INFO  ZooKeeper              - Client environment:os.name=Windows 11
24-11-27.12:33:32.963 [main            ] INFO  ZooKeeper              - Client environment:os.arch=amd64
24-11-27.12:33:32.963 [main            ] INFO  ZooKeeper              - Client environment:os.version=10.0
24-11-27.12:33:32.963 [main            ] INFO  ZooKeeper              - Client environment:user.name=14783
24-11-27.12:33:32.963 [main            ] INFO  ZooKeeper              - Client environment:user.home=C:\Users\14783
24-11-27.12:33:32.963 [main            ] INFO  ZooKeeper              - Client environment:user.dir=E:\code\java\idea\big-market
24-11-27.12:33:32.963 [main            ] INFO  ZooKeeper              - Client environment:os.memory.free=279MB
24-11-27.12:33:32.963 [main            ] INFO  ZooKeeper              - Client environment:os.memory.max=3609MB
24-11-27.12:33:32.963 [main            ] INFO  ZooKeeper              - Client environment:os.memory.total=417MB
24-11-27.12:33:32.965 [main            ] INFO  ZooKeeper              - Initiating client connection, connectString=117.72.36.124:2181 sessionTimeout=30000 watcher=org.apache.curator.ConnectionState@4a216eb4
24-11-27.12:33:32.966 [main            ] INFO  X509Util               - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
24-11-27.12:33:32.975 [main            ] INFO  ClientCnxnSocket       - jute.maxbuffer value is 1048575 Bytes
24-11-27.12:33:32.980 [main            ] INFO  ClientCnxn             - zookeeper.request.timeout value is 0. feature enabled=false
24-11-27.12:33:32.990 [main            ] INFO  CuratorFrameworkImpl   - Default schema
24-11-27.12:33:33.022 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'zookeeperClient' of type [org.apache.curator.framework.imps.CuratorFrameworkImpl] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-11-27.12:33:44.632 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Opening socket connection to server 117.72.36.124/117.72.36.124:2181.
24-11-27.12:33:44.632 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - SASL config status: Will not attempt to authenticate using SASL (unknown error)
24-11-27.12:33:44.660 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Socket connection established, initiating session, client: /10.224.3.20:52589, server: 117.72.36.124/117.72.36.124:2181
24-11-27.12:33:44.691 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Session establishment complete on server 117.72.36.124/117.72.36.124:2181, session id = 0x100003791620011, negotiated timeout = 30000
24-11-27.12:33:44.694 [main-EventThread] INFO  ConnectionStateManager - State change: CONNECTED
24-11-27.12:33:44.728 [main-EventThread] INFO  EnsembleTracker        - New config event received: {}
24-11-27.12:33:44.728 [main-EventThread] INFO  EnsembleTracker        - New config event received: {}
24-11-27.12:33:44.977 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-11-27.12:33:44.984 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-11-27.12:33:44.985 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-11-27.12:33:44.985 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-11-27.12:33:45.168 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-11-27.12:33:45.168 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 15219 ms
24-11-27.12:33:45.639 [main            ] INFO  DubboConfigBeanInitializer - loading dubbo config beans ...
24-11-27.12:33:45.643 [main            ] INFO  DubboConfigBeanInitializer - dubbo config beans are loaded.
24-11-27.12:33:45.676 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] No value is configured in the registry, the DynamicConfigurationFactory extension[name : nacos] supports as the config center, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:45.677 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] The registry[<dubbo:registry id="nacos-registry" address="nacos://117.72.36.124:8848" protocol="nacos" port="8848" />] will be used as the config center, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:45.681 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] use registry as config-center: <dubbo:config-center highestPriority="false" id="config-center-nacos-117.72.36.124-8848" address="nacos://117.72.36.124:8848" protocol="nacos" port="8848" />, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:45.720 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
24-11-27.12:33:45.720 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
24-11-27.12:33:47.500 [main            ] WARN  ConfigurationUtils     -  [DUBBO] Config center was specified, but no config item found., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:47.500 [main            ] WARN  ConfigurationUtils     -  [DUBBO] Config center was specified, but no config item found., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:47.523 [main            ] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.0] has been initialized!, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:47.526 [main            ] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.1] has been initialized!, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:47.529 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] No value is configured in the registry, the MetadataReportFactory extension[name : nacos] supports as the metadata center, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:47.529 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] The registry[<dubbo:registry id="nacos-registry" address="nacos://117.72.36.124:8848" protocol="nacos" port="8848" />] will be used as the metadata center, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:47.532 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] use registry as metadata-center: <dubbo:metadata-report id="nacos-registry" address="nacos://117.72.36.124:8848" protocol="nacos" port="8848" />, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:47.595 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
24-11-27.12:33:47.595 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
24-11-27.12:33:47.595 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] Dubbo Application[1.1](big-market) has been initialized!, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:47.670 [main            ] INFO  DCCValueBeanFactory    - DCC 节点监听 设置配置 /big-market-dcc/config/rateLimiterSwitch rateLimiterSwitch 172.18.144.1
24-11-27.12:33:47.903 [main            ] INFO  Version                - Redisson 3.23.4
24-11-27.12:33:48.387 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.36.124/117.72.36.124:6379
24-11-27.12:33:48.881 [redisson-netty-2-23] INFO  MasterConnectionPool   - 10 connections initialized for 117.72.36.124/117.72.36.124:6379
24-11-27.12:33:50.354 [main            ] INFO  DCCValueBeanFactory    - DCC 节点监听 设置配置 /big-market-dcc/config/degradeSwitch degradeSwitch 172.18.144.1
24-11-27.12:33:50.392 [main            ] INFO  XxlJobAutoConfig       - >>>>>>>>>>> xxl-job config init.
24-11-27.12:33:52.993 [main            ] WARN  LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
24-11-27.12:33:52.999 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-27.12:33:53.101 [main            ] INFO  XxlJobExecutor         - >>>>>>>>>>> xxl-job register jobhandler success, name:SendMessageTaskJob_DB1, jobHandler:com.xxl.job.core.handler.impl.MethodJobHandler@34cb1310[class cn.wenzhuo4657.BigMarket.trigger.job.SendMessageTaskJob#exec_db01]
24-11-27.12:33:53.102 [main            ] INFO  XxlJobExecutor         - >>>>>>>>>>> xxl-job register jobhandler success, name:UpdateActivitySkuStockJob, jobHandler:com.xxl.job.core.handler.impl.MethodJobHandler@2b5a04b0[class cn.wenzhuo4657.BigMarket.trigger.job.UpdateActivitySkuStockJob#exec]
24-11-27.12:33:53.102 [main            ] INFO  XxlJobExecutor         - >>>>>>>>>>> xxl-job register jobhandler success, name:updateAwardStockJob, jobHandler:com.xxl.job.core.handler.impl.MethodJobHandler@41a3c6f5[class cn.wenzhuo4657.BigMarket.trigger.job.UpdateAwardStockJob#exec]
24-11-27.12:33:53.162 [Thread-68       ] INFO  EmbedServer            - >>>>>>>>>>> xxl-job remoting server start success, nettype = class com.xxl.job.core.server.EmbedServer, port = 9999
24-11-27.12:33:53.212 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-11-27.12:33:53.224 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-11-27.12:33:54.020 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [117.72.36.124:5672]
24-11-27.12:33:54.163 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#4687366b:0/SimpleConnection@532e00bd [delegate=amqp://admin@117.72.36.124:5672/, localPort= 52800]
24-11-27.12:33:54.872 [main            ] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.1] is starting., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:54.873 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] Dubbo Application[1.1](big-market) is starting., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:54.994 [main            ] WARN  ServiceConfig          -  [DUBBO] Use random available port(20880) for protocol dubbo, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:55.046 [main            ] INFO  ServiceConfig          -  [DUBBO] Export dubbo service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService to local registry url : injvm://127.0.0.1/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,creditPayExchangeSku,querySkuProductListByActivityId,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=17416&qos.enable=false&release=3.0.9&revision=1.0&side=provider&timestamp=1732682034989&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:55.046 [main            ] INFO  ServiceConfig          -  [DUBBO] Register dubbo service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService url dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,creditPayExchangeSku,querySkuProductListByActivityId,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=17416&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682034989&version=1.0 to registry 117.72.36.124:8848, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:55.049 [main            ] INFO  QosProtocolWrapper     -  [DUBBO] qos won't be started because it is disabled. Please check dubbo.application.qos.enable is configured either in system property, dubbo.properties or XML/spring-boot configuration., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:55.168 [main            ] INFO  AbstractServer         -  [DUBBO] Start NettyServer bind /0.0.0.0:20880, export /172.18.144.1:20880, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:55.203 [main            ] INFO  MetaCacheManager       -  [DUBBO] Successfully loaded mapping cache from file .metadata.nacos117.72.36.124:8848, entries 0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:55.224 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
24-11-27.12:33:55.224 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
24-11-27.12:33:55.438 [main            ] INFO  MappingCacheManager    -  [DUBBO] Successfully loaded mapping cache from file .mapping, entries 0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:55.447 [main            ] INFO  MigrationRuleListener  -  [DUBBO] Listening for migration rules on dataId big-market.migration, group DUBBO_SERVICEDISCOVERY_MIGRATION, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:55.480 [main            ] INFO  ServiceConfig          -  [DUBBO] Register dubbo service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService url dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,creditPayExchangeSku,querySkuProductListByActivityId,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=17416&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682034989&version=1.0 to registry 117.72.36.124:8848, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:55.481 [main            ] INFO  QosProtocolWrapper     -  [DUBBO] qos won't be started because it is disabled. Please check dubbo.application.qos.enable is configured either in system property, dubbo.properties or XML/spring-boot configuration., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:55.517 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
24-11-27.12:33:55.517 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
24-11-27.12:33:55.711 [main            ] INFO  NacosRegistry          -  [DUBBO] Register: dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,creditPayExchangeSku,querySkuProductListByActivityId,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=17416&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682034989&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:55.746 [main            ] INFO  NacosRegistry          -  [DUBBO] Subscribe: provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,creditPayExchangeSku,querySkuProductListByActivityId,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=17416&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682034989&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:55.825 [main            ] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,creditPayExchangeSku,querySkuProductListByActivityId,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=17416&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682034989&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:55.831 [DubboSaveMetadataReport-thread-1] INFO  NacosMetadataReport    -  [DUBBO] store provider metadata. Identifier : org.apache.dubbo.metadata.report.identifier.MetadataIdentifier@4086085f; definition: FullServiceDefinition{parameters=org.apache.dubbo.common.url.component.URLParam$URLParamMap@d460dc0e} ServiceDefinition [canonicalName=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService, codeSource=file:/E:/code/java/idea/big-market/big-market-api/target/classes/, methods=[MethodDefinition [name=armory, parameterTypes=[java.lang.Long], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=draw, parameterTypes=[cn.wenzhuo4657.BigMarket.tigger.api.dto.ActivityDrawRequestDTO], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=queryUserCreditAccount, parameterTypes=[java.lang.String], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=creditPayExchangeSku, parameterTypes=[cn.wenzhuo4657.BigMarket.tigger.api.dto.SkuProductShopCartRequestDTO], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=queryUserActivityAccount, parameterTypes=[cn.wenzhuo4657.BigMarket.tigger.api.dto.UserActivityAccountRequestDTO], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=isCalendarSignRebate, parameterTypes=[java.lang.String], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=querySkuProductListByActivityId, parameterTypes=[java.lang.Long], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=calendarSignRebate, parameterTypes=[java.lang.String], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response]]], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:56.069 [main            ] INFO  ServiceConfig          -  [DUBBO] Successfully registered interface application mapping for service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService:1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:56.081 [main            ] INFO  ServiceConfig          -  [DUBBO] Export dubbo service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService to local registry url : injvm://127.0.0.1/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,strategyArmory,queryRaffleAwardList,queryRaffleStrategyRuleWeight&pid=17416&qos.enable=false&release=3.0.9&revision=1.0&side=provider&timestamp=1732682036071&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:56.081 [main            ] INFO  ServiceConfig          -  [DUBBO] Register dubbo service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService url dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,strategyArmory,queryRaffleAwardList,queryRaffleStrategyRuleWeight&pid=17416&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682036071&version=1.0 to registry 117.72.36.124:8848, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:56.113 [main            ] INFO  ServiceConfig          -  [DUBBO] Register dubbo service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService url dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,strategyArmory,queryRaffleAwardList,queryRaffleStrategyRuleWeight&pid=17416&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682036071&version=1.0 to registry 117.72.36.124:8848, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:56.314 [main            ] INFO  NacosRegistry          -  [DUBBO] Register: dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,strategyArmory,queryRaffleAwardList,queryRaffleStrategyRuleWeight&pid=17416&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682036071&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:56.344 [main            ] INFO  NacosRegistry          -  [DUBBO] Subscribe: provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,strategyArmory,queryRaffleAwardList,queryRaffleStrategyRuleWeight&pid=17416&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682036071&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:56.404 [main            ] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,strategyArmory,queryRaffleAwardList,queryRaffleStrategyRuleWeight&pid=17416&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682036071&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:56.406 [DubboSaveMetadataReport-thread-1] INFO  NacosMetadataReport    -  [DUBBO] store provider metadata. Identifier : org.apache.dubbo.metadata.report.identifier.MetadataIdentifier@27a99334; definition: FullServiceDefinition{parameters=org.apache.dubbo.common.url.component.URLParam$URLParamMap@ee62f263} ServiceDefinition [canonicalName=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService, codeSource=file:/E:/code/java/idea/big-market/big-market-api/target/classes/, methods=[MethodDefinition [name=strategyArmory, parameterTypes=[java.lang.Long], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=randomRaffle, parameterTypes=[cn.wenzhuo4657.BigMarket.tigger.api.dto.RaffleStrategyRequestDTO], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=queryRaffleAwardList, parameterTypes=[cn.wenzhuo4657.BigMarket.tigger.api.dto.RaffleAwardListRequestDTO], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=queryRaffleStrategyRuleWeight, parameterTypes=[cn.wenzhuo4657.BigMarket.tigger.api.dto.RaffleStrategyRuleWeightRequestDTO], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response]]], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:56.437 [main            ] INFO  ServiceConfig          -  [DUBBO] Successfully registered interface application mapping for service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService:1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:56.438 [main            ] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.0] is starting., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:56.438 [main            ] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.0] has started., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:56.438 [main            ] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.1] has started., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:56.439 [main            ] INFO  ConfigurableMetadataServiceExporter -  [DUBBO] Metadata Service Port hasn't been set will use default protocol defined in protocols., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:56.439 [main            ] INFO  ConfigurableMetadataServiceExporter -  [DUBBO] Using dubbo protocol to export metadata service on port 20880, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:56.489 [main            ] INFO  ServiceConfig          -  [DUBBO] Export dubbo service org.apache.dubbo.metadata.MetadataService to local registry url : injvm://127.0.0.1/org.apache.dubbo.metadata.MetadataService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&connections=1&corethreads=2&delay=0&deprecated=false&dubbo=2.0.2&dynamic=true&executes=100&generic=false&getAndListenInstanceMetadata.1.callback=true&getAndListenInstanceMetadata.return=true&getAndListenInstanceMetadata.sent=true&group=big-market&interface=org.apache.dubbo.metadata.MetadataService&methods=getMetadataURL,isMetadataService,getAndListenInstanceMetadata,getExportedURLs,serviceName,getSubscribedURLs,version,getExportedServiceURLs,exportInstanceMetadata,getMetadataInfo,toSortedStrings,getMetadataInfos,getServiceDefinition,getInstanceMetadataChangedListenerMap&pid=17416&qos.enable=false&register=false&release=3.0.9&revision=3.0.9&side=provider&threadpool=cached&threads=100&timestamp=1732682036477&version=1.0.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:56.489 [main            ] INFO  ServiceConfig          -  [DUBBO] Export dubbo service org.apache.dubbo.metadata.MetadataService to url dubbo://172.18.144.1:20880/org.apache.dubbo.metadata.MetadataService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&connections=1&corethreads=2&delay=0&deprecated=false&dubbo=2.0.2&dynamic=true&executes=100&generic=false&getAndListenInstanceMetadata.1.callback=true&getAndListenInstanceMetadata.return=true&getAndListenInstanceMetadata.sent=true&group=big-market&interface=org.apache.dubbo.metadata.MetadataService&methods=getMetadataURL,isMetadataService,getAndListenInstanceMetadata,getExportedURLs,serviceName,getSubscribedURLs,version,getExportedServiceURLs,exportInstanceMetadata,getMetadataInfo,toSortedStrings,getMetadataInfos,getServiceDefinition,getInstanceMetadataChangedListenerMap&pid=17416&qos.enable=false&register=false&release=3.0.9&revision=3.0.9&service-name-mapping=true&side=provider&threadpool=cached&threads=100&timestamp=1732682036477&version=1.0.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:56.551 [main            ] INFO  MigrationRuleListener  -  [DUBBO] Listening for migration rules on dataId big-market.migration, group DUBBO_SERVICEDISCOVERY_MIGRATION, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:56.582 [main            ] INFO  ServiceConfig          -  [DUBBO] Export dubbo service org.apache.dubbo.metadata.MetadataService to url dubbo://172.18.144.1:20880/org.apache.dubbo.metadata.MetadataService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&connections=1&corethreads=2&delay=0&deprecated=false&dubbo=2.0.2&dynamic=true&executes=100&generic=false&getAndListenInstanceMetadata.1.callback=true&getAndListenInstanceMetadata.return=true&getAndListenInstanceMetadata.sent=true&group=big-market&interface=org.apache.dubbo.metadata.MetadataService&methods=getMetadataURL,isMetadataService,getAndListenInstanceMetadata,getExportedURLs,serviceName,getSubscribedURLs,version,getExportedServiceURLs,exportInstanceMetadata,getMetadataInfo,toSortedStrings,getMetadataInfos,getServiceDefinition,getInstanceMetadataChangedListenerMap&pid=17416&qos.enable=false&register=false&release=3.0.9&revision=3.0.9&service-name-mapping=true&side=provider&threadpool=cached&threads=100&timestamp=1732682036477&version=1.0.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:56.751 [main            ] INFO  NacosRegistry          -  [DUBBO] Subscribe: provider://172.18.144.1:20880/org.apache.dubbo.metadata.MetadataService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&connections=1&corethreads=2&delay=0&deprecated=false&dubbo=2.0.2&dynamic=true&executes=100&generic=false&getAndListenInstanceMetadata.1.callback=true&getAndListenInstanceMetadata.return=true&getAndListenInstanceMetadata.sent=true&group=big-market&interface=org.apache.dubbo.metadata.MetadataService&methods=getMetadataURL,isMetadataService,getAndListenInstanceMetadata,getExportedURLs,serviceName,getSubscribedURLs,version,getExportedServiceURLs,exportInstanceMetadata,getMetadataInfo,toSortedStrings,getMetadataInfos,getServiceDefinition,getInstanceMetadataChangedListenerMap&pid=17416&qos.enable=false&register=false&release=3.0.9&revision=3.0.9&service-name-mapping=true&side=provider&threadpool=cached&threads=100&timestamp=1732682036477&version=1.0.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:56.782 [main            ] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/org.apache.dubbo.metadata.MetadataService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&connections=1&corethreads=2&delay=0&deprecated=false&dubbo=2.0.2&dynamic=true&executes=100&generic=false&getAndListenInstanceMetadata.1.callback=true&getAndListenInstanceMetadata.return=true&getAndListenInstanceMetadata.sent=true&group=big-market&interface=org.apache.dubbo.metadata.MetadataService&methods=getMetadataURL,isMetadataService,getAndListenInstanceMetadata,getExportedURLs,serviceName,getSubscribedURLs,version,getExportedServiceURLs,exportInstanceMetadata,getMetadataInfo,toSortedStrings,getMetadataInfos,getServiceDefinition,getInstanceMetadataChangedListenerMap&pid=17416&qos.enable=false&register=false&release=3.0.9&revision=3.0.9&service-name-mapping=true&side=provider&threadpool=cached&threads=100&timestamp=1732682036477&version=1.0.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:56.782 [main            ] INFO  ServiceConfig          -  [DUBBO] Successfully registered interface application mapping for service big-market/org.apache.dubbo.metadata.MetadataService:1.0.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:56.783 [main            ] INFO  ConfigurableMetadataServiceExporter -  [DUBBO] The MetadataService exports urls : [dubbo://172.18.144.1:20880/org.apache.dubbo.metadata.MetadataService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&connections=1&corethreads=2&delay=0&deprecated=false&dubbo=2.0.2&dynamic=true&executes=100&generic=false&getAndListenInstanceMetadata.1.callback=true&getAndListenInstanceMetadata.return=true&getAndListenInstanceMetadata.sent=true&group=big-market&interface=org.apache.dubbo.metadata.MetadataService&methods=getMetadataURL,isMetadataService,getAndListenInstanceMetadata,getExportedURLs,serviceName,getSubscribedURLs,version,getExportedServiceURLs,exportInstanceMetadata,getMetadataInfo,toSortedStrings,getMetadataInfos,getServiceDefinition,getInstanceMetadataChangedListenerMap&pid=17416&qos.enable=false&register=false&release=3.0.9&revision=3.0.9&service-name-mapping=true&side=provider&threadpool=cached&threads=100&timestamp=1732682036477&version=1.0.0], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:56.783 [main            ] INFO  ServiceInstanceMetadataUtils -  [DUBBO] Start registering instance address to registry., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:56.793 [main            ] INFO  MetadataInfo           -  [DUBBO] metadata revision changed: null -> 33f7ba648fa0179fb9687a4d30ba3116, app: big-market, services: 2, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:56.828 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] Dubbo Application[1.1](big-market) is ready., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:33:56.834 [main            ] INFO  Application            - Started Application in 27.886 seconds (JVM running for 28.865)
24-11-27.12:33:56.894 [RMI TCP Connection(6)-172.18.144.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-11-27.12:33:56.894 [RMI TCP Connection(6)-172.18.144.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-11-27.12:33:56.895 [RMI TCP Connection(6)-172.18.144.1] INFO  DispatcherServlet      - Completed initialization in 1 ms
24-11-27.12:33:56.921 [RMI TCP Connection(5)-172.18.144.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-27.12:33:57.451 [RMI TCP Connection(5)-172.18.144.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-27.12:33:57.494 [RMI TCP Connection(5)-172.18.144.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-27.12:33:57.870 [RMI TCP Connection(5)-172.18.144.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-27.12:34:06.178 [http-nio-8091-exec-3] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.12:34:06.289 [http-nio-8091-exec-3] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:朗𤢇𝂻残𪕪갴괐
24-11-27.12:34:06.291 [http-nio-8091-exec-3] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.12:34:06.766 [http-nio-8091-exec-3] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:749164378033
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '???残?갴괐' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [E:\code\java\idea\big-market\big-market-app\target\classes\mybatis\mapper\UserCreditOrderDao.xml]
### The error may involve cn.wenzhuo4657.BigMarket.infrastructure.persistent.dao.UserCreditOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values(                   ?,?,?,?,?,?,now(),now()               )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '???残?갴괐' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '???残?갴괐' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '???残?갴괐' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy164.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:96)
	at com.sun.proxy.$Proxy196.insert(Unknown Source)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:92)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:84)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$b71add64.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$1984034.saveUserCreditTradeOrder(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.credit.service.adjust.CreditAdjustService.createOrder(CreditAdjustService.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:363)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$3e59c96a.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '???残?갴괐' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy240.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy239.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:54)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 84 common frames omitted
24-11-27.12:34:06.853 [http-nio-8091-exec-3] INFO  CreditAdjustService    - 增加账户积分额度完成 userId:xiaofuge orderId:749164378033
24-11-27.12:34:06.853 [http-nio-8091-exec-3] INFO  RaffleActivityController - 积分兑换商品，支付订单完成  userId:xiaofuge sku:9011 orderId:749164378033
24-11-27.12:34:07.238 [http-nio-8091-exec-7] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.12:34:07.238 [http-nio-8091-exec-1] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:34:07.245 [http-nio-8091-exec-2] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:34:07.245 [http-nio-8091-exec-4] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:34:07.298 [http-nio-8091-exec-7] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-27.12:34:07.305 [http-nio-8091-exec-2] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:90.89
24-11-27.12:34:07.324 [http-nio-8091-exec-4] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:34:07.327 [http-nio-8091-exec-1] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:34:07.660 [http-nio-8091-exec-7] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-27.12:34:07.730 [http-nio-8091-exec-7] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.12:35:51.402 [Thread-35       ] WARN  HttpClientBeanHolder   - [HttpClientBeanHolder] Start destroying common HttpClient
24-11-27.12:35:51.402 [Thread-41       ] WARN  NotifyCenter           - [NotifyCenter] Start destroying Publisher
24-11-27.12:35:51.403 [Thread-41       ] WARN  NotifyCenter           - [NotifyCenter] Destruction of the end
24-11-27.12:35:51.403 [DubboShutdownHook] INFO  DubboShutdownHook      -  [DUBBO] Run shutdown hook now., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:51.403 [DubboShutdownHook] INFO  FrameworkModel         -  [DUBBO] Reset global default application from Dubbo Application[1.1](big-market) to null, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:51.403 [DubboShutdownHook] INFO  DefaultApplicationDeployer -  [DUBBO] Dubbo Application[1.1](big-market) is stopping., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:51.403 [DubboShutdownHook] INFO  RegistryManager        -  [DUBBO] Close all registries [nacos://117.72.36.124:8848/org.apache.dubbo.registry.RegistryService?REGISTRY_CLUSTER=nacos-registry&application=big-market&application.version=1.0&dubbo=2.0.2&interface=org.apache.dubbo.registry.RegistryService&pid=17416&qos.enable=false&release=3.0.9, nacos://117.72.36.124:8848/org.apache.dubbo.registry.RegistryService?REGISTRY_CLUSTER=nacos-registry&application=big-market&application.version=1.0&dubbo=2.0.2&interface=org.apache.dubbo.registry.RegistryService&pid=17416&qos.enable=false&release=3.0.9], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:51.403 [DubboShutdownHook] INFO  NacosRegistry          -  [DUBBO] Destroy registry:nacos://117.72.36.124:8848/org.apache.dubbo.registry.RegistryService?REGISTRY_CLUSTER=nacos-registry&application=big-market&application.version=1.0&dubbo=2.0.2&interface=org.apache.dubbo.registry.RegistryService&pid=17416&qos.enable=false&release=3.0.9, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:51.403 [Thread-35       ] WARN  HttpClientBeanHolder   - [HttpClientBeanHolder] Destruction of the end
24-11-27.12:35:51.403 [DubboShutdownHook] INFO  NacosRegistry          -  [DUBBO] Unregister: dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,creditPayExchangeSku,querySkuProductListByActivityId,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=17416&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682034989&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:51.404 [SpringApplicationShutdownHook] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.1] is stopping., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:51.405 [SpringApplicationShutdownHook] WARN  RegistryManager        -  [DUBBO] All registry instances have been destroyed, failed to fetch any instance. Usually, this means no need to try to do unnecessary redundant resource clearance, all registries has been taken care of., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:51.406 [SpringApplicationShutdownHook] WARN  RegistryManager        -  [DUBBO] All registry instances have been destroyed, failed to fetch any instance. Usually, this means no need to try to do unnecessary redundant resource clearance, all registries has been taken care of., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:51.406 [SpringApplicationShutdownHook] WARN  RegistryManager        -  [DUBBO] All registry instances have been destroyed, failed to fetch any instance. Usually, this means no need to try to do unnecessary redundant resource clearance, all registries has been taken care of., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:51.406 [SpringApplicationShutdownHook] WARN  RegistryManager        -  [DUBBO] All registry instances have been destroyed, failed to fetch any instance. Usually, this means no need to try to do unnecessary redundant resource clearance, all registries has been taken care of., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:51.407 [SpringApplicationShutdownHook] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.1] has stopped., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:51.407 [SpringApplicationShutdownHook] INFO  DubboSpringInitializer -  [DUBBO] Unbind Dubbo Module[1.1.1] from spring container: org.springframework.beans.factory.support.DefaultListableBeanFactory@792bbc74, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:51.435 [DubboShutdownHook] INFO  NacosRegistry          -  [DUBBO] Destroy unregister url dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,creditPayExchangeSku,querySkuProductListByActivityId,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=17416&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682034989&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:51.436 [DubboShutdownHook] INFO  NacosRegistry          -  [DUBBO] Unregister: dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,strategyArmory,queryRaffleAwardList,queryRaffleStrategyRuleWeight&pid=17416&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682036071&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:51.440 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-27.12:35:51.466 [DubboShutdownHook] INFO  NacosRegistry          -  [DUBBO] Destroy unregister url dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,strategyArmory,queryRaffleAwardList,queryRaffleStrategyRuleWeight&pid=17416&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682036071&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:51.466 [DubboShutdownHook] INFO  NacosRegistry          -  [DUBBO] Unsubscribe: provider://172.18.144.1:20880/org.apache.dubbo.metadata.MetadataService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&connections=1&corethreads=2&delay=0&deprecated=false&dubbo=2.0.2&dynamic=true&executes=100&generic=false&getAndListenInstanceMetadata.1.callback=true&getAndListenInstanceMetadata.return=true&getAndListenInstanceMetadata.sent=true&group=big-market&interface=org.apache.dubbo.metadata.MetadataService&methods=getMetadataURL,isMetadataService,getAndListenInstanceMetadata,getExportedURLs,serviceName,getSubscribedURLs,version,getExportedServiceURLs,exportInstanceMetadata,getMetadataInfo,toSortedStrings,getMetadataInfos,getServiceDefinition,getInstanceMetadataChangedListenerMap&pid=17416&qos.enable=false&register=false&release=3.0.9&revision=3.0.9&service-name-mapping=true&side=provider&threadpool=cached&threads=100&timestamp=1732682036477&version=1.0.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:51.466 [DubboShutdownHook] INFO  NacosRegistry          -  [DUBBO] Destroy unsubscribe url provider://172.18.144.1:20880/org.apache.dubbo.metadata.MetadataService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&connections=1&corethreads=2&delay=0&deprecated=false&dubbo=2.0.2&dynamic=true&executes=100&generic=false&getAndListenInstanceMetadata.1.callback=true&getAndListenInstanceMetadata.return=true&getAndListenInstanceMetadata.sent=true&group=big-market&interface=org.apache.dubbo.metadata.MetadataService&methods=getMetadataURL,isMetadataService,getAndListenInstanceMetadata,getExportedURLs,serviceName,getSubscribedURLs,version,getExportedServiceURLs,exportInstanceMetadata,getMetadataInfo,toSortedStrings,getMetadataInfos,getServiceDefinition,getInstanceMetadataChangedListenerMap&pid=17416&qos.enable=false&register=false&release=3.0.9&revision=3.0.9&service-name-mapping=true&side=provider&threadpool=cached&threads=100&timestamp=1732682036477&version=1.0.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:51.466 [DubboShutdownHook] INFO  NacosRegistry          -  [DUBBO] Unsubscribe: provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,creditPayExchangeSku,querySkuProductListByActivityId,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=17416&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682034989&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:51.466 [DubboShutdownHook] INFO  NacosRegistry          -  [DUBBO] Destroy unsubscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,creditPayExchangeSku,querySkuProductListByActivityId,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=17416&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682034989&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:51.466 [DubboShutdownHook] INFO  NacosRegistry          -  [DUBBO] Unsubscribe: provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,strategyArmory,queryRaffleAwardList,queryRaffleStrategyRuleWeight&pid=17416&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682036071&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:51.466 [DubboShutdownHook] INFO  NacosRegistry          -  [DUBBO] Destroy unsubscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,strategyArmory,queryRaffleAwardList,queryRaffleStrategyRuleWeight&pid=17416&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682036071&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:51.467 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-27.12:35:51.474 [DubboShutdownHook] INFO  DubboProtocol          -  [DUBBO] Destroying protocol [DubboProtocol] ..., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:51.474 [DubboShutdownHook] INFO  DubboProtocol          -  [DUBBO] Closing dubbo server: /172.18.144.1:20880, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:51.475 [DubboShutdownHook] INFO  AbstractServer         -  [DUBBO] Close NettyServer bind /0.0.0.0:20880, export /172.18.144.1:20880, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:51.494 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-27.12:35:51.521 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-27.12:35:51.606 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-27.12:35:51.788 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-27.12:35:51.927 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-27.12:35:51.942 [Dubbo-framework-registry-notification-0-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,creditPayExchangeSku,querySkuProductListByActivityId,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=17416&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682034989&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:52.036 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-27.12:35:52.357 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-27.12:35:52.357 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-27.12:35:52.357 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-27.12:35:52.357 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-27.12:35:52.359 [Thread-68       ] INFO  EmbedServer            - >>>>>>>>>>> xxl-job remoting server stop.
24-11-27.12:35:52.632 [xxl-job, executor ExecutorRegistryThread] INFO  ExecutorRegistryThread - >>>>>>>>>>> xxl-job registry-remove success, registryParam:RegistryParam{registryGroup='EXECUTOR', registryKey='big-market-job', registryValue='http://117.72.36.124:9090/xxl-job-admin'}, registryResult:ReturnT [code=200, msg=null, content=null]
24-11-27.12:35:52.633 [xxl-job, executor ExecutorRegistryThread] INFO  ExecutorRegistryThread - >>>>>>>>>>> xxl-job, executor registry thread destroy.
24-11-27.12:35:52.633 [SpringApplicationShutdownHook] INFO  EmbedServer            - >>>>>>>>>>> xxl-job remoting server destroy success.
24-11-27.12:35:52.633 [xxl-job, executor JobLogFileCleanThread] INFO  JobLogFileCleanThread  - >>>>>>>>>>> xxl-job, executor JobLogFileCleanThread thread destroy.
24-11-27.12:35:52.633 [xxl-job, executor TriggerCallbackThread] INFO  TriggerCallbackThread  - >>>>>>>>>>> xxl-job, executor callback thread destroy.
24-11-27.12:35:52.633 [Thread-67       ] INFO  TriggerCallbackThread  - >>>>>>>>>>> xxl-job, executor retry callback thread destroy.
24-11-27.12:35:52.736 [Curator-Framework-0] INFO  CuratorFrameworkImpl   - backgroundOperationsLoop exiting
24-11-27.12:35:52.766 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - An exception was thrown while closing send thread for session 0x100003791620011.
org.apache.zookeeper.ClientCnxn$EndOfStreamException: Unable to read additional data from server sessionid 0x100003791620011, likely server has closed socket
	at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:75)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:348)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
24-11-27.12:35:52.870 [main-EventThread] INFO  ClientCnxn             - EventThread shut down for session: 0x100003791620011
24-11-27.12:35:52.870 [SpringApplicationShutdownHook] INFO  ZooKeeper              - Session: 0x100003791620011 closed
24-11-27.12:35:57.138 [main            ] INFO  WelcomeLogoApplicationListener - 

 :: Dubbo Spring Boot (v3.0.9) : https://github.com/apache/dubbo-spring-boot-project
 :: Dubbo (v3.0.9) : https://github.com/apache/dubbo
 :: Discuss group : dev@dubbo.apache.org

24-11-27.12:35:57.183 [background-preinit] INFO  Version                - HV000001: Hibernate Validator 6.2.5.Final
24-11-27.12:35:57.191 [main            ] INFO  Application            - Starting Application using Java 1.8.0_321 on 4657001021 with PID 1664 (E:\code\java\idea\big-market\big-market-app\target\classes started by 14783 in E:\code\java\idea\big-market)
24-11-27.12:35:57.191 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-11-27.12:35:58.608 [main            ] INFO  FrameworkModel         -  [DUBBO] Reset global default framework from null to Dubbo Framework[1], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:58.608 [main            ] INFO  FrameworkModel         -  [DUBBO] Dubbo Framework[1] is created, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:58.637 [main            ] INFO  ApplicationModel       -  [DUBBO] Dubbo Application[1.0](unknown) is created, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:58.637 [main            ] INFO  ScopeModel             -  [DUBBO] Dubbo Module[1.0.0] is created, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:58.661 [main            ] INFO  AbstractConfigManager  -  [DUBBO] Config settings: {dubbo.config.mode=STRICT, dubbo.config.ignore-duplicated-interface=false}, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:58.661 [main            ] INFO  AbstractConfigManager  -  [DUBBO] Config settings: {dubbo.config.mode=STRICT, dubbo.config.ignore-duplicated-interface=false}, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:58.705 [main            ] INFO  FrameworkModel         -  [DUBBO] Reset global default application from null to Dubbo Application[1.1](unknown), dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:58.705 [main            ] INFO  ApplicationModel       -  [DUBBO] Dubbo Application[1.1](unknown) is created, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:58.705 [main            ] INFO  ScopeModel             -  [DUBBO] Dubbo Module[1.1.0] is created, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:58.711 [main            ] INFO  AbstractConfigManager  -  [DUBBO] Config settings: {dubbo.config.mode=STRICT, dubbo.config.ignore-duplicated-interface=false}, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:58.711 [main            ] INFO  AbstractConfigManager  -  [DUBBO] Config settings: {dubbo.config.mode=STRICT, dubbo.config.ignore-duplicated-interface=false}, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:58.723 [main            ] INFO  DubboSpringInitializer -  [DUBBO] Use default application: Dubbo Application[1.1](unknown), dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:58.724 [main            ] INFO  ScopeModel             -  [DUBBO] Dubbo Module[1.1.1] is created, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:58.727 [main            ] INFO  AbstractConfigManager  -  [DUBBO] Config settings: {dubbo.config.mode=STRICT, dubbo.config.ignore-duplicated-interface=false}, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:58.731 [main            ] INFO  DubboSpringInitializer -  [DUBBO] Use default module model of target application: Dubbo Module[1.1.1], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:58.731 [main            ] INFO  DubboSpringInitializer -  [DUBBO] Bind Dubbo Module[1.1.1] to spring container: org.springframework.beans.factory.support.DefaultListableBeanFactory@1ba05e38, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:58.995 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-27.12:35:58.998 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-27.12:35:59.081 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 35 ms. Found 0 Redis repository interfaces.
24-11-27.12:35:59.241 [main            ] INFO  ServiceAnnotationPostProcessor -  [DUBBO] BeanNameGenerator bean can't be found in BeanFactory with name [org.springframework.context.annotation.internalConfigurationBeanNameGenerator], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:59.241 [main            ] INFO  ServiceAnnotationPostProcessor -  [DUBBO] BeanNameGenerator will be a instance of org.springframework.context.annotation.AnnotationBeanNameGenerator , it maybe a potential problem on bean name generation., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:59.251 [main            ] INFO  ServiceAnnotationPostProcessor -  [DUBBO] Found 2 classes annotated by Dubbo @Service under package [cn.wenzhuo4657.BigMarket]: [cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController, cn.wenzhuo4657.BigMarket.trigger.http.RaffleStrategyController], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:59.261 [main            ] INFO  ServiceAnnotationPostProcessor -  [DUBBO] Register ServiceBean[ServiceBean:cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService:1.0]: Root bean: class [org.apache.dubbo.config.spring.ServiceBean]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:59.261 [main            ] INFO  ServiceAnnotationPostProcessor -  [DUBBO] Register ServiceBean[ServiceBean:cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService:1.0]: Root bean: class [org.apache.dubbo.config.spring.ServiceBean]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:59.262 [main            ] INFO  ServiceAnnotationPostProcessor -  [DUBBO] BeanNameGenerator bean can't be found in BeanFactory with name [org.springframework.context.annotation.internalConfigurationBeanNameGenerator], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:59.262 [main            ] INFO  ServiceAnnotationPostProcessor -  [DUBBO] BeanNameGenerator will be a instance of org.springframework.context.annotation.AnnotationBeanNameGenerator , it maybe a potential problem on bean name generation., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:59.262 [main            ] WARN  ServiceAnnotationPostProcessor -  [DUBBO] No class annotated by Dubbo @Service was found under package [cn.wenzhuo4657.trigger.api], ignore re-scanned classes: 0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:35:59.264 [main            ] INFO  ConfigurationClassPostProcessor - Cannot enhance @Configuration bean definition 'org.apache.dubbo.spring.boot.autoconfigure.DubboRelaxedBinding2AutoConfiguration' since its singleton instance has been created too early. The typical cause is a non-static @Bean method with a BeanDefinitionRegistryPostProcessor return type: Consider declaring such methods as 'static'.
24-11-27.12:35:59.264 [main            ] INFO  ConfigurationClassPostProcessor - Cannot enhance @Configuration bean definition 'org.apache.dubbo.spring.boot.autoconfigure.DubboAutoConfiguration' since its singleton instance has been created too early. The typical cause is a non-static @Bean method with a BeanDefinitionRegistryPostProcessor return type: Consider declaring such methods as 'static'.
24-11-27.12:35:59.326 [main            ] INFO  GenericScope           - BeanFactory id=d499ceed-279a-3d77-817f-a65b97419307
24-11-27.12:35:59.935 [main            ] INFO  ReferenceAnnotationBeanPostProcessor - class org.apache.dubbo.config.spring.beans.factory.annotation.ReferenceAnnotationBeanPostProcessor was destroying!
24-11-27.12:36:00.222 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'zooKeeperClientConfig' of type [cn.wenzhuo4657.BigMarket.config.ZooKeeperClientConfig$$EnhancerBySpringCGLIB$$9801d181] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-11-27.12:36:00.233 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-11-27.12:36:00.237 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-11-27.12:36:00.238 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$585/1795358977] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-11-27.12:36:00.243 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-11-27.12:36:00.248 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'zookeeper.sdk.config-cn.wenzhuo4657.BigMarket.config.ZookeeperClientConfigProperties' of type [cn.wenzhuo4657.BigMarket.config.ZookeeperClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-11-27.12:36:00.287 [main            ] INFO  CuratorFrameworkImpl   - Starting
24-11-27.12:36:00.295 [main            ] INFO  ZooKeeper              - Client environment:zookeeper.version=3.6.0--b4c89dc7f6083829e18fae6e446907ae0b1f22d7, built on 02/25/2020 14:38 GMT
24-11-27.12:36:00.296 [main            ] INFO  ZooKeeper              - Client environment:host.name=4657001021.mshome.net
24-11-27.12:36:00.296 [main            ] INFO  ZooKeeper              - Client environment:java.version=1.8.0_321
24-11-27.12:36:00.296 [main            ] INFO  ZooKeeper              - Client environment:java.vendor=Oracle Corporation
24-11-27.12:36:00.296 [main            ] INFO  ZooKeeper              - Client environment:java.home=C:\Program Files\Java\jdk1.8.0_321\jre
24-11-27.12:36:00.296 [main            ] INFO  ZooKeeper              - Client environment:java.class.path=C:\Program Files\Java\jdk1.8.0_321\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\access-bridge-64.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\cldrdata.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\jaccess.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\jfxrt.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\nashorn.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\sunpkcs11.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\ext\zipfs.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\jce.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\jfr.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\jfxswt.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\resources.jar;C:\Program Files\Java\jdk1.8.0_321\jre\lib\rt.jar;E:\code\java\idea\big-market\big-market-app\target\classes;D:\maven\local-maven\com\xuxueli\xxl-job-core\2.4.1\xxl-job-core-2.4.1.jar;D:\maven\local-maven\io\netty\netty-codec-http\4.1.92.Final\netty-codec-http-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-common\4.1.92.Final\netty-common-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-buffer\4.1.92.Final\netty-buffer-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport\4.1.92.Final\netty-transport-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec\4.1.92.Final\netty-codec-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-handler\4.1.92.Final\netty-handler-4.1.92.Final.jar;D:\maven\local-maven\com\google\code\gson\gson\2.9.1\gson-2.9.1.jar;D:\maven\local-maven\org\apache\groovy\groovy\4.0.21\groovy-4.0.21.jar;D:\maven\local-maven\org\slf4j\slf4j-api\1.7.36\slf4j-api-1.7.36.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-starter-zookeeper-discovery\3.1.4\spring-cloud-starter-zookeeper-discovery-3.1.4.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-starter-zookeeper\3.1.4\spring-cloud-starter-zookeeper-3.1.4.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-starter\3.1.7\spring-cloud-starter-3.1.7.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-context\3.1.7\spring-cloud-context-3.1.7.jar;D:\maven\local-maven\org\springframework\security\spring-security-crypto\5.7.8\spring-security-crypto-5.7.8.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-commons\3.1.7\spring-cloud-commons-3.1.7.jar;D:\maven\local-maven\org\springframework\security\spring-security-rsa\1.0.11.RELEASE\spring-security-rsa-1.0.11.RELEASE.jar;D:\maven\local-maven\org\bouncycastle\bcpkix-jdk15on\1.69\bcpkix-jdk15on-1.69.jar;D:\maven\local-maven\org\bouncycastle\bcprov-jdk15on\1.69\bcprov-jdk15on-1.69.jar;D:\maven\local-maven\org\bouncycastle\bcutil-jdk15on\1.69\bcutil-jdk15on-1.69.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-zookeeper-core\3.1.4\spring-cloud-zookeeper-core-3.1.4.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-validation\2.7.12\spring-boot-starter-validation-2.7.12.jar;D:\maven\local-maven\org\hibernate\validator\hibernate-validator\6.2.5.Final\hibernate-validator-6.2.5.Final.jar;D:\maven\local-maven\org\jboss\logging\jboss-logging\3.4.3.Final\jboss-logging-3.4.3.Final.jar;D:\maven\local-maven\com\fasterxml\classmate\1.5.1\classmate-1.5.1.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-zookeeper-discovery\3.1.4\spring-cloud-zookeeper-discovery-3.1.4.jar;D:\maven\local-maven\org\apache\curator\curator-x-discovery\5.1.0\curator-x-discovery-5.1.0.jar;D:\maven\local-maven\org\apache\curator\curator-recipes\5.1.0\curator-recipes-5.1.0.jar;D:\maven\local-maven\org\apache\curator\curator-framework\5.1.0\curator-framework-5.1.0.jar;D:\maven\local-maven\org\apache\curator\curator-client\5.1.0\curator-client-5.1.0.jar;D:\maven\local-maven\org\apache\zookeeper\zookeeper\3.6.0\zookeeper-3.6.0.jar;D:\maven\local-maven\org\apache\zookeeper\zookeeper-jute\3.6.0\zookeeper-jute-3.6.0.jar;D:\maven\local-maven\org\apache\yetus\audience-annotations\0.5.0\audience-annotations-0.5.0.jar;D:\maven\local-maven\io\netty\netty-transport-native-epoll\4.1.92.Final\netty-transport-native-epoll-4.1.92.Final.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-starter-loadbalancer\3.1.7\spring-cloud-starter-loadbalancer-3.1.7.jar;D:\maven\local-maven\org\springframework\cloud\spring-cloud-loadbalancer\3.1.7\spring-cloud-loadbalancer-3.1.7.jar;D:\maven\local-maven\io\projectreactor\addons\reactor-extra\3.4.10\reactor-extra-3.4.10.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-cache\2.7.12\spring-boot-starter-cache-2.7.12.jar;D:\maven\local-maven\org\springframework\spring-context-support\5.3.27\spring-context-support-5.3.27.jar;D:\maven\local-maven\com\stoyanr\evictor\1.0.0\evictor-1.0.0.jar;D:\maven\local-maven\org\apache\dubbo\dubbo\3.0.9\dubbo-3.0.9.jar;D:\maven\local-maven\org\springframework\spring-context\5.3.27\spring-context-5.3.27.jar;D:\maven\local-maven\org\springframework\spring-aop\5.3.27\spring-aop-5.3.27.jar;D:\maven\local-maven\org\springframework\spring-beans\5.3.27\spring-beans-5.3.27.jar;D:\maven\local-maven\org\springframework\spring-expression\5.3.27\spring-expression-5.3.27.jar;D:\maven\local-maven\com\alibaba\spring\spring-context-support\1.0.8\spring-context-support-1.0.8.jar;D:\maven\local-maven\org\javassist\javassist\3.28.0-GA\javassist-3.28.0-GA.jar;D:\maven\local-maven\io\netty\netty-all\4.1.92.Final\netty-all-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-dns\4.1.92.Final\netty-codec-dns-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-haproxy\4.1.92.Final\netty-codec-haproxy-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-http2\4.1.92.Final\netty-codec-http2-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-memcache\4.1.92.Final\netty-codec-memcache-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-mqtt\4.1.92.Final\netty-codec-mqtt-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-redis\4.1.92.Final\netty-codec-redis-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-smtp\4.1.92.Final\netty-codec-smtp-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-socks\4.1.92.Final\netty-codec-socks-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-stomp\4.1.92.Final\netty-codec-stomp-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-codec-xml\4.1.92.Final\netty-codec-xml-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport-native-unix-common\4.1.92.Final\netty-transport-native-unix-common-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-handler-proxy\4.1.92.Final\netty-handler-proxy-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-handler-ssl-ocsp\4.1.92.Final\netty-handler-ssl-ocsp-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-resolver\4.1.92.Final\netty-resolver-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-resolver-dns\4.1.92.Final\netty-resolver-dns-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport-rxtx\4.1.92.Final\netty-transport-rxtx-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport-sctp\4.1.92.Final\netty-transport-sctp-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport-udt\4.1.92.Final\netty-transport-udt-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport-classes-epoll\4.1.92.Final\netty-transport-classes-epoll-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport-classes-kqueue\4.1.92.Final\netty-transport-classes-kqueue-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-resolver-dns-classes-macos\4.1.92.Final\netty-resolver-dns-classes-macos-4.1.92.Final.jar;D:\maven\local-maven\io\netty\netty-transport-native-epoll\4.1.92.Final\netty-transport-native-epoll-4.1.92.Final-linux-x86_64.jar;D:\maven\local-maven\io\netty\netty-transport-native-epoll\4.1.92.Final\netty-transport-native-epoll-4.1.92.Final-linux-aarch_64.jar;D:\maven\local-maven\io\netty\netty-transport-native-kqueue\4.1.92.Final\netty-transport-native-kqueue-4.1.92.Final-osx-x86_64.jar;D:\maven\local-maven\io\netty\netty-transport-native-kqueue\4.1.92.Final\netty-transport-native-kqueue-4.1.92.Final-osx-aarch_64.jar;D:\maven\local-maven\io\netty\netty-resolver-dns-native-macos\4.1.92.Final\netty-resolver-dns-native-macos-4.1.92.Final-osx-x86_64.jar;D:\maven\local-maven\io\netty\netty-resolver-dns-native-macos\4.1.92.Final\netty-resolver-dns-native-macos-4.1.92.Final-osx-aarch_64.jar;D:\maven\local-maven\org\yaml\snakeyaml\1.30\snakeyaml-1.30.jar;D:\maven\local-maven\org\apache\dubbo\dubbo-spring-boot-starter\3.0.9\dubbo-spring-boot-starter-3.0.9.jar;D:\maven\local-maven\org\apache\dubbo\dubbo-spring-boot-autoconfigure\3.0.9\dubbo-spring-boot-autoconfigure-3.0.9.jar;D:\maven\local-maven\org\apache\dubbo\dubbo-spring-boot-autoconfigure-compatible\3.0.9\dubbo-spring-boot-autoconfigure-compatible-3.0.9.jar;D:\maven\local-maven\com\alibaba\nacos\nacos-client\2.1.0\nacos-client-2.1.0.jar;D:\maven\local-maven\com\alibaba\nacos\nacos-auth-plugin\2.1.0\nacos-auth-plugin-2.1.0.jar;D:\maven\local-maven\com\alibaba\nacos\nacos-encryption-plugin\2.1.0\nacos-encryption-plugin-2.1.0.jar;D:\maven\local-maven\com\fasterxml\jackson\core\jackson-core\2.13.5\jackson-core-2.13.5.jar;D:\maven\local-maven\com\fasterxml\jackson\core\jackson-databind\2.13.5\jackson-databind-2.13.5.jar;D:\maven\local-maven\com\fasterxml\jackson\core\jackson-annotations\2.13.5\jackson-annotations-2.13.5.jar;D:\maven\local-maven\org\apache\httpcomponents\httpasyncclient\4.1.5\httpasyncclient-4.1.5.jar;D:\maven\local-maven\org\apache\httpcomponents\httpcore\4.4.16\httpcore-4.4.16.jar;D:\maven\local-maven\org\apache\httpcomponents\httpcore-nio\4.4.16\httpcore-nio-4.4.16.jar;D:\maven\local-maven\org\apache\httpcomponents\httpclient\4.5.14\httpclient-4.5.14.jar;D:\maven\local-maven\io\prometheus\simpleclient\0.15.0\simpleclient-0.15.0.jar;D:\maven\local-maven\io\prometheus\simpleclient_tracer_otel\0.15.0\simpleclient_tracer_otel-0.15.0.jar;D:\maven\local-maven\io\prometheus\simpleclient_tracer_common\0.15.0\simpleclient_tracer_common-0.15.0.jar;D:\maven\local-maven\io\prometheus\simpleclient_tracer_otel_agent\0.15.0\simpleclient_tracer_otel_agent-0.15.0.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-web\2.7.12\spring-boot-starter-web-2.7.12.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter\2.7.12\spring-boot-starter-2.7.12.jar;D:\maven\local-maven\org\springframework\boot\spring-boot\2.7.12\spring-boot-2.7.12.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-logging\2.7.12\spring-boot-starter-logging-2.7.12.jar;D:\maven\local-maven\ch\qos\logback\logback-classic\1.2.12\logback-classic-1.2.12.jar;D:\maven\local-maven\ch\qos\logback\logback-core\1.2.12\logback-core-1.2.12.jar;D:\maven\local-maven\org\apache\logging\log4j\log4j-to-slf4j\2.17.2\log4j-to-slf4j-2.17.2.jar;D:\maven\local-maven\org\apache\logging\log4j\log4j-api\2.17.2\log4j-api-2.17.2.jar;D:\maven\local-maven\org\slf4j\jul-to-slf4j\1.7.36\jul-to-slf4j-1.7.36.jar;D:\maven\local-maven\jakarta\annotation\jakarta.annotation-api\1.3.5\jakarta.annotation-api-1.3.5.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-json\2.7.12\spring-boot-starter-json-2.7.12.jar;D:\maven\local-maven\com\fasterxml\jackson\datatype\jackson-datatype-jdk8\2.13.5\jackson-datatype-jdk8-2.13.5.jar;D:\maven\local-maven\com\fasterxml\jackson\datatype\jackson-datatype-jsr310\2.13.5\jackson-datatype-jsr310-2.13.5.jar;D:\maven\local-maven\com\fasterxml\jackson\module\jackson-module-parameter-names\2.13.5\jackson-module-parameter-names-2.13.5.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-tomcat\2.7.12\spring-boot-starter-tomcat-2.7.12.jar;D:\maven\local-maven\org\apache\tomcat\embed\tomcat-embed-el\9.0.75\tomcat-embed-el-9.0.75.jar;D:\maven\local-maven\org\apache\tomcat\embed\tomcat-embed-websocket\9.0.75\tomcat-embed-websocket-9.0.75.jar;D:\maven\local-maven\org\springframework\spring-web\5.3.27\spring-web-5.3.27.jar;D:\maven\local-maven\org\springframework\spring-webmvc\5.3.27\spring-webmvc-5.3.27.jar;D:\maven\local-maven\net\bytebuddy\byte-buddy\1.12.23\byte-buddy-1.12.23.jar;D:\maven\local-maven\org\objenesis\objenesis\3.2\objenesis-3.2.jar;D:\maven\local-maven\org\springframework\spring-core\5.3.27\spring-core-5.3.27.jar;D:\maven\local-maven\org\springframework\spring-jcl\5.3.27\spring-jcl-5.3.27.jar;D:\maven\local-maven\org\apache\tomcat\embed\tomcat-embed-core\9.0.75\tomcat-embed-core-9.0.75.jar;D:\maven\local-maven\org\apache\tomcat\tomcat-annotations-api\9.0.75\tomcat-annotations-api-9.0.75.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-configuration-processor\2.7.12\spring-boot-configuration-processor-2.7.12.jar;D:\maven\local-maven\com\baomidou\mybatis-plus-boot-starter\3.3.1\mybatis-plus-boot-starter-3.3.1.jar;D:\maven\local-maven\com\baomidou\mybatis-plus\3.3.1\mybatis-plus-3.3.1.jar;D:\maven\local-maven\com\baomidou\mybatis-plus-extension\3.3.1\mybatis-plus-extension-3.3.1.jar;D:\maven\local-maven\com\baomidou\mybatis-plus-core\3.3.1\mybatis-plus-core-3.3.1.jar;D:\maven\local-maven\com\baomidou\mybatis-plus-annotation\3.3.1\mybatis-plus-annotation-3.3.1.jar;D:\maven\local-maven\com\github\jsqlparser\jsqlparser\3.1\jsqlparser-3.1.jar;D:\maven\local-maven\org\mybatis\mybatis-spring\2.0.3\mybatis-spring-2.0.3.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-autoconfigure\2.7.12\spring-boot-autoconfigure-2.7.12.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-jdbc\2.7.12\spring-boot-starter-jdbc-2.7.12.jar;D:\maven\local-maven\com\zaxxer\HikariCP\4.0.3\HikariCP-4.0.3.jar;D:\maven\local-maven\org\springframework\spring-jdbc\5.3.27\spring-jdbc-5.3.27.jar;D:\maven\local-maven\mysql\mysql-connector-java\8.0.22\mysql-connector-java-8.0.22.jar;D:\maven\local-maven\com\google\protobuf\protobuf-java\3.11.4\protobuf-java-3.11.4.jar;D:\maven\local-maven\com\alibaba\fastjson\2.0.28\fastjson-2.0.28.jar;D:\maven\local-maven\com\alibaba\fastjson2\fastjson2-extension\2.0.28\fastjson2-extension-2.0.28.jar;D:\maven\local-maven\com\alibaba\fastjson2\fastjson2\2.0.28\fastjson2-2.0.28.jar;D:\maven\local-maven\org\apache\commons\commons-lang3\3.9\commons-lang3-3.9.jar;D:\maven\local-maven\org\projectlombok\lombok\1.18.26\lombok-1.18.26.jar;D:\maven\local-maven\com\google\guava\guava\32.1.3-jre\guava-32.1.3-jre.jar;D:\maven\local-maven\com\google\guava\failureaccess\1.0.1\failureaccess-1.0.1.jar;D:\maven\local-maven\com\google\guava\listenablefuture\9999.0-empty-to-avoid-conflict-with-guava\listenablefuture-9999.0-empty-to-avoid-conflict-with-guava.jar;D:\maven\local-maven\com\google\code\findbugs\jsr305\3.0.2\jsr305-3.0.2.jar;D:\maven\local-maven\org\checkerframework\checker-qual\3.37.0\checker-qual-3.37.0.jar;D:\maven\local-maven\com\google\errorprone\error_prone_annotations\2.21.1\error_prone_annotations-2.21.1.jar;D:\maven\local-maven\com\google\j2objc\j2objc-annotations\2.8\j2objc-annotations-2.8.jar;D:\maven\local-maven\io\jsonwebtoken\jjwt\0.9.1\jjwt-0.9.1.jar;D:\maven\local-maven\com\auth0\java-jwt\4.4.0\java-jwt-4.4.0.jar;D:\maven\local-maven\commons-codec\commons-codec\1.15\commons-codec-1.15.jar;D:\maven\local-maven\com\squareup\retrofit2\converter-gson\2.9.0\converter-gson-2.9.0.jar;D:\maven\local-maven\com\squareup\retrofit2\retrofit\2.9.0\retrofit-2.9.0.jar;D:\maven\local-maven\com\squareup\okhttp3\okhttp\4.9.3\okhttp-4.9.3.jar;D:\maven\local-maven\com\squareup\okio\okio\2.8.0\okio-2.8.0.jar;D:\maven\local-maven\org\jetbrains\kotlin\kotlin-stdlib-common\1.6.21\kotlin-stdlib-common-1.6.21.jar;D:\maven\local-maven\org\jetbrains\kotlin\kotlin-stdlib\1.6.21\kotlin-stdlib-1.6.21.jar;D:\maven\local-maven\org\jetbrains\annotations\13.0\annotations-13.0.jar;E:\code\java\idea\big-market\big-market-trigger\target\classes;D:\maven\local-maven\com\netflix\hystrix\hystrix-javanica\1.5.18\hystrix-javanica-1.5.18.jar;D:\maven\local-maven\org\aspectj\aspectjrt\1.9.7\aspectjrt-1.9.7.jar;D:\maven\local-maven\org\ow2\asm\asm\5.0.4\asm-5.0.4.jar;D:\maven\local-maven\com\netflix\hystrix\hystrix-core\1.5.18\hystrix-core-1.5.18.jar;D:\maven\local-maven\com\netflix\archaius\archaius-core\0.4.1\archaius-core-0.4.1.jar;D:\maven\local-maven\commons-configuration\commons-configuration\1.8\commons-configuration-1.8.jar;D:\maven\local-maven\io\reactivex\rxjava\1.3.8\rxjava-1.3.8.jar;D:\maven\local-maven\org\hdrhistogram\HdrHistogram\2.1.9\HdrHistogram-2.1.9.jar;D:\maven\local-maven\org\aspectj\aspectjweaver\1.9.7\aspectjweaver-1.9.7.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-amqp\3.2.0\spring-boot-starter-amqp-3.2.0.jar;D:\maven\local-maven\org\springframework\spring-messaging\5.3.27\spring-messaging-5.3.27.jar;D:\maven\local-maven\org\springframework\amqp\spring-rabbit\2.4.12\spring-rabbit-2.4.12.jar;D:\maven\local-maven\org\springframework\amqp\spring-amqp\2.4.12\spring-amqp-2.4.12.jar;D:\maven\local-maven\org\springframework\retry\spring-retry\1.3.4\spring-retry-1.3.4.jar;D:\maven\local-maven\com\rabbitmq\amqp-client\5.14.2\amqp-client-5.14.2.jar;E:\code\java\idea\big-market\big-market-api\target\classes;D:\maven\local-maven\jakarta\validation\jakarta.validation-api\2.0.2\jakarta.validation-api-2.0.2.jar;D:\maven\local-maven\cn\bugstack\middleware\db-router-spring-boot-starter\1.0.2\db-router-spring-boot-starter-1.0.2.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-aop\2.7.12\spring-boot-starter-aop-2.7.12.jar;D:\maven\local-maven\org\mybatis\spring\boot\mybatis-spring-boot-starter\2.1.4\mybatis-spring-boot-starter-2.1.4.jar;D:\maven\local-maven\org\mybatis\spring\boot\mybatis-spring-boot-autoconfigure\2.1.4\mybatis-spring-boot-autoconfigure-2.1.4.jar;D:\maven\local-maven\org\mybatis\mybatis\3.5.6\mybatis-3.5.6.jar;D:\maven\local-maven\commons-beanutils\commons-beanutils\1.9.4\commons-beanutils-1.9.4.jar;D:\maven\local-maven\commons-logging\commons-logging\1.2\commons-logging-1.2.jar;D:\maven\local-maven\commons-collections\commons-collections\3.2.2\commons-collections-3.2.2.jar;D:\maven\local-maven\commons-lang\commons-lang\2.6\commons-lang-2.6.jar;D:\maven\local-maven\org\springframework\spring-tx\5.3.27\spring-tx-5.3.27.jar;E:\code\java\idea\big-market\big-market-types\target\classes;D:\maven\local-maven\com\thoughtworks\xstream\xstream\1.4.10\xstream-1.4.10.jar;D:\maven\local-maven\xmlpull\xmlpull\1.1.3.1\xmlpull-1.1.3.1.jar;D:\maven\local-maven\xpp3\xpp3_min\1.1.4c\xpp3_min-1.1.4c.jar;D:\maven\local-maven\dom4j\dom4j\1.6.1\dom4j-1.6.1.jar;D:\maven\local-maven\xml-apis\xml-apis\1.0.b2\xml-apis-1.0.b2.jar;E:\code\java\idea\big-market\big-market-domain\target\classes;D:\maven\local-maven\org\springframework\boot\spring-boot-actuator-autoconfigure\2.7.12\spring-boot-actuator-autoconfigure-2.7.12.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-actuator\2.7.12\spring-boot-actuator-2.7.12.jar;E:\code\java\idea\big-market\big-market-infrastructure\target\classes;D:\maven\local-maven\org\redisson\redisson-spring-boot-starter\3.23.4\redisson-spring-boot-starter-3.23.4.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-actuator\2.7.12\spring-boot-starter-actuator-2.7.12.jar;D:\maven\local-maven\io\micrometer\micrometer-core\1.9.11\micrometer-core-1.9.11.jar;D:\maven\local-maven\org\latencyutils\LatencyUtils\2.0.3\LatencyUtils-2.0.3.jar;D:\maven\local-maven\org\springframework\boot\spring-boot-starter-data-redis\2.7.12\spring-boot-starter-data-redis-2.7.12.jar;D:\maven\local-maven\org\springframework\data\spring-data-redis\2.7.12\spring-data-redis-2.7.12.jar;D:\maven\local-maven\org\springframework\data\spring-data-keyvalue\2.7.12\spring-data-keyvalue-2.7.12.jar;D:\maven\local-maven\org\springframework\data\spring-data-commons\2.7.12\spring-data-commons-2.7.12.jar;D:\maven\local-maven\org\springframework\spring-oxm\5.3.27\spring-oxm-5.3.27.jar;D:\maven\local-maven\org\redisson\redisson\3.23.4\redisson-3.23.4.jar;D:\maven\local-maven\javax\cache\cache-api\1.1.1\cache-api-1.1.1.jar;D:\maven\local-maven\io\projectreactor\reactor-core\3.4.29\reactor-core-3.4.29.jar;D:\maven\local-maven\org\reactivestreams\reactive-streams\1.0.4\reactive-streams-1.0.4.jar;D:\maven\local-maven\io\reactivex\rxjava3\rxjava\3.1.6\rxjava-3.1.6.jar;D:\maven\local-maven\org\jboss\marshalling\jboss-marshalling\2.0.11.Final\jboss-marshalling-2.0.11.Final.jar;D:\maven\local-maven\org\jboss\marshalling\jboss-marshalling-river\2.0.11.Final\jboss-marshalling-river-2.0.11.Final.jar;D:\maven\local-maven\com\esotericsoftware\kryo\5.5.0\kryo-5.5.0.jar;D:\maven\local-maven\com\esotericsoftware\reflectasm\1.11.9\reflectasm-1.11.9.jar;D:\maven\local-maven\com\esotericsoftware\minlog\1.3.1\minlog-1.3.1.jar;D:\maven\local-maven\com\fasterxml\jackson\dataformat\jackson-dataformat-yaml\2.13.5\jackson-dataformat-yaml-2.13.5.jar;D:\maven\local-maven\org\jodd\jodd-bean\5.1.6\jodd-bean-5.1.6.jar;D:\maven\local-maven\org\jodd\jodd-core\5.1.6\jodd-core-5.1.6.jar;D:\maven\local-maven\org\redisson\redisson-spring-data-31\3.23.4\redisson-spring-data-31-3.23.4.jar;D:\Program Files (x86)\IntelliJ IDEA 2023.1.7\lib\idea_rt.jar;C:\Users\14783\AppData\Local\JetBrains\IntelliJIdea2023.1\captureAgent\debugger-agent.jar
24-11-27.12:36:00.296 [main            ] INFO  ZooKeeper              - Client environment:java.library.path=C:\Program Files\Java\jdk1.8.0_321\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;D:\Program Files (x86)\Ruby33-x64\bin;C:\Program Files (x86)\VMware\VMware Workstation\bin\;C:\Program Files (x86)\Common Files\Oracle\Java\java8path;C:\Program Files (x86)\Common Files\Oracle\Java\javapath;C:\Program Files\Java\jdk1.8.0_321\bin;E:\software\mysql\mysql8.0\mysql-8.0.39-winx64\bin;C:\Windows\system32;E:\software\mysql\mysql5.7\mysql-5.7.30-winx64\bin;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Windows\System32\OpenSSH\;C:\Program Files\dotnet\;D:\maven\apache-maven-3.9.9\bin;E:\software\Git\cmd;E:\software\redis-windows;E:\software\nvm\nvm;E:\software\nvm\nodejs;D:\gradle\gradle-8.10.2\bin;E:\software\giff\git-cliff-2.6.1\bin;D:\Program Files (x86)\Git LFS;C:\Program Files (x86)\Windows Kits\10\Windows Performance Toolkit\;C:\Program Files (x86)\Windows Kits\10\Microsoft Application Virtualization\Sequencer\;C:\Program Files\Docker\Docker\resources\bin;C:\Windows\system32;C:\Program Files (x86)\VMware\VMware Workstation\bin\;C:\Program Files (x86)\Common Files\Oracle\Java\java8path;C:\Program Files (x86)\Common Files\Oracle\Java\javapath;C:\Program Files\Java\jdk1.8.0_321\bin;E:\software\mysql\mysql8.0\mysql-8.0.39-winx64\bin;E:\software\mysql\mysql5.7\mysql-5.7.30-winx64\bin;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Windows\System32\OpenSSH\;C:\Program Files\dotnet\;D:\maven\apache-maven-3.9.9\bin;E:\software\Git\cmd;E:\software\redis-windows;E:\software\nvm\nvm;E:\software\nvm\nodejs;D:\gradle\gradle-8.10.2\bin;E:\software\giff\git-cliff-2.6.1\bin;C:\Program Files (x86)\VMware\VMware Workstation\bin\;C:\Program Files (x86)\Common Files\Oracle\Java\java8path;C:\Program Files (x86)\Common Files\Oracle\Java\javapath;C:\Program Files\Java\jdk1.8.0_321\bin;E:\software\mysql\mysql8.0\mysql-8.0.39-winx64\bin;C:\Windows\system32;E:\software\mysql\mysql5.7\mysql-5.7.30-winx64\bin;C:\Windows;C:\Windows\System32\Wbem;C:\Windo;E:\software\Fiddler;;.
24-11-27.12:36:00.296 [main            ] INFO  ZooKeeper              - Client environment:java.io.tmpdir=C:\Users\14783\AppData\Local\Temp\
24-11-27.12:36:00.296 [main            ] INFO  ZooKeeper              - Client environment:java.compiler=<NA>
24-11-27.12:36:00.296 [main            ] INFO  ZooKeeper              - Client environment:os.name=Windows 11
24-11-27.12:36:00.296 [main            ] INFO  ZooKeeper              - Client environment:os.arch=amd64
24-11-27.12:36:00.296 [main            ] INFO  ZooKeeper              - Client environment:os.version=10.0
24-11-27.12:36:00.296 [main            ] INFO  ZooKeeper              - Client environment:user.name=14783
24-11-27.12:36:00.296 [main            ] INFO  ZooKeeper              - Client environment:user.home=C:\Users\14783
24-11-27.12:36:00.296 [main            ] INFO  ZooKeeper              - Client environment:user.dir=E:\code\java\idea\big-market
24-11-27.12:36:00.296 [main            ] INFO  ZooKeeper              - Client environment:os.memory.free=248MB
24-11-27.12:36:00.296 [main            ] INFO  ZooKeeper              - Client environment:os.memory.max=3609MB
24-11-27.12:36:00.296 [main            ] INFO  ZooKeeper              - Client environment:os.memory.total=418MB
24-11-27.12:36:00.298 [main            ] INFO  ZooKeeper              - Initiating client connection, connectString=117.72.36.124:2181 sessionTimeout=30000 watcher=org.apache.curator.ConnectionState@578b2dec
24-11-27.12:36:00.301 [main            ] INFO  X509Util               - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
24-11-27.12:36:00.308 [main            ] INFO  ClientCnxnSocket       - jute.maxbuffer value is 1048575 Bytes
24-11-27.12:36:00.312 [main            ] INFO  ClientCnxn             - zookeeper.request.timeout value is 0. feature enabled=false
24-11-27.12:36:00.317 [main            ] INFO  CuratorFrameworkImpl   - Default schema
24-11-27.12:36:00.323 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'zookeeperClient' of type [org.apache.curator.framework.imps.CuratorFrameworkImpl] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
24-11-27.12:36:10.605 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Opening socket connection to server 117.72.36.124/117.72.36.124:2181.
24-11-27.12:36:10.605 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - SASL config status: Will not attempt to authenticate using SASL (unknown error)
24-11-27.12:36:10.634 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Socket connection established, initiating session, client: /10.224.3.20:53009, server: 117.72.36.124/117.72.36.124:2181
24-11-27.12:36:10.666 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Session establishment complete on server 117.72.36.124/117.72.36.124:2181, session id = 0x100003791620012, negotiated timeout = 30000
24-11-27.12:36:10.671 [main-EventThread] INFO  ConnectionStateManager - State change: CONNECTED
24-11-27.12:36:10.704 [main-EventThread] INFO  EnsembleTracker        - New config event received: {}
24-11-27.12:36:10.704 [main-EventThread] INFO  EnsembleTracker        - New config event received: {}
24-11-27.12:36:11.053 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-11-27.12:36:11.065 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-11-27.12:36:11.065 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-11-27.12:36:11.065 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-11-27.12:36:11.226 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-11-27.12:36:11.226 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 13866 ms
24-11-27.12:36:11.678 [main            ] INFO  DubboConfigBeanInitializer - loading dubbo config beans ...
24-11-27.12:36:11.682 [main            ] INFO  DubboConfigBeanInitializer - dubbo config beans are loaded.
24-11-27.12:36:11.719 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] No value is configured in the registry, the DynamicConfigurationFactory extension[name : nacos] supports as the config center, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:11.719 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] The registry[<dubbo:registry id="nacos-registry" address="nacos://117.72.36.124:8848" protocol="nacos" port="8848" />] will be used as the config center, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:11.722 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] use registry as config-center: <dubbo:config-center highestPriority="false" id="config-center-nacos-117.72.36.124-8848" address="nacos://117.72.36.124:8848" protocol="nacos" port="8848" />, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:11.767 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
24-11-27.12:36:11.767 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
24-11-27.12:36:13.877 [main            ] WARN  ConfigurationUtils     -  [DUBBO] Config center was specified, but no config item found., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:13.877 [main            ] WARN  ConfigurationUtils     -  [DUBBO] Config center was specified, but no config item found., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:13.915 [main            ] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.0] has been initialized!, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:13.920 [main            ] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.1] has been initialized!, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:13.925 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] No value is configured in the registry, the MetadataReportFactory extension[name : nacos] supports as the metadata center, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:13.925 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] The registry[<dubbo:registry id="nacos-registry" address="nacos://117.72.36.124:8848" protocol="nacos" port="8848" />] will be used as the metadata center, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:13.929 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] use registry as metadata-center: <dubbo:metadata-report id="nacos-registry" address="nacos://117.72.36.124:8848" protocol="nacos" port="8848" />, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:14.014 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
24-11-27.12:36:14.014 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
24-11-27.12:36:14.016 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] Dubbo Application[1.1](big-market) has been initialized!, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:14.096 [main            ] INFO  DCCValueBeanFactory    - DCC 节点监听 设置配置 /big-market-dcc/config/rateLimiterSwitch rateLimiterSwitch 172.18.144.1
24-11-27.12:36:14.378 [main            ] INFO  Version                - Redisson 3.23.4
24-11-27.12:36:14.890 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.36.124/117.72.36.124:6379
24-11-27.12:36:15.381 [redisson-netty-2-23] INFO  MasterConnectionPool   - 10 connections initialized for 117.72.36.124/117.72.36.124:6379
24-11-27.12:36:16.943 [main            ] INFO  DCCValueBeanFactory    - DCC 节点监听 设置配置 /big-market-dcc/config/degradeSwitch degradeSwitch 172.18.144.1
24-11-27.12:36:16.985 [main            ] INFO  XxlJobAutoConfig       - >>>>>>>>>>> xxl-job config init.
24-11-27.12:36:19.678 [main            ] WARN  LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
24-11-27.12:36:19.686 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-27.12:36:19.803 [main            ] INFO  XxlJobExecutor         - >>>>>>>>>>> xxl-job register jobhandler success, name:SendMessageTaskJob_DB1, jobHandler:com.xxl.job.core.handler.impl.MethodJobHandler@ab5e63[class cn.wenzhuo4657.BigMarket.trigger.job.SendMessageTaskJob#exec_db01]
24-11-27.12:36:19.803 [main            ] INFO  XxlJobExecutor         - >>>>>>>>>>> xxl-job register jobhandler success, name:UpdateActivitySkuStockJob, jobHandler:com.xxl.job.core.handler.impl.MethodJobHandler@6a434cdd[class cn.wenzhuo4657.BigMarket.trigger.job.UpdateActivitySkuStockJob#exec]
24-11-27.12:36:19.803 [main            ] INFO  XxlJobExecutor         - >>>>>>>>>>> xxl-job register jobhandler success, name:updateAwardStockJob, jobHandler:com.xxl.job.core.handler.impl.MethodJobHandler@1b12c870[class cn.wenzhuo4657.BigMarket.trigger.job.UpdateAwardStockJob#exec]
24-11-27.12:36:19.875 [Thread-67       ] INFO  EmbedServer            - >>>>>>>>>>> xxl-job remoting server start success, nettype = class com.xxl.job.core.server.EmbedServer, port = 9999
24-11-27.12:36:19.928 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-11-27.12:36:19.941 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-11-27.12:36:20.409 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [117.72.36.124:5672]
24-11-27.12:36:20.547 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#6441db2c:0/SimpleConnection@1c619a77 [delegate=amqp://admin@117.72.36.124:5672/, localPort= 53218]
24-11-27.12:36:21.275 [main            ] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.1] is starting., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:21.276 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] Dubbo Application[1.1](big-market) is starting., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:21.410 [main            ] WARN  ServiceConfig          -  [DUBBO] Use random available port(20880) for protocol dubbo, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:21.468 [main            ] INFO  ServiceConfig          -  [DUBBO] Export dubbo service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService to local registry url : injvm://127.0.0.1/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,creditPayExchangeSku,querySkuProductListByActivityId,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=1664&qos.enable=false&release=3.0.9&revision=1.0&side=provider&timestamp=1732682181404&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:21.468 [main            ] INFO  ServiceConfig          -  [DUBBO] Register dubbo service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService url dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,creditPayExchangeSku,querySkuProductListByActivityId,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=1664&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682181404&version=1.0 to registry 117.72.36.124:8848, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:21.470 [main            ] INFO  QosProtocolWrapper     -  [DUBBO] qos won't be started because it is disabled. Please check dubbo.application.qos.enable is configured either in system property, dubbo.properties or XML/spring-boot configuration., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:21.597 [main            ] INFO  AbstractServer         -  [DUBBO] Start NettyServer bind /0.0.0.0:20880, export /172.18.144.1:20880, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:21.631 [main            ] INFO  MetaCacheManager       -  [DUBBO] Successfully loaded mapping cache from file .metadata.nacos117.72.36.124:8848, entries 0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:21.652 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
24-11-27.12:36:21.652 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
24-11-27.12:36:21.864 [main            ] INFO  MappingCacheManager    -  [DUBBO] Successfully loaded mapping cache from file .mapping, entries 0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:21.874 [main            ] INFO  MigrationRuleListener  -  [DUBBO] Listening for migration rules on dataId big-market.migration, group DUBBO_SERVICEDISCOVERY_MIGRATION, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:21.908 [main            ] INFO  ServiceConfig          -  [DUBBO] Register dubbo service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService url dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,creditPayExchangeSku,querySkuProductListByActivityId,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=1664&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682181404&version=1.0 to registry 117.72.36.124:8848, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:21.908 [main            ] INFO  QosProtocolWrapper     -  [DUBBO] qos won't be started because it is disabled. Please check dubbo.application.qos.enable is configured either in system property, dubbo.properties or XML/spring-boot configuration., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:21.944 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
24-11-27.12:36:21.945 [main            ] INFO  ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
24-11-27.12:36:22.139 [main            ] INFO  NacosRegistry          -  [DUBBO] Register: dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,creditPayExchangeSku,querySkuProductListByActivityId,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=1664&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682181404&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:22.174 [main            ] INFO  NacosRegistry          -  [DUBBO] Subscribe: provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,creditPayExchangeSku,querySkuProductListByActivityId,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=1664&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682181404&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:22.246 [main            ] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,creditPayExchangeSku,querySkuProductListByActivityId,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=1664&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682181404&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:22.254 [DubboSaveMetadataReport-thread-1] INFO  NacosMetadataReport    -  [DUBBO] store provider metadata. Identifier : org.apache.dubbo.metadata.report.identifier.MetadataIdentifier@782a4a49; definition: FullServiceDefinition{parameters=org.apache.dubbo.common.url.component.URLParam$URLParamMap@d460e61d} ServiceDefinition [canonicalName=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService, codeSource=file:/E:/code/java/idea/big-market/big-market-api/target/classes/, methods=[MethodDefinition [name=queryUserCreditAccount, parameterTypes=[java.lang.String], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=calendarSignRebate, parameterTypes=[java.lang.String], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=queryUserActivityAccount, parameterTypes=[cn.wenzhuo4657.BigMarket.tigger.api.dto.UserActivityAccountRequestDTO], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=isCalendarSignRebate, parameterTypes=[java.lang.String], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=creditPayExchangeSku, parameterTypes=[cn.wenzhuo4657.BigMarket.tigger.api.dto.SkuProductShopCartRequestDTO], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=querySkuProductListByActivityId, parameterTypes=[java.lang.Long], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=draw, parameterTypes=[cn.wenzhuo4657.BigMarket.tigger.api.dto.ActivityDrawRequestDTO], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=armory, parameterTypes=[java.lang.Long], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response]]], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:22.488 [main            ] INFO  ServiceConfig          -  [DUBBO] Successfully registered interface application mapping for service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService:1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:22.501 [main            ] INFO  ServiceConfig          -  [DUBBO] Export dubbo service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService to local registry url : injvm://127.0.0.1/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=1664&qos.enable=false&release=3.0.9&revision=1.0&side=provider&timestamp=1732682182490&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:22.501 [main            ] INFO  ServiceConfig          -  [DUBBO] Register dubbo service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService url dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=1664&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682182490&version=1.0 to registry 117.72.36.124:8848, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:22.535 [main            ] INFO  ServiceConfig          -  [DUBBO] Register dubbo service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService url dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=1664&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682182490&version=1.0 to registry 117.72.36.124:8848, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:22.735 [main            ] INFO  NacosRegistry          -  [DUBBO] Register: dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=1664&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682182490&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:22.764 [main            ] INFO  NacosRegistry          -  [DUBBO] Subscribe: provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=1664&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682182490&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:22.790 [Dubbo-framework-registry-notification-0-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,creditPayExchangeSku,querySkuProductListByActivityId,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=1664&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682181404&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:22.828 [main            ] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=1664&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682182490&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:22.830 [DubboSaveMetadataReport-thread-1] INFO  NacosMetadataReport    -  [DUBBO] store provider metadata. Identifier : org.apache.dubbo.metadata.report.identifier.MetadataIdentifier@335554aa; definition: FullServiceDefinition{parameters=org.apache.dubbo.common.url.component.URLParam$URLParamMap@4f49ddb6} ServiceDefinition [canonicalName=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService, codeSource=file:/E:/code/java/idea/big-market/big-market-api/target/classes/, methods=[MethodDefinition [name=queryRaffleStrategyRuleWeight, parameterTypes=[cn.wenzhuo4657.BigMarket.tigger.api.dto.RaffleStrategyRuleWeightRequestDTO], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=queryRaffleAwardList, parameterTypes=[cn.wenzhuo4657.BigMarket.tigger.api.dto.RaffleAwardListRequestDTO], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=strategyArmory, parameterTypes=[java.lang.Long], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response], MethodDefinition [name=randomRaffle, parameterTypes=[cn.wenzhuo4657.BigMarket.tigger.api.dto.RaffleStrategyRequestDTO], returnType=cn.wenzhuo4657.BigMarket.tigger.api.reponse.Response]]], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:22.860 [main            ] INFO  ServiceConfig          -  [DUBBO] Successfully registered interface application mapping for service cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService:1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:22.861 [main            ] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.0] is starting., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:22.861 [main            ] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.0] has started., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:22.861 [main            ] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.1] has started., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:22.862 [main            ] INFO  ConfigurableMetadataServiceExporter -  [DUBBO] Metadata Service Port hasn't been set will use default protocol defined in protocols., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:22.862 [main            ] INFO  ConfigurableMetadataServiceExporter -  [DUBBO] Using dubbo protocol to export metadata service on port 20880, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:22.915 [main            ] INFO  ServiceConfig          -  [DUBBO] Export dubbo service org.apache.dubbo.metadata.MetadataService to local registry url : injvm://127.0.0.1/org.apache.dubbo.metadata.MetadataService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&connections=1&corethreads=2&delay=0&deprecated=false&dubbo=2.0.2&dynamic=true&executes=100&generic=false&getAndListenInstanceMetadata.1.callback=true&getAndListenInstanceMetadata.return=true&getAndListenInstanceMetadata.sent=true&group=big-market&interface=org.apache.dubbo.metadata.MetadataService&methods=getMetadataURL,isMetadataService,getAndListenInstanceMetadata,getExportedURLs,serviceName,getSubscribedURLs,version,getExportedServiceURLs,exportInstanceMetadata,getMetadataInfo,toSortedStrings,getMetadataInfos,getServiceDefinition,getInstanceMetadataChangedListenerMap&pid=1664&qos.enable=false&register=false&release=3.0.9&revision=3.0.9&side=provider&threadpool=cached&threads=100&timestamp=1732682182902&version=1.0.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:22.915 [main            ] INFO  ServiceConfig          -  [DUBBO] Export dubbo service org.apache.dubbo.metadata.MetadataService to url dubbo://172.18.144.1:20880/org.apache.dubbo.metadata.MetadataService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&connections=1&corethreads=2&delay=0&deprecated=false&dubbo=2.0.2&dynamic=true&executes=100&generic=false&getAndListenInstanceMetadata.1.callback=true&getAndListenInstanceMetadata.return=true&getAndListenInstanceMetadata.sent=true&group=big-market&interface=org.apache.dubbo.metadata.MetadataService&methods=getMetadataURL,isMetadataService,getAndListenInstanceMetadata,getExportedURLs,serviceName,getSubscribedURLs,version,getExportedServiceURLs,exportInstanceMetadata,getMetadataInfo,toSortedStrings,getMetadataInfos,getServiceDefinition,getInstanceMetadataChangedListenerMap&pid=1664&qos.enable=false&register=false&release=3.0.9&revision=3.0.9&service-name-mapping=true&side=provider&threadpool=cached&threads=100&timestamp=1732682182902&version=1.0.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:22.978 [main            ] INFO  MigrationRuleListener  -  [DUBBO] Listening for migration rules on dataId big-market.migration, group DUBBO_SERVICEDISCOVERY_MIGRATION, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:23.009 [main            ] INFO  ServiceConfig          -  [DUBBO] Export dubbo service org.apache.dubbo.metadata.MetadataService to url dubbo://172.18.144.1:20880/org.apache.dubbo.metadata.MetadataService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&connections=1&corethreads=2&delay=0&deprecated=false&dubbo=2.0.2&dynamic=true&executes=100&generic=false&getAndListenInstanceMetadata.1.callback=true&getAndListenInstanceMetadata.return=true&getAndListenInstanceMetadata.sent=true&group=big-market&interface=org.apache.dubbo.metadata.MetadataService&methods=getMetadataURL,isMetadataService,getAndListenInstanceMetadata,getExportedURLs,serviceName,getSubscribedURLs,version,getExportedServiceURLs,exportInstanceMetadata,getMetadataInfo,toSortedStrings,getMetadataInfos,getServiceDefinition,getInstanceMetadataChangedListenerMap&pid=1664&qos.enable=false&register=false&release=3.0.9&revision=3.0.9&service-name-mapping=true&side=provider&threadpool=cached&threads=100&timestamp=1732682182902&version=1.0.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:23.179 [main            ] INFO  NacosRegistry          -  [DUBBO] Subscribe: provider://172.18.144.1:20880/org.apache.dubbo.metadata.MetadataService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&connections=1&corethreads=2&delay=0&deprecated=false&dubbo=2.0.2&dynamic=true&executes=100&generic=false&getAndListenInstanceMetadata.1.callback=true&getAndListenInstanceMetadata.return=true&getAndListenInstanceMetadata.sent=true&group=big-market&interface=org.apache.dubbo.metadata.MetadataService&methods=getMetadataURL,isMetadataService,getAndListenInstanceMetadata,getExportedURLs,serviceName,getSubscribedURLs,version,getExportedServiceURLs,exportInstanceMetadata,getMetadataInfo,toSortedStrings,getMetadataInfos,getServiceDefinition,getInstanceMetadataChangedListenerMap&pid=1664&qos.enable=false&register=false&release=3.0.9&revision=3.0.9&service-name-mapping=true&side=provider&threadpool=cached&threads=100&timestamp=1732682182902&version=1.0.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:23.212 [main            ] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/org.apache.dubbo.metadata.MetadataService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&connections=1&corethreads=2&delay=0&deprecated=false&dubbo=2.0.2&dynamic=true&executes=100&generic=false&getAndListenInstanceMetadata.1.callback=true&getAndListenInstanceMetadata.return=true&getAndListenInstanceMetadata.sent=true&group=big-market&interface=org.apache.dubbo.metadata.MetadataService&methods=getMetadataURL,isMetadataService,getAndListenInstanceMetadata,getExportedURLs,serviceName,getSubscribedURLs,version,getExportedServiceURLs,exportInstanceMetadata,getMetadataInfo,toSortedStrings,getMetadataInfos,getServiceDefinition,getInstanceMetadataChangedListenerMap&pid=1664&qos.enable=false&register=false&release=3.0.9&revision=3.0.9&service-name-mapping=true&side=provider&threadpool=cached&threads=100&timestamp=1732682182902&version=1.0.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:23.212 [main            ] INFO  ServiceConfig          -  [DUBBO] Successfully registered interface application mapping for service big-market/org.apache.dubbo.metadata.MetadataService:1.0.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:23.212 [main            ] INFO  ConfigurableMetadataServiceExporter -  [DUBBO] The MetadataService exports urls : [dubbo://172.18.144.1:20880/org.apache.dubbo.metadata.MetadataService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&connections=1&corethreads=2&delay=0&deprecated=false&dubbo=2.0.2&dynamic=true&executes=100&generic=false&getAndListenInstanceMetadata.1.callback=true&getAndListenInstanceMetadata.return=true&getAndListenInstanceMetadata.sent=true&group=big-market&interface=org.apache.dubbo.metadata.MetadataService&methods=getMetadataURL,isMetadataService,getAndListenInstanceMetadata,getExportedURLs,serviceName,getSubscribedURLs,version,getExportedServiceURLs,exportInstanceMetadata,getMetadataInfo,toSortedStrings,getMetadataInfos,getServiceDefinition,getInstanceMetadataChangedListenerMap&pid=1664&qos.enable=false&register=false&release=3.0.9&revision=3.0.9&service-name-mapping=true&side=provider&threadpool=cached&threads=100&timestamp=1732682182902&version=1.0.0], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:23.212 [main            ] INFO  ServiceInstanceMetadataUtils -  [DUBBO] Start registering instance address to registry., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:23.223 [main            ] INFO  MetadataInfo           -  [DUBBO] metadata revision changed: null -> 9bc0155e4ba3dbcdc31abe9f9f6da609, app: big-market, services: 2, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:23.256 [main            ] INFO  DefaultApplicationDeployer -  [DUBBO] Dubbo Application[1.1](big-market) is ready., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:23.261 [main            ] INFO  Application            - Started Application in 26.985 seconds (JVM running for 28.078)
24-11-27.12:36:23.273 [Dubbo-framework-registry-notification-2-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=1664&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682182490&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:36:23.723 [RMI TCP Connection(6)-172.18.144.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-11-27.12:36:23.723 [RMI TCP Connection(6)-172.18.144.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-11-27.12:36:23.725 [RMI TCP Connection(6)-172.18.144.1] INFO  DispatcherServlet      - Completed initialization in 2 ms
24-11-27.12:36:23.752 [RMI TCP Connection(5)-172.18.144.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-27.12:36:24.327 [RMI TCP Connection(5)-172.18.144.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-27.12:36:24.374 [RMI TCP Connection(5)-172.18.144.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-27.12:36:24.743 [RMI TCP Connection(5)-172.18.144.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-27.12:36:28.423 [http-nio-8091-exec-1] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.12:39:18.397 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=2m53s538ms428µs600ns).
24-11-27.12:39:18.397 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=2m53s964ms221µs800ns).
24-11-27.12:39:18.398 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Client session timed out, have not heard from server in 158387ms for session id 0x100003791620012
24-11-27.12:39:18.399 [http-nio-8091-exec-1] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:朗𤢇𝂻残𪕪갴괐
24-11-27.12:39:18.413 [http-nio-8091-exec-1] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.12:39:18.416 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Session 0x100003791620012 for sever 117.72.36.124/117.72.36.124:2181, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
org.apache.zookeeper.ClientCnxn$SessionTimeoutException: Client session timed out, have not heard from server in 158387ms for session id 0x100003791620012
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1230)
24-11-27.12:39:18.524 [main-EventThread] INFO  ConnectionStateManager - State change: SUSPENDED
24-11-27.12:39:18.703 [http-nio-8091-exec-1] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:676480722383
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '???残?갴괐' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [E:\code\java\idea\big-market\big-market-app\target\classes\mybatis\mapper\UserCreditOrderDao.xml]
### The error may involve cn.wenzhuo4657.BigMarket.infrastructure.persistent.dao.UserCreditOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values(                   ?,?,?,?,?,?,now(),now()               )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '???残?갴괐' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '???残?갴괐' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '???残?갴괐' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy164.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:96)
	at com.sun.proxy.$Proxy196.insert(Unknown Source)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:92)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:84)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$b71add64.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$bab8e9d.saveUserCreditTradeOrder(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.credit.service.adjust.CreditAdjustService.createOrder(CreditAdjustService.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:363)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$76d1eb0e.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '???残?갴괐' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy240.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy239.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:54)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 84 common frames omitted
24-11-27.12:39:18.797 [http-nio-8091-exec-1] INFO  CreditAdjustService    - 增加账户积分额度完成 userId:xiaofuge orderId:676480722383
24-11-27.12:39:18.797 [http-nio-8091-exec-1] INFO  RaffleActivityController - 积分兑换商品，支付订单完成  userId:xiaofuge sku:9011 orderId:676480722383
24-11-27.12:39:19.462 [http-nio-8091-exec-2] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:39:19.462 [http-nio-8091-exec-5] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.12:39:19.475 [http-nio-8091-exec-4] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:39:19.475 [http-nio-8091-exec-3] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:39:19.529 [http-nio-8091-exec-5] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-27.12:39:19.537 [http-nio-8091-exec-3] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:90.89
24-11-27.12:39:19.539 [http-nio-8091-exec-4] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:39:19.588 [http-nio-8091-exec-2] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:39:19.909 [http-nio-8091-exec-5] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-27.12:39:19.985 [http-nio-8091-exec-5] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.12:39:20.667 [Dubbo-framework-registry-notification-0-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,creditPayExchangeSku,querySkuProductListByActivityId,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=1664&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682181404&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:39:20.667 [Dubbo-framework-registry-notification-2-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=1664&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682182490&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:39:21.951 [Dubbo-framework-registry-notification-0-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,creditPayExchangeSku,querySkuProductListByActivityId,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=1664&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682181404&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:39:22.051 [Dubbo-framework-registry-notification-2-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=1664&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682182490&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:39:25.185 [http-nio-8091-exec-6] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.12:39:34.678 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Opening socket connection to server 117.72.36.124/117.72.36.124:2181.
24-11-27.12:39:34.678 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - SASL config status: Will not attempt to authenticate using SASL (unknown error)
24-11-27.12:39:34.706 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Socket connection established, initiating session, client: /10.224.3.20:53456, server: 117.72.36.124/117.72.36.124:2181
24-11-27.12:39:34.735 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Unable to reconnect to ZooKeeper service, session 0x100003791620012 has expired
24-11-27.12:39:34.735 [main-EventThread] WARN  ConnectionState        - Session expired event received
24-11-27.12:39:34.735 [main-EventThread] INFO  ZooKeeper              - Initiating client connection, connectString=117.72.36.124:2181 sessionTimeout=30000 watcher=org.apache.curator.ConnectionState@578b2dec
24-11-27.12:39:34.736 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Session 0x100003791620012 for sever 117.72.36.124/117.72.36.124:2181, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
org.apache.zookeeper.ClientCnxn$SessionExpiredException: Unable to reconnect to ZooKeeper service, session 0x100003791620012 has expired
	at org.apache.zookeeper.ClientCnxn$SendThread.onConnected(ClientCnxn.java:1406)
	at org.apache.zookeeper.ClientCnxnSocket.readConnectResult(ClientCnxnSocket.java:154)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:84)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:348)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
24-11-27.12:39:34.741 [main-EventThread] INFO  ClientCnxnSocket       - jute.maxbuffer value is 1048575 Bytes
24-11-27.12:39:34.741 [main-EventThread] INFO  ClientCnxn             - zookeeper.request.timeout value is 0. feature enabled=false
24-11-27.12:39:34.741 [main-EventThread] INFO  ConnectionStateManager - State change: LOST
24-11-27.12:39:34.742 [main-EventThread] INFO  ClientCnxn             - EventThread shut down for session: 0x100003791620012
24-11-27.12:39:34.782 [http-nio-8091-exec-6] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期、状态、库存(sku)】校验开始。sku:9011 activityId:100301
24-11-27.12:39:34.782 [http-nio-8091-exec-6] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【有效期、状态、库存(sku)】开始。sku:9011 activityId:100301
24-11-27.12:39:34.841 [http-nio-8091-exec-6] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【有效期、状态、库存(sku)】成功。sku:9011 activityId:100301
24-11-27.12:39:35.097 [http-nio-8091-exec-6] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:57831754296
24-11-27.12:39:35.097 [http-nio-8091-exec-6] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.12:39:35.409 [http-nio-8091-exec-6] INFO  CreditAdjustService    - 增加账户积分额度完成 userId:xiaofuge orderId:394784124708
24-11-27.12:39:35.409 [http-nio-8091-exec-6] INFO  RaffleActivityController - 积分兑换商品，支付订单完成  userId:xiaofuge sku:9011 orderId:394784124708
24-11-27.12:39:36.462 [http-nio-8091-exec-9] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:39:36.462 [http-nio-8091-exec-10] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:39:36.462 [http-nio-8091-exec-11] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.12:39:36.462 [http-nio-8091-exec-7] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:39:36.520 [http-nio-8091-exec-10] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:39:36.520 [http-nio-8091-exec-9] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:92.57
24-11-27.12:39:36.575 [http-nio-8091-exec-7] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:39:36.604 [http-nio-8091-exec-11] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.12:39:46.331 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Opening socket connection to server 117.72.36.124/117.72.36.124:2181.
24-11-27.12:39:46.331 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - SASL config status: Will not attempt to authenticate using SASL (unknown error)
24-11-27.12:39:46.358 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Socket connection established, initiating session, client: /10.224.3.20:53465, server: 117.72.36.124/117.72.36.124:2181
24-11-27.12:39:46.386 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Session establishment complete on server 117.72.36.124/117.72.36.124:2181, session id = 0x100003791620013, negotiated timeout = 30000
24-11-27.12:39:46.386 [main-EventThread] INFO  ConnectionStateManager - State change: RECONNECTED
24-11-27.12:39:46.414 [main-EventThread] INFO  EnsembleTracker        - New config event received: {}
24-11-27.12:39:48.267 [http-nio-8091-exec-13] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:39:48.267 [http-nio-8091-exec-12] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:39:48.267 [http-nio-8091-exec-8] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:39:48.324 [http-nio-8091-exec-13] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:39:48.324 [http-nio-8091-exec-12] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:92.57
24-11-27.12:39:48.381 [http-nio-8091-exec-8] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:39:48.576 [http-nio-8091-exec-16] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:39:48.576 [http-nio-8091-exec-15] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:39:48.576 [http-nio-8091-exec-14] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:39:48.605 [http-nio-8091-exec-15] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:92.57
24-11-27.12:39:48.605 [http-nio-8091-exec-16] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:39:48.661 [http-nio-8091-exec-14] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:39:48.889 [http-nio-8091-exec-19] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:39:48.889 [http-nio-8091-exec-18] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:39:48.890 [http-nio-8091-exec-17] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:39:48.924 [http-nio-8091-exec-19] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:39:48.924 [http-nio-8091-exec-18] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:92.57
24-11-27.12:39:48.982 [http-nio-8091-exec-17] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:39:49.793 [http-nio-8091-exec-20] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.12:39:56.763 [http-nio-8091-exec-20] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:57831754296
24-11-27.12:39:56.763 [http-nio-8091-exec-20] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.12:39:56.935 [http-nio-8091-exec-20] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:747576747703
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '57831754296' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [E:\code\java\idea\big-market\big-market-app\target\classes\mybatis\mapper\UserCreditOrderDao.xml]
### The error may involve cn.wenzhuo4657.BigMarket.infrastructure.persistent.dao.UserCreditOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values(                   ?,?,?,?,?,?,now(),now()               )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '57831754296' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '57831754296' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '57831754296' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy164.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:96)
	at com.sun.proxy.$Proxy196.insert(Unknown Source)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:92)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:84)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$b71add64.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$bab8e9d.saveUserCreditTradeOrder(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.credit.service.adjust.CreditAdjustService.createOrder(CreditAdjustService.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:363)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$76d1eb0e.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '57831754296' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor179.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy240.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy239.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:54)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 84 common frames omitted
24-11-27.12:39:57.020 [http-nio-8091-exec-20] INFO  CreditAdjustService    - 增加账户积分额度完成 userId:xiaofuge orderId:747576747703
24-11-27.12:39:57.020 [http-nio-8091-exec-20] INFO  RaffleActivityController - 积分兑换商品，支付订单完成  userId:xiaofuge sku:9011 orderId:747576747703
24-11-27.12:39:57.459 [http-nio-8091-exec-22] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:39:57.459 [http-nio-8091-exec-23] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:39:57.459 [http-nio-8091-exec-24] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.12:39:57.459 [http-nio-8091-exec-21] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:39:57.495 [http-nio-8091-exec-23] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:39:57.523 [http-nio-8091-exec-22] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:92.57
24-11-27.12:39:57.570 [http-nio-8091-exec-21] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:39:57.606 [http-nio-8091-exec-24] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.12:40:21.127 [http-nio-8091-exec-26] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.12:40:21.127 [http-nio-8091-exec-25] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.12:40:21.127 [http-nio-8091-exec-27] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.12:40:21.127 [http-nio-8091-exec-28] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.12:40:21.152 [http-nio-8091-exec-29] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:40:21.152 [http-nio-8091-exec-30] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:40:21.212 [http-nio-8091-exec-29] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:92.57
24-11-27.12:40:21.216 [http-nio-8091-exec-31] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:40:21.247 [http-nio-8091-exec-31] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:40:21.251 [http-nio-8091-exec-32] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:40:21.272 [http-nio-8091-exec-30] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:40:21.273 [http-nio-8091-exec-27] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.12:40:21.274 [http-nio-8091-exec-26] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.12:40:21.274 [http-nio-8091-exec-25] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.12:40:21.278 [http-nio-8091-exec-28] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.12:40:21.279 [http-nio-8091-exec-33] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:40:21.283 [http-nio-8091-exec-34] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:40:21.284 [http-nio-8091-exec-35] INFO  RaffleActivityController - 查询sku商品集合开始 activityId:100301
24-11-27.12:40:21.284 [http-nio-8091-exec-36] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.12:40:21.285 [http-nio-8091-exec-37] INFO  RaffleActivityController - 查询sku商品集合开始 activityId:100301
24-11-27.12:40:21.309 [http-nio-8091-exec-33] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:92.57
24-11-27.12:40:21.311 [http-nio-8091-exec-34] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:40:21.315 [http-nio-8091-exec-38] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.12:40:21.341 [http-nio-8091-exec-32] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:40:21.351 [http-nio-8091-exec-37] INFO  RaffleActivityController - 查询sku商品集合完成 activityId:100301 skuProductResponseDTOS:[{"activityCount":{"dayCount":100,"monthCount":100,"totalCount":100},"activityCountId":11101,"productAmount":1.68,"sku":9011,"stockCount":100000,"stockCountSurplus":99886}]
24-11-27.12:40:21.351 [http-nio-8091-exec-35] INFO  RaffleActivityController - 查询sku商品集合完成 activityId:100301 skuProductResponseDTOS:[{"activityCount":{"dayCount":100,"monthCount":100,"totalCount":100},"activityCountId":11101,"productAmount":1.68,"sku":9011,"stockCount":100000,"stockCountSurplus":99886}]
24-11-27.12:40:21.380 [http-nio-8091-exec-36] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.12:40:21.409 [http-nio-8091-exec-38] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.12:42:12.757 [http-nio-8091-exec-45] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.12:42:12.816 [http-nio-8091-exec-45] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:57831754296
24-11-27.12:42:12.816 [http-nio-8091-exec-45] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.12:42:13.131 [http-nio-8091-exec-45] INFO  CreditAdjustService    - 增加账户积分额度完成 userId:xiaofuge orderId:760981724156
24-11-27.12:42:13.131 [http-nio-8091-exec-45] INFO  RaffleActivityController - 积分兑换商品，支付订单完成  userId:xiaofuge sku:9011 orderId:760981724156
24-11-27.12:42:13.493 [http-nio-8091-exec-46] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:42:13.493 [http-nio-8091-exec-47] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:42:13.493 [http-nio-8091-exec-48] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:42:13.493 [http-nio-8091-exec-49] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.12:42:13.549 [http-nio-8091-exec-48] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:42:13.549 [http-nio-8091-exec-47] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:94.25
24-11-27.12:42:13.580 [http-nio-8091-exec-46] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:42:13.634 [http-nio-8091-exec-49] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.12:42:15.037 [http-nio-8091-exec-50] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.12:42:15.095 [http-nio-8091-exec-50] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:57831754296
24-11-27.12:42:15.095 [http-nio-8091-exec-50] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.12:42:15.270 [http-nio-8091-exec-50] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:855326550431
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '57831754296' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [E:\code\java\idea\big-market\big-market-app\target\classes\mybatis\mapper\UserCreditOrderDao.xml]
### The error may involve cn.wenzhuo4657.BigMarket.infrastructure.persistent.dao.UserCreditOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values(                   ?,?,?,?,?,?,now(),now()               )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '57831754296' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '57831754296' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '57831754296' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy164.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:96)
	at com.sun.proxy.$Proxy196.insert(Unknown Source)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:92)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:84)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$b71add64.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$bab8e9d.saveUserCreditTradeOrder(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.credit.service.adjust.CreditAdjustService.createOrder(CreditAdjustService.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:363)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$76d1eb0e.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '57831754296' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor179.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy240.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy239.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:54)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 84 common frames omitted
24-11-27.12:42:15.354 [http-nio-8091-exec-50] INFO  CreditAdjustService    - 增加账户积分额度完成 userId:xiaofuge orderId:855326550431
24-11-27.12:42:15.354 [http-nio-8091-exec-50] INFO  RaffleActivityController - 积分兑换商品，支付订单完成  userId:xiaofuge sku:9011 orderId:855326550431
24-11-27.12:42:15.728 [http-nio-8091-exec-3] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:42:15.728 [http-nio-8091-exec-4] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:42:15.728 [http-nio-8091-exec-1] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:42:15.728 [http-nio-8091-exec-2] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.12:42:15.784 [http-nio-8091-exec-3] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:94.25
24-11-27.12:42:15.785 [http-nio-8091-exec-4] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:42:15.817 [http-nio-8091-exec-1] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:42:15.873 [http-nio-8091-exec-2] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.12:42:25.437 [http-nio-8091-exec-5] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.12:42:25.494 [http-nio-8091-exec-5] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:57831754296
24-11-27.12:42:25.494 [http-nio-8091-exec-5] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.12:42:25.666 [http-nio-8091-exec-5] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:453585820282
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '57831754296' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [E:\code\java\idea\big-market\big-market-app\target\classes\mybatis\mapper\UserCreditOrderDao.xml]
### The error may involve cn.wenzhuo4657.BigMarket.infrastructure.persistent.dao.UserCreditOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values(                   ?,?,?,?,?,?,now(),now()               )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '57831754296' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '57831754296' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '57831754296' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy164.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:96)
	at com.sun.proxy.$Proxy196.insert(Unknown Source)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:92)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:84)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$b71add64.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$bab8e9d.saveUserCreditTradeOrder(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.credit.service.adjust.CreditAdjustService.createOrder(CreditAdjustService.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:363)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$76d1eb0e.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '57831754296' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor179.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy240.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy239.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:54)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 84 common frames omitted
24-11-27.12:42:25.756 [http-nio-8091-exec-5] INFO  CreditAdjustService    - 增加账户积分额度完成 userId:xiaofuge orderId:453585820282
24-11-27.12:42:25.756 [http-nio-8091-exec-5] INFO  RaffleActivityController - 积分兑换商品，支付订单完成  userId:xiaofuge sku:9011 orderId:453585820282
24-11-27.12:42:26.122 [http-nio-8091-exec-9] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:42:26.123 [http-nio-8091-exec-10] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:42:26.123 [http-nio-8091-exec-7] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.12:42:26.123 [http-nio-8091-exec-6] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:42:26.152 [http-nio-8091-exec-10] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:42:26.179 [http-nio-8091-exec-9] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:94.25
24-11-27.12:42:26.239 [http-nio-8091-exec-6] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:42:26.270 [http-nio-8091-exec-7] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.12:44:19.798 [http-nio-8091-exec-15] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.12:44:22.877 [http-nio-8091-exec-15] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:57831754296
24-11-27.12:44:22.877 [http-nio-8091-exec-15] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.12:45:31.924 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Client session timed out, have not heard from server in 56601ms for session id 0x100003791620013
24-11-27.12:45:31.924 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m13s433ms907µs).
24-11-27.12:45:31.924 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m13s434ms438µs800ns).
24-11-27.12:45:31.926 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=56s628ms10µs900ns).
24-11-27.12:45:31.927 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Session 0x100003791620013 for sever 117.72.36.124/117.72.36.124:2181, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
org.apache.zookeeper.ClientCnxn$SessionTimeoutException: Client session timed out, have not heard from server in 56601ms for session id 0x100003791620013
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1230)
24-11-27.12:45:34.818 [main-EventThread] INFO  ConnectionStateManager - State change: SUSPENDED
24-11-27.12:45:41.978 [http-nio-8091-exec-15] ERROR RaffleActivityController - 积分兑换商品失败 userId:xiaofuge sku:9011
java.lang.IllegalMonitorStateException: attempt to unlock lock, not locked by current thread by node id: cde9cf26-b983-442e-b14a-a380d07a59f9 thread-id: 158
	at org.redisson.RedissonBaseLock.lambda$unlockAsync0$2(RedissonBaseLock.java:290)
	at java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:836)
	at java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:811)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.command.CommandBatchService.lambda$executeAsync$7(CommandBatchService.java:362)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:774)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.command.CommandBatchService.lambda$execute$9(CommandBatchService.java:471)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:774)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.command.RedisCommonBatchExecutor.handleResult(RedisCommonBatchExecutor.java:164)
	at org.redisson.command.RedisExecutor.checkAttemptPromise(RedisExecutor.java:553)
	at org.redisson.command.RedisExecutor.lambda$execute$5(RedisExecutor.java:195)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:774)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.client.handler.CommandDecoder.decodeCommandBatch(CommandDecoder.java:326)
	at org.redisson.client.handler.CommandDecoder.decodeCommand(CommandDecoder.java:217)
	at org.redisson.client.handler.CommandDecoder.decode(CommandDecoder.java:144)
	at org.redisson.client.handler.CommandDecoder.decode(CommandDecoder.java:120)
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:529)
	at io.netty.handler.codec.ReplayingDecoder.callDecode(ReplayingDecoder.java:366)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:750)
24-11-27.12:45:43.923 [Dubbo-framework-registry-notification-2-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=1664&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682182490&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:45:43.923 [Dubbo-framework-registry-notification-0-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,creditPayExchangeSku,querySkuProductListByActivityId,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=1664&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682181404&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:45:44.135 [Dubbo-framework-registry-notification-0-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,creditPayExchangeSku,querySkuProductListByActivityId,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=1664&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682181404&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:45:44.138 [Dubbo-framework-registry-notification-2-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=1664&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682182490&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:45:48.767 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Opening socket connection to server 117.72.36.124/117.72.36.124:2181.
24-11-27.12:45:48.767 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - SASL config status: Will not attempt to authenticate using SASL (unknown error)
24-11-27.12:45:48.795 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Socket connection established, initiating session, client: /10.224.3.20:54064, server: 117.72.36.124/117.72.36.124:2181
24-11-27.12:45:48.823 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Unable to reconnect to ZooKeeper service, session 0x100003791620013 has expired
24-11-27.12:45:48.823 [main-EventThread] WARN  ConnectionState        - Session expired event received
24-11-27.12:45:48.823 [main-EventThread] INFO  ZooKeeper              - Initiating client connection, connectString=117.72.36.124:2181 sessionTimeout=30000 watcher=org.apache.curator.ConnectionState@578b2dec
24-11-27.12:45:48.823 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Session 0x100003791620013 for sever 117.72.36.124/117.72.36.124:2181, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
org.apache.zookeeper.ClientCnxn$SessionExpiredException: Unable to reconnect to ZooKeeper service, session 0x100003791620013 has expired
	at org.apache.zookeeper.ClientCnxn$SendThread.onConnected(ClientCnxn.java:1406)
	at org.apache.zookeeper.ClientCnxnSocket.readConnectResult(ClientCnxnSocket.java:154)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:84)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:348)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
24-11-27.12:45:48.824 [main-EventThread] INFO  ClientCnxnSocket       - jute.maxbuffer value is 1048575 Bytes
24-11-27.12:45:48.824 [main-EventThread] INFO  ClientCnxn             - zookeeper.request.timeout value is 0. feature enabled=false
24-11-27.12:45:48.824 [main-EventThread] INFO  ConnectionStateManager - State change: LOST
24-11-27.12:45:48.824 [main-EventThread] INFO  ClientCnxn             - EventThread shut down for session: 0x100003791620013
24-11-27.12:45:59.145 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Opening socket connection to server 117.72.36.124/117.72.36.124:2181.
24-11-27.12:45:59.145 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - SASL config status: Will not attempt to authenticate using SASL (unknown error)
24-11-27.12:45:59.173 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Socket connection established, initiating session, client: /10.224.3.20:54092, server: 117.72.36.124/117.72.36.124:2181
24-11-27.12:45:59.201 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Session establishment complete on server 117.72.36.124/117.72.36.124:2181, session id = 0x100003791620014, negotiated timeout = 30000
24-11-27.12:45:59.201 [main-EventThread] INFO  ConnectionStateManager - State change: RECONNECTED
24-11-27.12:45:59.229 [main-EventThread] INFO  EnsembleTracker        - New config event received: {}
24-11-27.12:46:21.638 [Dubbo-framework-cache-refreshing-scheduler-thread-1] INFO  AbstractCacheManager$CacheRefreshTask -  [DUBBO] Dumping meta caches, latest entries 0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:46:21.873 [Dubbo-framework-cache-refreshing-scheduler-thread-1] INFO  AbstractCacheManager$CacheRefreshTask -  [DUBBO] Dumping mapping caches, latest entries 0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:47:22.810 [http-nio-8091-exec-18] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.12:47:25.633 [http-nio-8091-exec-18] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:57831754296
24-11-27.12:47:25.633 [http-nio-8091-exec-18] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.12:47:39.515 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Client session timed out, have not heard from server in 20072ms for session id 0x100003791620014
24-11-27.12:47:39.515 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Session 0x100003791620014 for sever 117.72.36.124/117.72.36.124:2181, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
org.apache.zookeeper.ClientCnxn$SessionTimeoutException: Client session timed out, have not heard from server in 20072ms for session id 0x100003791620014
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1230)
24-11-27.12:47:39.964 [main-EventThread] INFO  ConnectionStateManager - State change: SUSPENDED
24-11-27.12:47:50.847 [Dubbo-framework-registry-notification-2-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=1664&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682182490&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:47:55.790 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Opening socket connection to server 117.72.36.124/117.72.36.124:2181.
24-11-27.12:47:55.790 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - SASL config status: Will not attempt to authenticate using SASL (unknown error)
24-11-27.12:47:55.791 [http-nio-8091-exec-18] ERROR RaffleActivityController - 积分兑换商品失败 userId:xiaofuge sku:9011
java.lang.IllegalMonitorStateException: attempt to unlock lock, not locked by current thread by node id: cde9cf26-b983-442e-b14a-a380d07a59f9 thread-id: 161
	at org.redisson.RedissonBaseLock.lambda$unlockAsync0$2(RedissonBaseLock.java:290)
	at java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:836)
	at java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:811)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.command.CommandBatchService.lambda$executeAsync$7(CommandBatchService.java:362)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:774)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.command.CommandBatchService.lambda$execute$9(CommandBatchService.java:471)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:774)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.command.RedisCommonBatchExecutor.handleResult(RedisCommonBatchExecutor.java:164)
	at org.redisson.command.RedisExecutor.checkAttemptPromise(RedisExecutor.java:553)
	at org.redisson.command.RedisExecutor.lambda$execute$5(RedisExecutor.java:195)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:774)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.client.handler.CommandDecoder.decodeCommandBatch(CommandDecoder.java:326)
	at org.redisson.client.handler.CommandDecoder.decodeCommand(CommandDecoder.java:217)
	at org.redisson.client.handler.CommandDecoder.decode(CommandDecoder.java:144)
	at org.redisson.client.handler.CommandDecoder.decode(CommandDecoder.java:120)
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:529)
	at io.netty.handler.codec.ReplayingDecoder.callDecode(ReplayingDecoder.java:366)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:750)
24-11-27.12:47:55.817 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Socket connection established, initiating session, client: /10.224.3.20:54223, server: 117.72.36.124/117.72.36.124:2181
24-11-27.12:47:55.844 [main-EventThread] WARN  ConnectionState        - Session expired event received
24-11-27.12:47:55.844 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Unable to reconnect to ZooKeeper service, session 0x100003791620014 has expired
24-11-27.12:47:55.844 [main-EventThread] INFO  ZooKeeper              - Initiating client connection, connectString=117.72.36.124:2181 sessionTimeout=30000 watcher=org.apache.curator.ConnectionState@578b2dec
24-11-27.12:47:55.845 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Session 0x100003791620014 for sever 117.72.36.124/117.72.36.124:2181, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
org.apache.zookeeper.ClientCnxn$SessionExpiredException: Unable to reconnect to ZooKeeper service, session 0x100003791620014 has expired
	at org.apache.zookeeper.ClientCnxn$SendThread.onConnected(ClientCnxn.java:1406)
	at org.apache.zookeeper.ClientCnxnSocket.readConnectResult(ClientCnxnSocket.java:154)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:84)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:348)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
24-11-27.12:47:55.845 [main-EventThread] INFO  ClientCnxnSocket       - jute.maxbuffer value is 1048575 Bytes
24-11-27.12:47:55.845 [main-EventThread] INFO  ClientCnxn             - zookeeper.request.timeout value is 0. feature enabled=false
24-11-27.12:47:55.845 [main-EventThread] INFO  ConnectionStateManager - State change: LOST
24-11-27.12:47:55.845 [main-EventThread] INFO  ClientCnxn             - EventThread shut down for session: 0x100003791620014
24-11-27.12:47:56.371 [Dubbo-framework-registry-notification-2-thread-1] WARN  NacosRegistry          -  [DUBBO] Ignore empty notify urls for subscribe url provider://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService?anyhost=true&application=big-market&application.version=1.0&background=false&bind.ip=172.18.144.1&bind.port=20880&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleStrategyService&methods=randomRaffle,queryRaffleAwardList,strategyArmory,queryRaffleStrategyRuleWeight&pid=1664&qos.enable=false&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682182490&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:48:07.475 [http-nio-8091-exec-24] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.12:48:07.475 [http-nio-8091-exec-21] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.12:48:07.475 [http-nio-8091-exec-22] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.12:48:07.476 [http-nio-8091-exec-29] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.12:48:07.487 [http-nio-8091-exec-30] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:48:07.490 [http-nio-8091-exec-26] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:48:07.556 [http-nio-8091-exec-26] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:48:07.557 [http-nio-8091-exec-30] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:97.61
24-11-27.12:48:07.561 [http-nio-8091-exec-28] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:48:07.563 [http-nio-8091-exec-25] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:48:07.614 [http-nio-8091-exec-24] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.12:48:07.614 [http-nio-8091-exec-22] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.12:48:07.619 [http-nio-8091-exec-33] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:48:07.619 [http-nio-8091-exec-34] INFO  RaffleActivityController - 查询sku商品集合开始 activityId:100301
24-11-27.12:48:07.622 [http-nio-8091-exec-28] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:97.61
24-11-27.12:48:07.622 [http-nio-8091-exec-25] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:48:07.626 [http-nio-8091-exec-35] INFO  RaffleActivityController - 查询sku商品集合开始 activityId:100301
24-11-27.12:48:07.632 [http-nio-8091-exec-36] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:48:07.641 [http-nio-8091-exec-21] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.12:48:07.643 [http-nio-8091-exec-29] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.12:48:07.644 [http-nio-8091-exec-38] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.12:48:07.646 [http-nio-8091-exec-39] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.12:48:07.677 [http-nio-8091-exec-34] INFO  RaffleActivityController - 查询sku商品集合完成 activityId:100301 skuProductResponseDTOS:[{"activityCount":{"dayCount":100,"monthCount":100,"totalCount":100},"activityCountId":11101,"productAmount":1.68,"sku":9011,"stockCount":100000,"stockCountSurplus":99886}]
24-11-27.12:48:07.684 [http-nio-8091-exec-35] INFO  RaffleActivityController - 查询sku商品集合完成 activityId:100301 skuProductResponseDTOS:[{"activityCount":{"dayCount":100,"monthCount":100,"totalCount":100},"activityCountId":11101,"productAmount":1.68,"sku":9011,"stockCount":100000,"stockCountSurplus":99886}]
24-11-27.12:48:07.712 [http-nio-8091-exec-33] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:48:07.719 [http-nio-8091-exec-36] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:48:07.740 [http-nio-8091-exec-38] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.12:48:07.740 [http-nio-8091-exec-39] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.12:48:07.760 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Opening socket connection to server 117.72.36.124/117.72.36.124:2181.
24-11-27.12:48:07.760 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - SASL config status: Will not attempt to authenticate using SASL (unknown error)
24-11-27.12:48:07.787 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Socket connection established, initiating session, client: /10.224.3.20:54256, server: 117.72.36.124/117.72.36.124:2181
24-11-27.12:48:07.844 [main-SendThread(117.72.36.124:2181)] INFO  ClientCnxn             - Session establishment complete on server 117.72.36.124/117.72.36.124:2181, session id = 0x100003791620015, negotiated timeout = 30000
24-11-27.12:48:07.844 [main-EventThread] INFO  ConnectionStateManager - State change: RECONNECTED
24-11-27.12:48:07.870 [main-EventThread] INFO  EnsembleTracker        - New config event received: {}
24-11-27.12:48:10.219 [http-nio-8091-exec-43] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.12:48:10.219 [http-nio-8091-exec-41] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.12:48:10.219 [http-nio-8091-exec-40] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.12:48:10.219 [http-nio-8091-exec-42] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.12:48:10.234 [http-nio-8091-exec-45] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:48:10.234 [http-nio-8091-exec-44] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:48:10.295 [http-nio-8091-exec-45] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:97.61
24-11-27.12:48:10.297 [http-nio-8091-exec-48] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:48:10.330 [http-nio-8091-exec-42] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.12:48:10.332 [http-nio-8091-exec-47] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:48:10.352 [http-nio-8091-exec-48] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:48:10.353 [http-nio-8091-exec-44] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:48:10.355 [http-nio-8091-exec-46] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:48:10.356 [http-nio-8091-exec-41] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.12:48:10.357 [http-nio-8091-exec-43] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.12:48:10.357 [http-nio-8091-exec-40] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.12:48:10.357 [http-nio-8091-exec-49] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:48:10.360 [http-nio-8091-exec-50] INFO  RaffleActivityController - 查询sku商品集合开始 activityId:100301
24-11-27.12:48:10.361 [http-nio-8091-exec-4] INFO  RaffleActivityController - 查询sku商品集合开始 activityId:100301
24-11-27.12:48:10.361 [http-nio-8091-exec-3] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.12:48:10.385 [http-nio-8091-exec-49] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:48:10.385 [http-nio-8091-exec-46] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:97.61
24-11-27.12:48:10.389 [http-nio-8091-exec-1] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.12:48:10.419 [http-nio-8091-exec-4] INFO  RaffleActivityController - 查询sku商品集合完成 activityId:100301 skuProductResponseDTOS:[{"activityCount":{"dayCount":100,"monthCount":100,"totalCount":100},"activityCountId":11101,"productAmount":1.68,"sku":9011,"stockCount":100000,"stockCountSurplus":99886}]
24-11-27.12:48:10.419 [http-nio-8091-exec-50] INFO  RaffleActivityController - 查询sku商品集合完成 activityId:100301 skuProductResponseDTOS:[{"activityCount":{"dayCount":100,"monthCount":100,"totalCount":100},"activityCountId":11101,"productAmount":1.68,"sku":9011,"stockCount":100000,"stockCountSurplus":99886}]
24-11-27.12:48:10.419 [http-nio-8091-exec-47] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:48:10.448 [http-nio-8091-exec-3] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.12:48:10.474 [http-nio-8091-exec-1] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.12:48:21.956 [http-nio-8091-exec-2] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.12:48:21.957 [http-nio-8091-exec-9] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.12:48:21.957 [http-nio-8091-exec-10] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.12:48:21.957 [http-nio-8091-exec-5] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge activityId：100301
24-11-27.12:48:21.992 [http-nio-8091-exec-7] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:48:21.993 [http-nio-8091-exec-6] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:48:22.050 [http-nio-8091-exec-7] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:97.61
24-11-27.12:48:22.054 [http-nio-8091-exec-13] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:48:22.083 [http-nio-8091-exec-13] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:48:22.087 [http-nio-8091-exec-8] INFO  RaffleActivityController - 查询sku商品集合开始 activityId:100301
24-11-27.12:48:22.096 [http-nio-8091-exec-5] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.12:48:22.096 [http-nio-8091-exec-2] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.12:48:22.096 [http-nio-8091-exec-10] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.12:48:22.096 [http-nio-8091-exec-9] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId:xiaofuge activityId：100301
24-11-27.12:48:22.098 [http-nio-8091-exec-12] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.12:48:22.100 [http-nio-8091-exec-11] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301
24-11-27.12:48:22.101 [http-nio-8091-exec-15] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-27.12:48:22.102 [http-nio-8091-exec-16] INFO  RaffleActivityController - 查询用户是否完成日历签到返利开始 userId:xiaofuge
24-11-27.12:48:22.107 [http-nio-8091-exec-6] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:48:22.113 [http-nio-8091-exec-14] INFO  RaffleActivityController - 查询sku商品集合开始 activityId:100301
24-11-27.12:48:22.130 [http-nio-8091-exec-16] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:1
24-11-27.12:48:22.130 [http-nio-8091-exec-15] INFO  RaffleActivityController - 查询用户积分值完成 userId:xiaofuge adjustAmount:97.61
24-11-27.12:48:22.134 [http-nio-8091-exec-18] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-11-27.12:48:22.160 [http-nio-8091-exec-8] INFO  RaffleActivityController - 查询sku商品集合完成 activityId:100301 skuProductResponseDTOS:[{"activityCount":{"dayCount":100,"monthCount":100,"totalCount":100},"activityCountId":11101,"productAmount":1.68,"sku":9011,"stockCount":100000,"stockCountSurplus":99886}]
24-11-27.12:48:22.168 [http-nio-8091-exec-14] INFO  RaffleActivityController - 查询sku商品集合完成 activityId:100301 skuProductResponseDTOS:[{"activityCount":{"dayCount":100,"monthCount":100,"totalCount":100},"activityCountId":11101,"productAmount":1.68,"sku":9011,"stockCount":100000,"stockCountSurplus":99886}]
24-11-27.12:48:22.188 [http-nio-8091-exec-12] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.12:48:22.190 [http-nio-8091-exec-11] INFO  RaffleActivityController - 查询用户活动账户完成 userId:xiaofuge activityId:100301 dto:{"dayCount":660,"dayCountSurplus":593,"monthCount":660,"monthCountSurplus":593,"totalCount":660,"totalCountSurplus":555}
24-11-27.12:48:22.224 [http-nio-8091-exec-18] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":70,"strategyAwards":[{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":10,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"}],"userActivityAccountTotalUseCount":105},{"ruleWeightCount":1000,"strategyAwards":[{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":105}],"info":"调用成功"}
24-11-27.12:49:21.988 [http-nio-8091-exec-19] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011
24-11-27.12:49:25.677 [http-nio-8091-exec-19] INFO  RaffleActivityController - 积分兑换商品，创建订单完成 userId:xiaofuge sku:9011 outBusinessNo:57831754296
24-11-27.12:49:25.677 [http-nio-8091-exec-19] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:CONVERT_SKU amount:1.68
24-11-27.12:50:00.162 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Client session timed out, have not heard from server in 31993ms for session id 0x100003791620015
24-11-27.12:50:00.162 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=50s632ms496µs).
24-11-27.12:50:00.163 [main-SendThread(117.72.36.124:2181)] WARN  ClientCnxn             - Session 0x100003791620015 for sever 117.72.36.124/117.72.36.124:2181, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
org.apache.zookeeper.ClientCnxn$SessionTimeoutException: Client session timed out, have not heard from server in 31993ms for session id 0x100003791620015
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1230)
24-11-27.12:50:00.162 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=50s632ms463µs900ns).
24-11-27.12:50:00.163 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=50s632ms491µs800ns).
24-11-27.12:50:00.176 [http-nio-8091-exec-19] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:983266571728
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '57831754296' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [E:\code\java\idea\big-market\big-market-app\target\classes\mybatis\mapper\UserCreditOrderDao.xml]
### The error may involve cn.wenzhuo4657.BigMarket.infrastructure.persistent.dao.UserCreditOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values(                   ?,?,?,?,?,?,now(),now()               )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '57831754296' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '57831754296' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '57831754296' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy164.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:96)
	at com.sun.proxy.$Proxy196.insert(Unknown Source)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:92)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:84)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$b71add64.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$bab8e9d.saveUserCreditTradeOrder(<generated>)
	at cn.wenzhuo4657.BigMarket.domain.credit.service.adjust.CreditAdjustService.createOrder(CreditAdjustService.java:61)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:363)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$FastClassBySpringCGLIB$$1b20b24c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.wenzhuo4657.BigMarket.trigger.http.RaffleActivityController$$EnhancerBySpringCGLIB$$76d1eb0e.creditPayExchangeSku(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '57831754296' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor179.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy240.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.GeneratedMethodAccessor258.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy239.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:54)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 84 common frames omitted
24-11-27.12:50:00.260 [http-nio-8091-exec-19] ERROR RaffleActivityController - 积分兑换商品失败 userId:xiaofuge sku:9011
java.lang.IllegalMonitorStateException: attempt to unlock lock, not locked by current thread by node id: cde9cf26-b983-442e-b14a-a380d07a59f9 thread-id: 162
	at org.redisson.RedissonBaseLock.lambda$unlockAsync0$2(RedissonBaseLock.java:290)
	at java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:836)
	at java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:811)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.command.CommandBatchService.lambda$executeAsync$7(CommandBatchService.java:362)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:774)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.command.CommandBatchService.lambda$execute$9(CommandBatchService.java:471)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:774)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.command.RedisCommonBatchExecutor.handleResult(RedisCommonBatchExecutor.java:164)
	at org.redisson.command.RedisExecutor.checkAttemptPromise(RedisExecutor.java:553)
	at org.redisson.command.RedisExecutor.lambda$execute$5(RedisExecutor.java:195)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:774)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.client.handler.CommandDecoder.decodeCommandBatch(CommandDecoder.java:326)
	at org.redisson.client.handler.CommandDecoder.decodeCommand(CommandDecoder.java:217)
	at org.redisson.client.handler.CommandDecoder.decode(CommandDecoder.java:144)
	at org.redisson.client.handler.CommandDecoder.decode(CommandDecoder.java:120)
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:529)
	at io.netty.handler.codec.ReplayingDecoder.callDecode(ReplayingDecoder.java:366)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:750)
24-11-27.12:50:00.261 [Thread-40       ] WARN  NotifyCenter           - [NotifyCenter] Start destroying Publisher
24-11-27.12:50:00.261 [Thread-40       ] WARN  NotifyCenter           - [NotifyCenter] Destruction of the end
24-11-27.12:50:00.261 [DubboShutdownHook] INFO  DubboShutdownHook      -  [DUBBO] Run shutdown hook now., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:50:00.261 [Thread-35       ] WARN  HttpClientBeanHolder   - [HttpClientBeanHolder] Start destroying common HttpClient
24-11-27.12:50:00.261 [DubboShutdownHook] INFO  FrameworkModel         -  [DUBBO] Reset global default application from Dubbo Application[1.1](big-market) to null, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:50:00.262 [Thread-35       ] WARN  HttpClientBeanHolder   - [HttpClientBeanHolder] Destruction of the end
24-11-27.12:50:00.262 [DubboShutdownHook] INFO  DefaultApplicationDeployer -  [DUBBO] Dubbo Application[1.1](big-market) is stopping., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:50:00.262 [DubboShutdownHook] INFO  RegistryManager        -  [DUBBO] Close all registries [nacos://117.72.36.124:8848/org.apache.dubbo.registry.RegistryService?REGISTRY_CLUSTER=nacos-registry&application=big-market&application.version=1.0&dubbo=2.0.2&interface=org.apache.dubbo.registry.RegistryService&pid=1664&qos.enable=false&release=3.0.9, nacos://117.72.36.124:8848/org.apache.dubbo.registry.RegistryService?REGISTRY_CLUSTER=nacos-registry&application=big-market&application.version=1.0&dubbo=2.0.2&interface=org.apache.dubbo.registry.RegistryService&pid=1664&qos.enable=false&release=3.0.9], dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:50:00.262 [DubboShutdownHook] INFO  NacosRegistry          -  [DUBBO] Destroy registry:nacos://117.72.36.124:8848/org.apache.dubbo.registry.RegistryService?REGISTRY_CLUSTER=nacos-registry&application=big-market&application.version=1.0&dubbo=2.0.2&interface=org.apache.dubbo.registry.RegistryService&pid=1664&qos.enable=false&release=3.0.9, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:50:00.262 [DubboShutdownHook] INFO  NacosRegistry          -  [DUBBO] Unregister: dubbo://172.18.144.1:20880/cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService?anyhost=true&application=big-market&application.version=1.0&background=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=cn.wenzhuo4657.BigMarket.tigger.api.IRaffleActivityService&methods=queryUserActivityAccount,creditPayExchangeSku,querySkuProductListByActivityId,queryUserCreditAccount,armory,calendarSignRebate,draw,isCalendarSignRebate&pid=1664&release=3.0.9&revision=1.0&service-name-mapping=true&side=provider&timestamp=1732682181404&version=1.0, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:50:00.263 [main-EventThread] INFO  ConnectionStateManager - State change: SUSPENDED
24-11-27.12:50:00.264 [SpringApplicationShutdownHook] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.1] is stopping., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:50:00.266 [SpringApplicationShutdownHook] WARN  RegistryManager        -  [DUBBO] All registry instances have been destroyed, failed to fetch any instance. Usually, this means no need to try to do unnecessary redundant resource clearance, all registries has been taken care of., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:50:00.267 [SpringApplicationShutdownHook] WARN  RegistryManager        -  [DUBBO] All registry instances have been destroyed, failed to fetch any instance. Usually, this means no need to try to do unnecessary redundant resource clearance, all registries has been taken care of., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:50:00.269 [SpringApplicationShutdownHook] WARN  RegistryManager        -  [DUBBO] All registry instances have been destroyed, failed to fetch any instance. Usually, this means no need to try to do unnecessary redundant resource clearance, all registries has been taken care of., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:50:00.269 [SpringApplicationShutdownHook] WARN  RegistryManager        -  [DUBBO] All registry instances have been destroyed, failed to fetch any instance. Usually, this means no need to try to do unnecessary redundant resource clearance, all registries has been taken care of., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:50:00.269 [SpringApplicationShutdownHook] INFO  DefaultModuleDeployer  -  [DUBBO] Dubbo Module[1.1.1] has stopped., dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:50:00.270 [SpringApplicationShutdownHook] INFO  DubboSpringInitializer -  [DUBBO] Unbind Dubbo Module[1.1.1] from spring container: org.springframework.beans.factory.support.DefaultListableBeanFactory@1ba05e38, dubbo version: 3.0.9, current host: 172.18.144.1
24-11-27.12:50:00.307 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-27.12:50:00.336 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
